(function(i,m){i.fn.czMore=function(e){var h={max:50,min:0,onLoad:null,onAdd:null,onDelete:null,styleOverride:!1,countFieldPrefix:"_czMore_txtCount"},e=i.extend(h,e);return i(this).bind("onAdd",function(n,l){e.onAdd.call(n,l)}),i(this).bind("onLoad",function(n,l){e.onLoad.call(n,l)}),i(this).bind("onDelete",function(n,l){e.onDelete.call(n,l)}),this.each(function(){var n=i(this),l=a(),p='<div id="btnPlus" class="btnPlus"/>',g='<input id="'+this.id+e.countFieldPrefix+'" name="'+this.id+e.countFieldPrefix+'" type="hidden" value="0" size="5" />';n.before(g);var o=n.children("#first");n.after(p),o.children(".recordset").children().first();var u=n.siblings("#btnPlus");if(e.styleOverride||(u.css({float:"right",border:"0px","background-position":"center center","background-repeat":"no-repeat",height:"25px",width:"25px",cursor:"pointer"}),u.append(i("<i/>",{class:"fa fa-plus fa-lg text-success"}))),o.length){n.siblings("#btnPlus").click(function(){if(b())return!1;var t=a(),r=o.clone().html();return t++,r=r.replace(/\[([0-9]\d{0})\]/g,"["+t+"]"),r=r.replace(/\_([0-9]\d{0})\_/g,"_"+t+"_"),n.append(r),f(n.children().last()),c(n.children().last()),e.onAdd!=null&&n.trigger("onAdd",t),n.siblings("input[name$='"+e.countFieldPrefix+"']").val(t),!1}),o.remove();for(var d=0;d<=l;d++)f(n.children()[d]),c(n.children()[d]),e.onAdd!=null&&n.trigger("onAdd",d);e.onLoad!=null&&n.trigger("onLoad",l)}function v(){i(n).children(".recordset").each(function(t,r){i(r).find("input:text, input:password, input:file, select, textarea").each(function(){var s=this.name,x=s.replace(/\_([0-9]\d{0})\_/g,"_"+(t+1)+"_");this.id=this.name=x}),t++,c(r)})}function f(t){var r='<div id="btnMinus" class="btnMinus" />';i(t).children().first().before(r);var s=i(t).children("#btnMinus");e.styleOverride||(s.css({float:"right",border:"0px","background-position":"center center","background-repeat":"no-repeat",height:"25px",width:"25px",cursor:"poitnter"}),s.append(i("<i/>",{class:"fa fa-times fa-lg text-danger"})))}function c(t){i(t).children("#btnMinus").click(function(){a();var r=i(t).attr("data-id");i(t).remove(),v(),n.siblings("input[name$='"+e.countFieldPrefix+"']").val(n.children(".recordset").length),e.onDelete!=null&&r!=null&&n.trigger("onDelete",r)})}function a(){return n.children(".recordset").length}function b(){return a()>=e.max}})}})(jQuery);
