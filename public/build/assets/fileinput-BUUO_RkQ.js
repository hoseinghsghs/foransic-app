import{g as we}from"./_commonjsHelpers-Cpj98o6Y.js";import{r as _e}from"./jquery-Ctk02WAi.js";function Ce(oe,p){for(var l=0;l<p.length;l++){const H=p[l];if(typeof H!="string"&&!Array.isArray(H)){for(const re in H)if(re!=="default"&&!(re in oe)){const X=Object.getOwnPropertyDescriptor(H,re);X&&Object.defineProperty(oe,re,X.get?X:{enumerable:!0,get:()=>H[re]})}}}return Object.freeze(Object.defineProperty(oe,Symbol.toStringTag,{value:"Module"}))}var xe={exports:{}};/*!
 * bootstrap-fileinput v5.5.3
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2024, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD-3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */(function(oe){(function(p){p(_e())})(function(p){p.fn.fileinputLocales={},p.fn.fileinputThemes={},p.fn.fileinputBsVersion||(p.fn.fileinputBsVersion=window.bootstrap&&window.bootstrap.Alert&&window.bootstrap.Alert.VERSION||window.Alert&&window.Alert.VERSION||"3.x.x"),String.prototype.setTokens=function(e){var t=this.toString(),r,a;for(r in e)e.hasOwnProperty(r)&&(a=new RegExp("{"+r+"}","g"),t=t.replace(a,e[r]));return t},Array.prototype.flatMap||(Array.prototype.flatMap=function(e){return[].concat(this.map(e))});var l,H;l={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",INIT_FLAG:"init-",SCRIPT_SRC:document&&document.currentScript&&document.currentScript.src||null,OBJECT_PARAMS:`<param name="controller" value="true" />
<param name="allowFullScreen" value="true" />
<param name="allowScriptAccess" value="always" />
<param name="autoPlay" value="false" />
<param name="autoStart" value="false" />
<param name="quality" value="high" />
`,DEFAULT_PREVIEW:`<div class="file-preview-other">
<span class="{previewFileIconClass}">{previewFileIcon}</span>
</div>`,MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],logMessages:{ajaxError:"{status}: {error}. Error Details: {text}.",badDroppedFiles:"Error scanning dropped files!",badExifParser:"Error loading the piexif.js library. {details}",badInputType:'The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.',exifWarning:'To avoid this warning, either set "autoOrientImage" to "false" OR ensure you have loaded the "piexif.js" library correctly on your page before the "fileinput.js" script.',invalidChunkSize:'Invalid upload chunk size: "{chunkSize}". Resumable uploads are disabled.',invalidThumb:'Invalid thumb frame with id: "{id}".',noResumableSupport:"The browser does not support resumable or chunk uploads.",noUploadUrl:'The "uploadUrl" is not set. Ajax uploads and resumable uploads have been disabled.',retryStatus:"Retrying upload for chunk # {chunk} for {filename}... retry # {retry}.",chunkQueueError:"Could not push task to ajax pool for chunk index # {index}.",resumableMaxRetriesReached:"Maximum resumable ajax retries ({n}) reached.",resumableRetryError:"Could not retry the resumable request (try # {n})... aborting.",resumableAborting:"Aborting / cancelling the resumable request.",resumableRequestError:"Error processing resumable request. {msg}"},objUrl:window.URL||window.webkitURL,getZoomPlaceholder:function(){var e=l.SCRIPT_SRC,t,r="?kvTemp__2873389129__=";return e?(t=e.substring(0,e.lastIndexOf("/")),t.substring(0,t.lastIndexOf("/")+1)+"img/loading.gif"+r):r},defaultButtonCss:function(e){return"btn-default btn-"+(e?"":"outline-")+"secondary"},isBs:function(e){var t=l.trim((p.fn.fileinputBsVersion||"")+"");return e=parseInt(e,10),t?e===parseInt(t.charAt(0),10):e===4},isNumeric:function(e){return e===void 0?!1:!isNaN(parseFloat(e))&&isFinite(e)},trim:function(e){return e===void 0?"":e.toString().trim()},now:function(){return new Date().getTime()},round:function(e){return e=parseFloat(e),isNaN(e)?0:Math.floor(Math.round(e))},getArray:function(e){var t,r=[],a=e&&e.length||0;for(t=0;t<a;t++)r.push(e[t]);return r},getFileRelativePath:function(e){return String(e.newPath||e.relativePath||e.webkitRelativePath||l.getFileName(e)||null)},getFileId:function(e,t){var r=l.getFileRelativePath(e);return typeof t=="function"?t(e):!e||!r?null:e.size+"_"+encodeURIComponent(r).replace(/%/g,"_")},getFrameSelector:function(e,t){return t=t||"",'[id="'+e+'"]'+t},getZoomSelector:function(e,t){return l.getFrameSelector("zoom-"+e,t)},getFrameElement:function(e,t,r){return e.find(l.getFrameSelector(t,r))},getZoomElement:function(e,t,r){return e.find(l.getZoomSelector(t,r))},getElapsed:function(e){var t=e,r="",a={},n={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return l.getObjectKeys(n).forEach(function(s){a[s]=Math.floor(t/n[s]),t-=a[s]*n[s]}),p.each(a,function(s,o){o>0&&(r+=(r?" ":"")+o+s.substring(0,1))}),r},debounce:function(e,t){var r;return function(){var a=arguments,n=this;clearTimeout(r),r=setTimeout(function(){e.apply(n,a)},t)}},stopEvent:function(e){e.stopPropagation(),e.preventDefault()},getFileName:function(e){return e&&(e.fileName||e.name)||""},createObjectURL:function(e){return l.objUrl&&l.objUrl.createObjectURL&&e?l.objUrl.createObjectURL(e):""},revokeObjectURL:function(e){l.objUrl&&l.objUrl.revokeObjectURL&&e&&l.objUrl.revokeObjectURL(e)},compare:function(e,t,r){return e!==void 0&&(r?e===t:e.match(t))},isIE:function(e){var t,r;return navigator.appName!=="Microsoft Internet Explorer"?!1:e===10?new RegExp("msie\\s"+e,"i").test(navigator.userAgent):(t=document.createElement("div"),t.innerHTML="<!--[if IE "+e+"]> <i></i> <![endif]-->",r=t.getElementsByTagName("i").length,document.body.appendChild(t),t.parentNode.removeChild(t),r)},canOrientImage:function(e){var t=p(document.createElement("img")).css({width:"1px",height:"1px"}).insertAfter(e),r=t.css("image-orientation");return t.remove(),!!r},canAssignFilesToInput:function(){var e=document.createElement("input");try{return e.type="file",e.files=null,!0}catch{return!1}},getDragDropFolders:function(e){var t,r,a=e?e.length:0,n=0;if(a>0&&e[0].webkitGetAsEntry())for(t=0;t<a;t++)r=e[t].webkitGetAsEntry(),r&&r.isDirectory&&n++;return n},initModal:function(e){var t=p("body");t.length&&e.appendTo(t)},isFunction:function(e){return typeof e=="function"},isEmpty:function(e,t){return e==null||e===""?!0:l.isString(e)&&t?l.trim(e)==="":l.isArray(e)?e.length===0:!!(p.isPlainObject(e)&&p.isEmptyObject(e))},isArray:function(e){return Array.isArray(e)||Object.prototype.toString.call(e)==="[object Array]"},isString:function(e){return Object.prototype.toString.call(e)==="[object String]"},ifSet:function(e,t,r){return r=r||"",t&&typeof t=="object"&&e in t?t[e]:r},cleanArray:function(e){return e instanceof Array||(e=[]),e.filter(function(t){return t!=null})},spliceArray:function(e,t,r){var a,n=0,s=[],o;if(!(e instanceof Array))return[];for(o=p.extend(!0,[],e),r&&o.reverse(),a=0;a<o.length;a++)a!==t&&(s[n]=o[a],n++);return r&&s.reverse(),s},getNum:function(e,t){return t=t||0,typeof e=="number"?e:(typeof e=="string"&&(e=parseFloat(e)),isNaN(e)?t:e)},hasFileAPISupport:function(){return!!(window.File&&window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!l.isIE(9)&&(e.draggable!==void 0||e.ondragstart!==void 0&&e.ondrop!==void 0)},hasFileUploadSupport:function(){return l.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&!!new Blob}catch{return!1}},hasArrayBufferViewSupport:function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}},hasResumableUploadSupport:function(){return l.hasFileUploadSupport()&&l.hasBlobSupport()&&l.hasArrayBufferViewSupport()&&(!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!!Blob.prototype.slice||!1)},dataURI2Blob:function(e){var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=l.hasBlobSupport(),a,n,s,o,u,f,c=(r||t)&&window.atob&&window.ArrayBuffer&&window.Uint8Array;if(!c)return null;for(e.split(",")[0].indexOf("base64")>=0?a=atob(e.split(",")[1]):a=decodeURIComponent(e.split(",")[1]),n=new ArrayBuffer(a.length),s=new Uint8Array(n),o=0;o<a.length;o+=1)s[o]=a.charCodeAt(o);return u=e.split(",")[0].split(":")[1].split(";")[0],r?new Blob([l.hasArrayBufferViewSupport()?s:n],{type:u}):(f=new t,f.append(n),f.getBlob(u))},arrayBuffer2String:function(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);var t=Array.prototype.slice.apply(new Uint8Array(e)),r="",a=0,n,s,o,u;for(n=t.length;a<n;)switch(s=t[a++],s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(s);break;case 12:case 13:o=t[a++],r+=String.fromCharCode((s&31)<<6|o&63);break;case 14:o=t[a++],u=t[a++],r+=String.fromCharCode((s&15)<<12|(o&63)<<6|(u&63)<<0);break}return r},isHtml:function(e){var t=document.createElement("div");t.innerHTML=e;for(var r=t.childNodes,a=r.length;a--;)if(r[a].nodeType===1)return!0;return!1},isPdf:function(e){if(l.isEmpty(e)||(e=l.trim(e).replace(/\n/g," "),e.length===0))return!1},isSvg:function(e){return l.isEmpty(e)||(e=l.trim(e).replace(/\n/g," "),e.length===0)?!1:e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,t,r){var a=e||"";switch(a){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504e47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"41433130":return"image/vnd.dwg";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(a.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(a.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":r}}}},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(e,t,r){return l.isEmpty(e)||l.isEmpty(e[t])?r:p(e[t])},createElement:function(e,t){return t=t||"div",p(p.parseHTML("<"+t+">"+e+"</"+t+">"))},uniqId:function(){return(new Date().getTime()+Math.floor(Math.random()*Math.pow(10,15))).toString(36)},cspBuffer:{CSP_ATTRIB:"data-csp-01928735",domElementsStyles:{},stash:function(e){var t=this,r=p.parseHTML("<div>"+e+"</div>"),a=p(r);a.find("[style]").each(function(s,o){var u=p(o),f=u[0].style,c=l.uniqId(),d={};f&&f.length&&(p(f).each(function(){d[this]=f[this]}),t.domElementsStyles[c]=d,u.removeAttr("style").attr(t.CSP_ATTRIB,c))}),a.filter("*").removeAttr("style");var n=Object.values?Object.values(r):Object.keys(r).map(function(s){return r[s]});return n.flatMap(function(s){return s.innerHTML}).join("")},apply:function(e){var t=this,r=p(e);r.find("["+t.CSP_ATTRIB+"]").each(function(a,n){var s=p(n),o=s.attr(t.CSP_ATTRIB),u=t.domElementsStyles[o];u&&s.css(u),s.removeAttr(t.CSP_ATTRIB)}),t.domElementsStyles={}}},setHtml:function(e,t){var r=l.cspBuffer;return e.html(r.stash(t)),r.apply(e),e},htmlEncode:function(e,t){return e===void 0?t||null:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(e,t){var r=e;return t&&p.each(t,function(a,n){typeof n=="function"&&(n=n()),r=r.split(a).join(n)}),r},cleanMemory:function(e){var t=e.is("img")?e.attr("src"):e.find("source").attr("src");l.revokeObjectURL(t)},findFileName:function(e){var t=e.lastIndexOf("/");return t===-1&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var t=document,r=t.documentElement,a=l.checkFullScreen();r&&e&&!a?r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):a&&(t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen())},moveArray:function(e,t,r,a){var n=p.extend(!0,[],e);if(a&&n.reverse(),r>=n.length)for(var s=r-n.length;s--+1;)n.push(void 0);return n.splice(r,0,n.splice(t,1)[0]),a&&n.reverse(),n},closeButton:function(e){return e=(l.isBs(5)?"btn-close":"close")+(e?" "+e:""),'<button type="button" class="'+e+`" aria-label="Close">
`+(l.isBs(5)?"":`  <span aria-hidden="true">&times;</span>
`)+"</button>"},getRotation:function(e){switch(e){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(e,t){e&&(e.style.transform=t,e.style.webkitTransform=t,e.style["-moz-transform"]=t,e.style["-ms-transform"]=t,e.style["-o-transform"]=t)},getObjectKeys:function(e){var t=[];return e&&p.each(e,function(r){t.push(r)}),t},getObjectSize:function(e){return l.getObjectKeys(e).length},whenAll:function(e){var t=[].slice,r=arguments.length===1&&l.isArray(e)?e:t.call(arguments),a=p.Deferred(),n,s=0,o,u=r.length,f=u,c,d,m,h;for(c=d=m=Array(u),h=function(g,w,b){return function(){b!==r&&s++,a.notifyWith(w[g]=this,b[g]=t.call(arguments)),--f||a[(s?"reject":"resolve")+"With"](w,b)}},n=0;n<u;n++)(o=r[n])&&l.isFunction(o.promise)?o.promise().done(h(n,m,r)).fail(h(n,c,d)):(a.notifyWith(this,o),--f);return f||a.resolveWith(m,r),a.promise()}},H=function(e,t){var r=this;r.$element=p(e),r.$parent=r.$element.parent(),r._validate()&&(r.isPreviewable=l.hasFileAPISupport(),r.isIE9=l.isIE(9),r.isIE10=l.isIE(10),(r.isPreviewable||r.isIE9)&&(r._init(t),r._listen()),r.$element.removeClass("file-loading"))},H.prototype={constructor:H,_cleanup:function(){var e=this;e.reader=null,e.clearFileStack(),e.fileBatchCompleted=!0,e.isError=!1,e.isDuplicateError=!1,e.isPersistentError=!1,e.cancelling=!1,e.paused=!1,e.lastProgress=0,e._initAjax()},_isAborted:function(){var e=this;return e.cancelling||e.paused},_initAjax:function(){var e=this,t=e.taskManager={pool:{},addPool:function(r){return t.pool[r]=new t.TasksPool(r)},getPool:function(r){return t.pool[r]},addTask:function(r,a){return new t.Task(r,a)},TasksPool:function(r){var a=this;a.id=r,a.cancelled=!1,a.cancelledDeferrer=p.Deferred(),a.tasks={},a.addTask=function(n,s){return a.tasks[n]=new t.Task(n,s)},a.size=function(){return l.getObjectSize(a.tasks)},a.run=function(n){var s=0,o=!1,u,f=l.getObjectKeys(a.tasks).map(function(w){return a.tasks[w]}),c=[],d=p.Deferred(),m,h;if(a.cancelled)return a.cancelledDeferrer.resolve(),d.reject();if(!n){var g=l.getObjectKeys(a.tasks).map(function(w){return a.tasks[w].deferred});return l.whenAll(g).done(function(){var w=l.getArray(arguments);a.cancelled?(d.reject.apply(null,w),a.cancelledDeferrer.resolve()):(d.resolve.apply(null,w),a.cancelledDeferrer.reject())}).fail(function(){var w=l.getArray(arguments);d.reject.apply(null,w),a.cancelled?a.cancelledDeferrer.resolve():a.cancelledDeferrer.reject()}),p.each(a.tasks,function(w){u=a.tasks[w],u.run()}),d}for(m=function(w){p.when(w.deferred).fail(function(){o=!0,h.apply(null,arguments)}).always(h)},h=function(){var w=l.getArray(arguments);if(d.notify(w),c.push(w),a.cancelled){d.reject.apply(null,c),a.cancelledDeferrer.resolve();return}c.length===a.size()&&(o?d.reject.apply(null,c):d.resolve.apply(null,c)),f.length&&(u=f.shift(),m(u),u.run())};f.length&&s++<n;)u=f.shift(),m(u),u.run();return d},a.cancel=function(){return a.cancelled=!0,a.cancelledDeferrer}},Task:function(r,a){var n=this;n.id=r,n.deferred=p.Deferred(),n.logic=a,n.context=null,n.run=function(){var s=l.getArray(arguments);return s.unshift(n.deferred),a.apply(n.context,s),n.deferred},n.runWithContext=function(s){return n.context=s,n.run()}}};e.ajaxQueue=[],e.ajaxRequests=[],e.ajaxPool=null,e.ajaxAborted=!1},_init:function(e,t){var r=this,a,n=r.$element,s,o,u;r.options=e,r.zoomPlaceholder=l.getZoomPlaceholder(),r.canOrientImage=l.canOrientImage(n),p.each(e,function(f,c){switch(f){case"minFileCount":case"maxFileCount":case"maxTotalFileCount":case"minFileSize":case"maxFileSize":case"maxMultipleFileSize":case"maxFilePreviewSize":case"resizeQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":case"bytesToKB":r[f]=l.getNum(c);break;default:r[f]=c;break}}),(!r.bytesToKB||r.bytesToKB<=0)&&(r.bytesToKB=1024),r.errorCloseButton===void 0&&(r.errorCloseButton=l.closeButton("kv-error-close"+(l.isBs(5)?"  float-end":""))),r.maxTotalFileCount>0&&r.maxTotalFileCount<r.maxFileCount&&(r.maxTotalFileCount=r.maxFileCount),r.rtl&&(u=r.previewZoomButtonIcons.prev,r.previewZoomButtonIcons.prev=r.previewZoomButtonIcons.next,r.previewZoomButtonIcons.next=u),!isNaN(r.maxAjaxThreads)&&r.maxAjaxThreads<r.resumableUploadOptions.maxThreads&&(r.resumableUploadOptions.maxThreads=r.maxAjaxThreads),r._initFileManager(),typeof r.autoOrientImage=="function"&&(r.autoOrientImage=r.autoOrientImage()),typeof r.autoOrientImageInitial=="function"&&(r.autoOrientImageInitial=r.autoOrientImageInitial()),t||r._cleanup(),r.duplicateErrors=[],r.$form=n.closest("form"),r._initTemplateDefaults(),r.uploadFileAttr=l.isEmpty(n.attr("name"))?"file_data":n.attr("name"),o=r._getLayoutTemplate("progress"),r.progressTemplate=o.replace("{class}",r.progressClass),r.progressInfoTemplate=o.replace("{class}",r.progressInfoClass),r.progressPauseTemplate=o.replace("{class}",r.progressPauseClass),r.progressCompleteTemplate=o.replace("{class}",r.progressCompleteClass),r.progressErrorTemplate=o.replace("{class}",r.progressErrorClass),r.isDisabled=n.attr("disabled")||n.attr("readonly"),r.isDisabled&&n.attr("disabled",!0),r.isClickable=r.browseOnZoneClick&&r.showPreview&&(r.dropZoneEnabled||!l.isEmpty(r.defaultPreviewContent)),r.isAjaxUpload=l.hasFileUploadSupport()&&!l.isEmpty(r.uploadUrl),r.dropZoneEnabled=l.hasDragDropSupport()&&r.dropZoneEnabled,r.isAjaxUpload||(r.dropZoneEnabled=r.dropZoneEnabled&&l.canAssignFilesToInput()),r.slug=typeof e.slugCallback=="function"?e.slugCallback:r._slugDefault,r.mainTemplate=r.showCaption?r._getLayoutTemplate("main1"):r._getLayoutTemplate("main2"),r.captionTemplate=r._getLayoutTemplate("caption"),r.previewGenericTemplate=r._getPreviewTemplate("generic"),!r.imageCanvas&&r.resizeImage&&(r.maxImageWidth||r.maxImageHeight)&&(r.imageCanvas=document.createElement("canvas"),r.imageCanvasContext=r.imageCanvas.getContext("2d")),l.isEmpty(n.attr("id"))&&n.attr("id",l.uniqId()),r.namespace=".fileinput_"+n.attr("id").replace(/-/g,"_"),r.$container===void 0?r.$container=r._createContainer():r._refreshContainer(),s=r.$container,r.$dropZone=s.find(".file-drop-zone"),r.$progress=s.find(".kv-upload-progress"),r.$btnUpload=s.find(".fileinput-upload"),r.$captionContainer=l.getElement(e,"elCaptionContainer",s.find(".file-caption")),r.$caption=l.getElement(e,"elCaptionText",s.find(".file-caption-name")),l.isEmpty(r.msgPlaceholder)||(a=n.attr("multiple")?r.filePlural:r.fileSingle,r.$caption.attr("placeholder",r.msgPlaceholder.replace("{files}",a))),r.$captionIcon=r.$captionContainer.find(".file-caption-icon"),r.$previewContainer=l.getElement(e,"elPreviewContainer",s.find(".file-preview")),r.$preview=l.getElement(e,"elPreviewImage",s.find(".file-preview-thumbnails")),r.$previewStatus=l.getElement(e,"elPreviewStatus",s.find(".file-preview-status")),r.$errorContainer=l.getElement(e,"elErrorContainer",r.$previewContainer.find(".kv-fileinput-error")),r._validateDisabled(),l.isEmpty(r.msgErrorClass)||l.addCss(r.$errorContainer,r.msgErrorClass),t?r._errorsExist()||r.$errorContainer.hide():(r._resetErrors(),r.$errorContainer.hide(),r.previewInitId="thumb-"+n.attr("id"),r._initPreviewCache(),r._initPreview(!0),r._initPreviewActions(),r.$parent.hasClass("file-loading")&&(r.$container.insertBefore(r.$parent),r.$parent.remove())),r._setFileDropZoneTitle(),n.attr("disabled")&&r.disable(),r._initZoom(),r.hideThumbnailContent&&l.addCss(r.$preview,"hide-content")},_initFileManager:function(){var e=this;e.uploadStartTime=l.now(),e.fileManager={stack:{},filesProcessed:[],errors:[],loadedImages:{},totalImages:0,totalFiles:null,totalSize:null,uploadedSize:0,stats:{},bpsLog:[],bps:0,initStats:function(t){var r={started:l.now()};t?e.fileManager.stats[t]=r:e.fileManager.stats=r},getUploadStats:function(t,r,a){var n=e.fileManager,s=t?n.stats[t]&&n.stats[t].started||l.now():e.uploadStartTime,o=(l.now()-s)/1e3,u=Math.ceil(o?r/o:0),f=a-r,c,d=n.bpsLog.length?e.bitrateUpdateDelay:0;return setTimeout(function(){var m,h=0,g=0,w,b;for(n.bpsLog.push(u),n.bpsLog.sort(function(v,x){return v-x}),w=n.bpsLog.length,b=w>10?w-10:Math.ceil(w/2),m=w;m>b;m--)g=parseFloat(n.bpsLog[m]),h++;n.bps=(h>0?g/h:0)*64},d),c={fileId:t,started:s,elapsed:o,loaded:r,total:a,bps:n.bps,bitrate:e._getSize(n.bps,!1,e.bitRateUnits),pendingBytes:f},t?n.stats[t]=c:n.stats=c,c},exists:function(t){return p.inArray(t,e.fileManager.getIdList())!==-1},count:function(){return e.fileManager.getIdList().length},total:function(){var t=e.fileManager;return t.totalFiles||(t.totalFiles=t.count()),t.totalFiles},getTotalSize:function(){var t=e.fileManager;return t.totalSize||(t.totalSize=0,p.each(e.getFileStack(),function(r,a){var n=parseFloat(a.size);t.totalSize+=isNaN(n)?0:n})),t.totalSize},add:function(t,r){r||(r=e.fileManager.getId(t)),r&&(e.fileManager.stack[r]={file:t,name:l.getFileName(t),relativePath:l.getFileRelativePath(t),size:t.size,nameFmt:e._getFileName(t,""),sizeFmt:e._getSize(t.size)})},remove:function(t){var r=e._getThumbFileId(t);e.fileManager.removeFile(r)},removeFile:function(t){var r=e.fileManager;t&&(delete r.stack[t],delete r.loadedImages[t])},move:function(t,r){var a={},n=e.fileManager.stack;!t&&!r||t===r||(p.each(n,function(s,o){s!==t&&(a[s]=o),s===r&&(a[t]=n[t])}),e.fileManager.stack=a)},list:function(){var t=[];return p.each(e.getFileStack(),function(r,a){a&&a.file&&t.push(a.file)}),t},isPending:function(t){return p.inArray(t,e.fileManager.filesProcessed)===-1&&e.fileManager.exists(t)},isProcessed:function(){var t=!0,r=e.fileManager;return p.each(e.getFileStack(),function(a){r.isPending(a)&&(t=!1)}),t},clear:function(){var t=e.fileManager;e.isDuplicateError=!1,e.isPersistentError=!1,t.totalFiles=null,t.totalSize=null,t.uploadedSize=0,t.stack={},t.errors=[],t.filesProcessed=[],t.stats={},t.bpsLog=[],t.bps=0,t.clearImages()},clearImages:function(){e.fileManager.loadedImages={},e.fileManager.totalImages=0},addImage:function(t,r){e.fileManager.loadedImages[t]=r},removeImage:function(t){delete e.fileManager.loadedImages[t]},getImageIdList:function(){return l.getObjectKeys(e.fileManager.loadedImages)},getImageCount:function(){return e.fileManager.getImageIdList().length},getId:function(t){return e._getFileId(t)},getIndex:function(t){return e.fileManager.getIdList().indexOf(t)},getThumb:function(t){var r=null;return e._getThumbs().each(function(){var a=p(this);e._getThumbFileId(a)===t&&(r=a)}),r},getThumbIndex:function(t){var r=e._getThumbFileId(t);return e.fileManager.getIndex(r)},getIdList:function(){return l.getObjectKeys(e.fileManager.stack)},getFile:function(t){return e.fileManager.stack[t]||null},getFileName:function(t,r){var a=e.fileManager.getFile(t);return a?r?a.nameFmt||"":a.name||"":""},getFirstFile:function(){var t=e.fileManager.getIdList(),r=t&&t.length?t[0]:null;return e.fileManager.getFile(r)},setFile:function(t,r){e.fileManager.getFile(t)?e.fileManager.stack[t].file=r:e.fileManager.add(r,t)},setProcessed:function(t){e.fileManager.filesProcessed.push(t)},getProgress:function(){var t=e.fileManager.total(),r=e.fileManager.filesProcessed.length;return t?Math.ceil(r/t*100):0},setProgress:function(t,r){var a=e.fileManager.getFile(t);!isNaN(r)&&a&&(a.progress=r)}}},_setUploadData:function(e,t){var r=this;p.each(t,function(a,n){var s=r.uploadParamNames[a]||a;l.isArray(n)?e.append(s,n[0],n[1]):e.append(s,n)})},_initResumableUpload:function(){var e=this,t=e.resumableUploadOptions,r=l.logMessages,a,n=e.fileManager;if(e.enableResumableUpload){if(t.fallback!==!1&&typeof t.fallback!="function"&&(t.fallback=function(s){s._log(r.noResumableSupport),s.enableResumableUpload=!1}),!l.hasResumableUploadSupport()&&t.fallback!==!1){t.fallback(e);return}if(!e.uploadUrl&&e.enableResumableUpload){e._log(r.noUploadUrl),e.enableResumableUpload=!1;return}if(t.chunkSize=parseFloat(t.chunkSize),t.chunkSize<=0||isNaN(t.chunkSize)){e._log(r.invalidChunkSize,{chunkSize:t.chunkSize}),e.enableResumableUpload=!1;return}a=e.resumableManager={init:function(s,o,u){a.logs=[],a.stack=[],a.error="",a.id=s,a.file=o.file,a.fileName=o.name,a.fileIndex=u,a.completed=!1,a.lastProgress=0,e.showPreview&&(a.$thumb=n.getThumb(s)||null,a.$progress=a.$btnDelete=null,a.$thumb&&a.$thumb.length&&(a.$progress=a.$thumb.find(".file-thumb-progress"),a.$btnDelete=a.$thumb.find(".kv-file-remove"))),a.chunkSize=t.chunkSize*e.bytesToKB,a.chunkCount=a.getTotalChunks()},setAjaxError:function(s,o,u,f){s.responseJSON&&s.responseJSON.error&&(u=s.responseJSON.error.toString()),f||(a.error=u),t.showErrorLog&&e._log(r.ajaxError,{status:s.status,error:u,text:s.responseText||""})},reset:function(){a.stack=[],a.chunksProcessed={}},setProcessed:function(s){var o=a.id,u,f=a.$thumb,c=a.$progress,d=f&&f.length,m={id:d?f.attr("id"):"",index:n.getIndex(o),fileId:o},h,g=e.resumableUploadOptions.skipErrorsAndProceed;a.completed=!0,a.lastProgress=0,d&&f.removeClass("file-uploading"),s==="success"?(n.uploadedSize+=a.file.size,e.showPreview&&(e._setProgress(101,c),e._setThumbStatus(f,"Success"),e._initUploadSuccess(a.chunksProcessed[o].data,f)),n.removeFile(o),delete a.chunksProcessed[o],e._raise("fileuploaded",[m.id,m.index,m.fileId]),n.isProcessed()&&e._setProgress(101)):s!=="cancel"&&(e.showPreview&&(e._setThumbStatus(f,"Error"),e._setPreviewError(f,!0),e._setProgress(101,c,e.msgProgressError),e._setProgress(101,e.$progress,e.msgProgressError),e.cancelling=!g),e.$errorContainer.find('li[data-file-id="'+m.fileId+'"]').length||(h={file:a.fileName,max:t.maxRetries,error:a.error},u=e.msgResumableUploadRetriesExceeded.setTokens(h),p.extend(m,h),e._showFileError(u,m,"filemaxretries"),g&&(n.removeFile(o),delete a.chunksProcessed[o],n.isProcessed()&&e._setProgress(101)))),n.isProcessed()&&a.reset()},check:function(){p.each(a.logs,function(s,o){if(!o)return!1})},processedResumables:function(){var s=a.logs,o,u=0;if(!s||!s.length)return 0;for(o=0;o<s.length;o++)s[o]===!0&&u++;return u},getUploadedSize:function(){var s=a.processedResumables()*a.chunkSize;return s>a.file.size?a.file.size:s},getTotalChunks:function(){var s=parseFloat(a.chunkSize);return!isNaN(s)&&s>0?Math.ceil(a.file.size/s):0},getProgress:function(){var s=a.processedResumables(),o=a.chunkCount;return o===0?0:Math.ceil(s/o*100)},checkAborted:function(s){e._isAborted()&&(clearInterval(s),e.unlock())},upload:function(){var s=n.getIdList(),o="new",u;u=setInterval(function(){var f;if(a.checkAborted(u),o==="new"&&(e.lock(),o="processing",f=s.shift(),n.initStats(f),n.stack[f]&&(a.init(f,n.stack[f],n.getIndex(f)),a.processUpload())),!n.isPending(f)&&a.completed&&(o="new"),n.isProcessed()){var c=e.$preview.find(".file-preview-initial");c.length&&(l.addCss(c,l.SORT_CSS),e._initSortable()),clearInterval(u),e._clearFileInput(),e.unlock(),setTimeout(function(){var d=e.previewCache.data;d&&(e.initialPreview=d.content,e.initialPreviewConfig=d.config,e.initialPreviewThumbTags=d.tags),e._raise("filebatchuploadcomplete",[e.initialPreview,e.initialPreviewConfig,e.initialPreviewThumbTags,e._getExtraData()])},e.processDelay)}},e.processDelay)},uploadResumable:function(){var s,o,u=e.taskManager,f=a.chunkCount;for(o=u.addPool(a.id),s=0;s<f;s++)a.logs[s]=!!(a.chunksProcessed[a.id]&&a.chunksProcessed[a.id][s]),a.logs[s]||a.pushAjax(s,0);o.run(t.maxThreads).done(function(){a.setProcessed("success")}).fail(function(){a.setProcessed(o.cancelled?"cancel":"error")})},processUpload:function(){var s,o,u=a.id,f,c,d,m,h;if(!t.testUrl){a.uploadResumable();return}s=new FormData,o=n.stack[u],e._setUploadData(s,{fileId:u,fileName:o.fileName,fileSize:o.size,fileRelativePath:o.relativePath,chunkSize:a.chunkSize,chunkCount:a.chunkCount}),f=function(g){h=e._getOutData(s,g),e._raise("filetestbeforesend",[u,n,a,h])},c=function(g,w,b){h=e._getOutData(s,b,g);var v=e.uploadParamNames,x=v.chunksUploaded||"chunksUploaded",C=[u,n,a,h];!g[x]||!l.isArray(g[x])?e._raise("filetesterror",C):(a.chunksProcessed[u]||(a.chunksProcessed[u]={}),p.each(g[x],function(F,_){a.logs[_]=!0,a.chunksProcessed[u][_]=!0}),a.chunksProcessed[u].data=g,e._raise("filetestsuccess",C)),a.uploadResumable()},d=function(g,w,b){h=e._getOutData(s,g),e._raise("filetestajaxerror",[u,n,a,h]),a.setAjaxError(g,w,b,!0),a.uploadResumable()},m=function(){e._raise("filetestcomplete",[u,n,a,e._getOutData(s)])},e._ajaxSubmit(f,c,m,d,s,u,a.fileIndex,t.testUrl)},pushAjax:function(s,o){var u=e.taskManager,f=u.getPool(a.id);f.addTask(f.size()+1,function(c){var d=a.stack.shift(),m;m=d[0],!a.chunksProcessed[a.id]||!a.chunksProcessed[a.id][m]?a.sendAjax(m,d[1],c):e._log(r.chunkQueueError,{index:m})}),a.stack.push([s,o])},sendAjax:function(s,o,u){var f,c=a.chunkSize,d=a.id,m=a.file,h=a.$thumb,g=l.logMessages,w=a.$btnDelete,b=function(y,A){A&&(y=y.setTokens(A)),y=g.resumableRequestError.setTokens({msg:y}),e._log(y),u.reject(y)};if(!(a.chunksProcessed[d]&&a.chunksProcessed[d][s])){if(o>t.maxRetries){b(g.resumableMaxRetriesReached,{n:t.maxRetries}),a.setProcessed("error");return}var v,x,C,F,_,P,T=m.slice?"slice":m.mozSlice?"mozSlice":m.webkitSlice?"webkitSlice":"slice",I=m[T](c*s,c*(s+1));v=new FormData,f=n.stack[d],e._setUploadData(v,{chunkCount:a.chunkCount,chunkIndex:s,chunkSize:c,chunkSizeStart:c*s,fileBlob:[I,a.fileName],fileId:d,fileName:a.fileName,fileRelativePath:f.relativePath,fileSize:m.size,retryCount:o}),a.$progress&&a.$progress.length&&a.$progress.show(),C=function(y){x=e._getOutData(v,y),e.showPreview&&(h.hasClass("file-preview-success")||(e._setThumbStatus(h,"Loading"),l.addCss(h,"file-uploading")),w.attr("disabled",!0)),e._raise("filechunkbeforesend",[d,s,o,n,a,x])},F=function(y,A,k){if(e._isAborted()){b(g.resumableAborting);return}x=e._getOutData(v,k,y);var S=e.uploadParamNames,D=S.chunkIndex||"chunkIndex",E=[d,s,o,n,a,x];y.error?(t.showErrorLog&&e._log(r.retryStatus,{retry:o+1,filename:a.fileName,chunk:s}),e._raise("filechunkerror",E),a.pushAjax(s,o+1),a.error=y.error,b(y.error)):(a.logs[y[D]]=!0,a.chunksProcessed[d]||(a.chunksProcessed[d]={}),a.chunksProcessed[d][y[D]]=!0,a.chunksProcessed[d].data=y,u.resolve.call(null,y),e._raise("filechunksuccess",E),a.check())},_=function(y,A,k){if(e._isAborted()){b(g.resumableAborting);return}x=e._getOutData(v,y),a.setAjaxError(y,A,k),e._raise("filechunkajaxerror",[d,s,o,n,a,x]),a.pushAjax(s,o+1),b(g.resumableRetryError,{n:o-1})},P=function(){e._isAborted()||e._raise("filechunkcomplete",[d,s,o,n,a,e._getOutData(v)])},e._ajaxSubmit(C,F,P,_,v,d,a.fileIndex)}}},a.reset()}},_initTemplateDefaults:function(){var e=this,t,r,a,n,s,o,u,f,c,d,m,h,g,w,b,v,x,C,F,_,P,T,I,y,A,k,S,D,E,$,j,B,z,ee,K,G,Z,O,L,N,te,q,V,J,Y=function(M,U){return'<object class="kv-preview-data file-preview-'+M+'" title="{caption}" data="{data}" type="'+U+'"'+O+`>
`+l.DEFAULT_PREVIEW+`
</object>
`},Q="btn btn-sm btn-kv "+l.defaultButtonCss();t=`{preview}
<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>
<div class="file-caption {class}">
  <div class="input-group {inputGroupClass}">
      {caption}
<span class="file-caption-icon"></span>
`+(l.isBs(5)?"":`<div class="input-group-btn input-group-append">
`)+`      {remove}
      {cancel}
      {pause}
      {upload}
      {browse}
`+(l.isBs(5)?"":`    </div>
`)+"  </div>",r=`{preview}
<div class="kv-upload-progress kv-hidden"></div>
<div class="clearfix"></div>
<span class="{class}">{remove}
{cancel}
{upload}
{browse}
</span>`,a=`<div class="file-preview {class}">
  {close}  <div class="{dropClass} clearfix">
    <div class="file-preview-thumbnails clearfix">
    </div>
    <div class="file-preview-status text-center text-success"></div>
    <div class="kv-fileinput-error"></div>
  </div>
</div>`,s=l.closeButton("fileinput-remove"),n='<i class="bi-file-earmark-arrow-up"></i>',o=`<input readonly class="file-caption-name form-control {class}">
`,u='<button type="{type}" title="{title}" class="{css}" {status} {tabIndexConfig}>{icon} {label}</button>',f='<a href="{href}" title="{title}" class="{css}" {status} {tabIndexConfig}>{icon} {label}</a>',c='<div class="{css}" {status} {tabIndexConfig}>{icon} {label}</div>',V=l.MODAL_ID+"Label",d='<div id="'+l.MODAL_ID+'" class="file-zoom-dialog modal fade" aria-labelledby="'+V+'" {tabIndexConfig}></div>',m=`<div class="modal-dialog modal-lg{rtl}" role="document">
  <div class="modal-content">
    <div class="modal-header kv-zoom-header">
      <h6 class="modal-title kv-zoom-title" id="`+V+`"><span class="kv-zoom-caption"></span> <span class="kv-zoom-size"></span></h6>
      <div class="kv-zoom-actions">{rotate}{toggleheader}{fullscreen}{borderless}{close}</div>
    </div>
    <div class="floating-buttons"></div>
    <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>
{prev} {next}
    <div class="kv-zoom-description"></div>
  </div>
</div>
`,J='<button type="button" class="kv-desc-hide" aria-label="Close">{closeIcon}</button>',h=`<div class="progress">
    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">
        {status}
     </div>
</div>{stats}`,q='<div class="text-primary file-upload-stats"><span class="pending-time">{pendingTime}</span> <span class="upload-speed">{uploadSpeed}</span></div>',g=" <samp>({sizeText})</samp>",w=`<div class="file-thumbnail-footer">
    <div class="file-footer-caption" title="{caption}">
        <div class="file-caption-info">{caption}</div>
        <div class="file-size-info">{size}</div>
    </div>
    {progress}
{indicator}
{actions}
</div>`,b=`<div class="file-actions">
    <div class="file-footer-buttons">
        {rotate} {download} {upload} {delete} {zoom} {other}    </div>
</div>
{drag}
<div class="clearfix"></div>`,v=`<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>
`,x='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',te='<button type="button" class="kv-file-rotate {rotateClass}" title="{rotateTitle}">{rotateIcon}</button>',C='<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',F='<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',_='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',P='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',T='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-fileid="{fileid}" data-filename="{filename}" data-template="{template}" data-zoom="{zoomData}"',I=T+`><div class="kv-file-content">
`,y=T+` title="{caption}"><div class="kv-file-content">
`,A=`</div>{footer}
{zoomCache}</div>
`,k=`{content}
`,O=" {style}",S=Y("html","text/html"),E=Y("text","text/plain;charset=UTF-8"),G=Y("pdf","application/pdf"),D='<img src="{data}" class="file-preview-image kv-preview-data" title="{title}" alt="{alt}"'+O+`>
`,$='<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}"'+O+"></iframe>",j='<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true"'+O+"></iframe>",B='<video class="kv-preview-data file-preview-video" controls'+O+`>
<source src="{data}" type="{type}">
`+l.DEFAULT_PREVIEW+`
</video>
`,z='<!--suppress ALL --><audio class="kv-preview-data file-preview-audio" controls'+O+`>
<source src="{data}" type="{type}">
`+l.DEFAULT_PREVIEW+`
</audio>
`,ee='<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash"'+O+`>
`,K='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}"'+O+`>
<param name="movie" value="{caption}" />
`+l.OBJECT_PARAMS+" "+l.DEFAULT_PREVIEW+`
</object>
`,Z='<div class="kv-preview-data file-preview-other-frame"'+O+`>
`+l.DEFAULT_PREVIEW+`
</div>
`,L='<div class="kv-zoom-cache">{zoomContent}</div>',N={width:"100%",height:"100%","min-height":"480px"},e._isPdfRendered()&&(G=e.pdfRendererTemplate.replace("{renderer}",e._encodeURI(e.pdfRendererUrl))),e.defaults={layoutTemplates:{main1:t,main2:r,preview:a,close:s,fileIcon:n,caption:o,modalMain:d,modal:m,descriptionClose:J,progress:h,stats:q,size:g,footer:w,indicator:P,actions:b,actionDelete:v,actionRotate:te,actionUpload:x,actionDownload:C,actionZoom:F,actionDrag:_,btnDefault:u,btnLink:f,btnBrowse:c,zoomCache:L},previewMarkupTags:{tagBefore1:I,tagBefore2:y,tagAfter:A},previewContentTemplates:{generic:k,html:S,image:D,text:E,office:$,gdocs:j,video:B,audio:z,flash:ee,object:K,pdf:G,other:Z},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px",position:"relative"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:N,text:N,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:N,other:{width:"auto",height:"100%","min-height":"480px"}},mimeTypeAliases:{"video/quicktime":"video/mp4"},fileTypeSettings:{image:function(M,U){return l.compare(M,"image.*")&&!l.compare(M,/(tiff?|wmf)$/i)||l.compare(U,/\.(gif|png|jpe?g)$/i)},html:function(M,U){return l.compare(M,"text/html")||l.compare(U,/\.(htm|html)$/i)},office:function(M,U){return l.compare(M,/(word|excel|powerpoint|office)$/i)||l.compare(U,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(M,U){return l.compare(M,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||l.compare(U,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(M,U){return l.compare(M,"text.*")||l.compare(U,/\.(xml|javascript)$/i)||l.compare(U,/\.(txt|md|nfo|ini|json|php|js|css)$/i)},video:function(M,U){return l.compare(M,"video.*")&&(l.compare(M,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||l.compare(U,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(M,U){return l.compare(M,"audio.*")&&(l.compare(U,/(ogg|mp3|mp?g|wav)$/i)||l.compare(U,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(M,U){return l.compare(M,"application/x-shockwave-flash",!0)||l.compare(U,/\.(swf)$/i)},pdf:function(M,U){return l.compare(M,"application/pdf",!0)||l.compare(U,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,showRotate:!0,removeIcon:'<i class="bi-trash"></i>',removeClass:Q,removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="bi-upload"></i>',uploadClass:Q,uploadTitle:"Upload file",uploadRetryIcon:'<i class="bi-cloud-arrow-up-fill"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="bi-download"></i>',downloadClass:Q,downloadTitle:"Download file",rotateIcon:'<i class="bi-arrow-clockwise"></i>',rotateClass:Q,rotateTitle:"Rotate 90 deg. clockwise",zoomIcon:'<i class="bi-zoom-in"></i>',zoomClass:Q,zoomTitle:"View Details",dragIcon:'<i class="bi-arrows-move"></i>',dragClass:"text-primary",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="bi-plus-lg text-warning"></i>',indicatorSuccess:'<i class="bi-check-lg text-success"></i>',indicatorError:'<i class="bi-exclamation-lg text-danger"></i>',indicatorLoading:'<i class="bi-hourglass-bottom text-muted"></i>',indicatorPaused:'<i class="bi-pause-fill text-primary"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading &hellip;",indicatorPausedTitle:"Upload Paused"}},p.each(e.defaults,function(M,U){if(M==="allowedPreviewTypes"){e.allowedPreviewTypes===void 0&&(e.allowedPreviewTypes=U);return}e[M]=p.extend(!0,{},U,e[M])}),e._initPreviewTemplates()},_initPreviewTemplates:function(){var e=this,t=e.previewMarkupTags,r,a=t.tagAfter;p.each(e.previewContentTemplates,function(n,s){l.isEmpty(e.previewTemplates[n])&&(r=t.tagBefore2,(n==="generic"||n==="image")&&(r=t.tagBefore1),e._isPdfRendered()&&n==="pdf"&&(r=r.replace("kv-file-content","kv-file-content kv-pdf-rendered")),e.previewTemplates[n]=r+s+a)})},_initPreviewCache:function(){var e=this;e.previewCache={data:{},init:function(){var t=e.initialPreview;t.length>0&&!l.isArray(t)&&(t=t.split(e.initialPreviewDelimiter)),e.previewCache.data={content:t,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}},count:function(t){if(!e.previewCache.data||!e.previewCache.data.content)return 0;if(t){var r=e.previewCache.data.content.filter(function(a){return a!==null});return r.length}return e.previewCache.data.content.length},get:function(t,r){var a=l.INIT_FLAG+t,n=e.previewCache.data,s=n.config[t],o=n.content[t],u,f,c,d,m,h,g,w=l.ifSet("previewAsData",s,e.initialPreviewAsData),b=s?{title:s.title||null,alt:s.alt||null}:{title:null,alt:null},v=function(x,C,F,_,P,T,I,y){var A=" file-preview-initial "+l.SORT_CSS+(I?" "+I:""),k=e.previewInitId+"-"+T,S=s&&s.fileId||k;return e._generatePreviewTemplate(x,C,F,_,k,S,!1,null,null,A,P,T,y,b,s&&s.zoomData||C)};return!o||!o.length?"":(r=r===void 0?!0:r,c=l.ifSet("type",s,e.initialPreviewFileType||"generic"),m=l.ifSet("filename",s,l.ifSet("caption",s)),h=l.ifSet("filetype",s,c),d=e.previewCache.footer(t,r,s&&s.size||null),g=l.ifSet("frameClass",s),w?u=v(c,o,m,h,d,a,g):u=v("generic",o,m,h,d,a,g,c).setTokens({content:n.content[t]}),n.tags.length&&n.tags[t]&&(u=l.replaceTags(u,n.tags[t])),!l.isEmpty(s)&&!l.isEmpty(s.frameAttr)&&(f=l.createElement(u),f.find(".file-preview-initial").attr(s.frameAttr),u=f.html(),f.remove()),u)},clean:function(t){t.content=l.cleanArray(t.content),t.config=l.cleanArray(t.config),t.tags=l.cleanArray(t.tags),e.previewCache.data=t},add:function(t,r,a,n){var s=e.previewCache.data,o;return!t||!t.length?0:(o=t.length-1,l.isArray(t)||(t=t.split(e.initialPreviewDelimiter)),n&&s.content?(o=s.content.push(t[0])-1,s.config[o]=r,s.tags[o]=a):(s.content=t,s.config=r,s.tags=a),e.previewCache.clean(s),o)},set:function(t,r,a,n){var s=e.previewCache.data,o,u;if(!(!t||!t.length)&&(l.isArray(t)||(t=t.split(e.initialPreviewDelimiter)),u=t.filter(function(f){return f!==null}),!!u.length)){if(s.content===void 0&&(s.content=[]),s.config===void 0&&(s.config=[]),s.tags===void 0&&(s.tags=[]),n){for(o=0;o<t.length;o++)t[o]&&s.content.push(t[o]);for(o=0;o<r.length;o++)r[o]&&s.config.push(r[o]);for(o=0;o<a.length;o++)a[o]&&s.tags.push(a[o])}else s.content=t,s.config=r,s.tags=a;e.previewCache.clean(s)}},unset:function(t){var r=e.previewCache.count(),a=e.reversePreviewOrder;if(r){if(r===1){e.previewCache.data.content=[],e.previewCache.data.config=[],e.previewCache.data.tags=[],e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[];return}e.previewCache.data.content=l.spliceArray(e.previewCache.data.content,t,a),e.previewCache.data.config=l.spliceArray(e.previewCache.data.config,t,a),e.previewCache.data.tags=l.spliceArray(e.previewCache.data.tags,t,a);var n=p.extend(!0,{},e.previewCache.data);e.previewCache.clean(n)}},out:function(){var t="",r,a=e.previewCache.count(),n,s;if(a===0)return{content:"",caption:""};for(n=0;n<a;n++)s=e.previewCache.get(n),t=e.reversePreviewOrder?s+t:t+s;return r=e._getMsgSelected(a),{content:t,caption:r}},footer:function(t,r,a){var n=e.previewCache.data||{};if(l.isEmpty(n.content))return"";(l.isEmpty(n.config)||l.isEmpty(n.config[t]))&&(n.config[t]={}),r=r===void 0?!0:r;var s=n.config[t],o=l.ifSet("caption",s),u,f=l.ifSet("width",s,"auto"),c=l.ifSet("url",s,!1),d=l.ifSet("key",s,null),m=l.ifSet("fileId",s,null),h=e.fileActionSettings,g=e.initialPreviewShowDelete||!1,w=e.initialPreviewDownloadUrl?e.initialPreviewDownloadUrl+"?key="+d+(m?"&fileId="+m:""):"",b=s.downloadUrl||w,v=s.filename||s.caption||"",x=!!b,C=l.ifSet("showRemove",s,g),F=l.ifSet("showRotate",s,l.ifSet("showRotate",h,!0)),_=l.ifSet("showDownload",s,l.ifSet("showDownload",h,x)),P=l.ifSet("showZoom",s,l.ifSet("showZoom",h,!0)),T=l.ifSet("showDrag",s,l.ifSet("showDrag",h,!0)),I=c===!1&&r;return _=_&&s.downloadUrl!==!1&&!!b,u=e._renderFileActions(s,!1,_,C,F,P,T,I,c,d,!0,b,v),e._getLayoutTemplate("footer").setTokens({progress:e._renderThumbProgress(),actions:u,caption:o,size:e._getSize(a),width:f,indicator:""})}},e.previewCache.init()},_isPdfRendered:function(){var e=this,t=e.usePdfRenderer,r=typeof t=="function"?t():!!t;return r&&e.pdfRendererUrl},_handler:function(e,t,r){var a=this,n=a.namespace,s=t.split(" ").join(n+" ")+n;!e||!e.length||e.off(s).on(s,r)},_encodeURI:function(e){var t=this;return t.encodeUrl?encodeURI(e):e},_log:function(e,t){var r=this,a=r.$element.attr("id");r.showConsoleLogs&&(a&&(e='"'+a+'": '+e),e="bootstrap-fileinput: "+e,typeof t=="object"&&(e=e.setTokens(t)),window.console&&typeof window.console.log<"u"?window.console.log(e):window.alert(e))},_validate:function(){var e=this,t=e.$element.attr("type")==="file";return t||e._log(l.logMessages.badInputType),t},_errorsExist:function(){var e=this,t,r=e.$errorContainer.find("li");return r.length?!0:(t=l.createElement(e.$errorContainer.html()),t.find(".kv-error-close").remove(),t.find("ul").remove(),!!l.trim(t.text()).length)},_errorHandler:function(e,t){var r=this,a=e.target.error,n=function(s){r._showError(s.replace("{name}",t))};a.code===a.NOT_FOUND_ERR?n(r.msgFileNotFound):a.code===a.SECURITY_ERR?n(r.msgFileSecured):a.code===a.NOT_READABLE_ERR?n(r.msgFileNotReadable):a.code===a.ABORT_ERR?n(r.msgFilePreviewAborted):n(r.msgFilePreviewError)},_addError:function(e){var t=this,r=t.$errorContainer;e&&r.length&&(l.setHtml(r,t.errorCloseButton+e),t._handler(r.find(".kv-error-close"),"click",function(){setTimeout(function(){t.showPreview&&!t.getFrames().length&&t.clear(),r.fadeOut("slow")},t.processDelay)}))},_setValidationError:function(e){var t=this;e=(e?e+" ":"")+"has-error",t.$container.removeClass(e).addClass("has-error"),l.addCss(t.$caption,"is-invalid")},_resetErrors:function(e){var t=this,r=t.$errorContainer,a=t.resumableUploadOptions.retainErrorHistory;t.isPersistentError||t.enableResumableUpload&&a&&!t.clearInput||(t.clearInput=!1,t.isError=!1,t.$container.removeClass("has-error"),t.$caption.removeClass("is-invalid is-valid file-processing"),r.html(""),e?r.fadeOut("slow"):r.hide())},_showFolderError:function(e){var t=this,r=t.$errorContainer,a;e&&(t.isAjaxUpload||t._clearFileInput(),a=t.msgFoldersNotAllowed.replace("{n}",e),t._addError(a),t._setValidationError(),r.fadeIn(t.fadeDelay),t._raise("filefoldererror",[e,a]))},showUserError:function(e,t,r){var a=this,n;a.uploadInitiated&&(!t||!t.fileId?r||a.$errorContainer.html(""):(r||a.$errorContainer.find('[data-file-id="'+t.fileId+'"]').remove(),n=a.fileManager.getFileName(t.fileId),n&&(e="<b>"+n+":</b> "+e)),a._showFileError(e,t,"fileusererror"))},_showFileError:function(e,t,r){var a=this,n=a.$errorContainer,s=r||"fileuploaderror",o=t&&t.fileId||"",u=t&&t.id?'<li data-thumb-id="'+t.id+'" data-file-id="'+o+'">'+e+"</li>":"<li>"+e+"</li>";return n.find("ul").length===0?a._addError("<ul>"+u+"</ul>"):n.find("ul").append(u),n.fadeIn(a.fadeDelay),a._raise(s,[t,e]),a._setValidationError("file-input-new"),!0},_showError:function(e,t,r){var a=this,n=a.$errorContainer,s=r||"fileerror";return t=t||{},t.reader=a.reader,a._addError(e),n.fadeIn(a.fadeDelay),a._raise(s,[t,e]),a.isAjaxUpload||a._clearFileInput(),a._setValidationError("file-input-new"),a.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this,r=t.minFileCount>1?t.filePlural:t.fileSingle,a=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",r),n=t.$errorContainer;a="<li>"+a+"</li>",n.find("ul").length===0?t._addError("<ul>"+a+"</ul>"):n.find("ul").append(a),t.isError=!0,t._updateFileDetails(0),n.fadeIn(t.fadeDelay),t._raise("fileerror",[e,a]),t._clearFileInput(),t._setValidationError()},_parseError:function(e,t,r,a){var n=this,s=l.trim(r+""),o,u,f;return u=t.responseJSON&&t.responseJSON.error?t.responseJSON.error.toString():"",f=u||t.responseText,n.cancelling&&n.msgUploadAborted&&(s=n.msgUploadAborted),n.showAjaxErrorDetails&&f&&(u?s=l.trim(u+""):(f=l.trim(f.replace(/\n\s*\n/g,`
`)),o=f.length?"<pre>"+f+"</pre>":"",s+=s?o:f)),s||(s=n.msgAjaxError.replace("{operation}",e)),n.cancelling=!1,a?"<b>"+a+": </b>"+s:s},_parseFileType:function(e,t){var r=this,a,n,s,o,u=r.allowedPreviewTypes||[];if(e==="application/text-plain")return"text";for(o=0;o<u.length;o++)if(s=u[o],a=r.fileTypeSettings[s],n=a(e,t)?s:"",!l.isEmpty(n))return n;return"other"},_getPreviewIcon:function(e){var t=this,r,a=null;return e&&e.indexOf(".")>-1&&(r=e.split(".").pop(),t.previewFileIconSettings&&(a=t.previewFileIconSettings[r]||t.previewFileIconSettings[r.toLowerCase()]||null),t.previewFileExtSettings&&p.each(t.previewFileExtSettings,function(n,s){if(t.previewFileIconSettings[n]&&s(r)){a=t.previewFileIconSettings[n];return}})),a||t.previewFileIcon},_parseFilePreviewIcon:function(e,t){var r=this,a=r._getPreviewIcon(t),n=e;return n.indexOf("{previewFileIcon}")>-1&&(n=n.setTokens({previewFileIconClass:r.previewFileIconClass,previewFileIcon:a})),n},_raise:function(e,t){var r=this,a=p.Event(e);t!==void 0?r.$element.trigger(a,t):r.$element.trigger(a);var n=a.result,s=n===!1;if(a.isDefaultPrevented()||s)return!1;if(a.type==="filebatchpreupload"&&(n||s))return r.ajaxAborted=n,!1;switch(e){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"filecustomerror":case"filesuccessremove":break;default:r.ajaxAborted||(r.ajaxAborted=n);break}return!0},_listenFullScreen:function(e){var t=this,r=t.$modal,a,n;!r||!r.length||(a=r&&r.find(".btn-kv-fullscreen"),n=r&&r.find(".btn-kv-borderless"),!(!a.length||!n.length)&&(a.removeClass("active").attr("aria-pressed","false"),n.removeClass("active").attr("aria-pressed","false"),e?a.addClass("active").attr("aria-pressed","true"):n.addClass("active").attr("aria-pressed","true"),r.hasClass("file-zoom-fullscreen")||e?t._maximizeZoomDialog():n.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var e=this,t=e.$element,r=e.$form,a=e.$container,n;e._handler(t,"click",function(s){e._initFileSelected(),t.hasClass("file-no-browse")&&(t.data("zoneClicked")?t.data("zoneClicked",!1):s.preventDefault())}),e._handler(t,"change",p.proxy(e._change,e)),e._handler(e.$caption,"paste",p.proxy(e.paste,e)),e.showBrowse&&(e._handler(e.$btnFile,"click",p.proxy(e._browse,e)),e._handler(e.$btnFile,"keypress",function(s){var o=s.keyCode||s.which;o===13&&(t.trigger("click"),e._browse(s))})),e._handler(a.find(".fileinput-remove:not([disabled])"),"click",p.proxy(e.clear,e)),e._handler(a.find(".fileinput-cancel"),"click",p.proxy(e.cancel,e)),e._handler(a.find(".fileinput-pause"),"click",p.proxy(e.pause,e)),e._initDragDrop(),e._handler(r,"reset",p.proxy(e.clear,e)),e.isAjaxUpload||e._handler(r,"submit",p.proxy(e._submitForm,e)),e._handler(e.$container.find(".fileinput-upload"),"click",p.proxy(e._uploadClick,e)),e._handler(p(window),"resize",function(){e._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),n="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",e._handler(p(document),n,function(){e._listenFullScreen(l.checkFullScreen())}),e.$caption.on("focus",function(){e.$captionContainer.focus()}),e._autoFitContent(),e._initClickable(),e._refreshPreview()},_autoFitContent:function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=this,r=e<400?t.previewSettingsSmall||t.defaults.previewSettingsSmall:t.previewSettings||t.defaults.previewSettings,a;p.each(r,function(n,s){a=".file-preview-frame .file-preview-"+n,t.$preview.find(a+".kv-preview-data,"+a+" .kv-preview-data").css(s)})},_scanDroppedItems:function(e,t,r){r=r||"";var a=this,n,s,o,u=function(f){a._log(l.logMessages.badDroppedFiles),a._log(f)};e.isFile?e.file(function(f){r&&(f.newPath=r+f.name),t.push(f)},u):e.isDirectory&&(s=e.createReader(),o=function(){s.readEntries(function(f){if(f&&f.length>0){for(n=0;n<f.length;n++)a._scanDroppedItems(f[n],t,r+e.name+"/");o()}return null},u)},o())},_initDragDrop:function(){var e=this,t=e.$dropZone;e.dropZoneEnabled&&e.showPreview&&(e._handler(t,"dragenter dragover",p.proxy(e._zoneDragEnter,e)),e._handler(t,"dragleave",p.proxy(e._zoneDragLeave,e)),e._handler(t,"drop",p.proxy(e._zoneDrop,e)),e._handler(p(document),"dragenter dragover drop",e._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(e){var t=this,r=e.originalEvent.dataTransfer,a=p.inArray("Files",r.types)>-1;if(t._zoneDragDropInit(e),t.isDisabled||!a){r.effectAllowed="none",r.dropEffect="none";return}r.dropEffect="copy",t._raise("fileDragEnter",{sourceEvent:e,files:r.types.Files})&&l.addCss(t.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){var t=this;t._zoneDragDropInit(e),!t.isDisabled&&t._raise("fileDragLeave",{sourceEvent:e})&&t.$dropZone.removeClass("file-highlighted")},_dropFiles:function(e,t){var r=this,a=r.$element;r.isAjaxUpload?r._change(e,t):(r.changeTriggered=!0,a.get(0).files=t,setTimeout(function(){r.changeTriggered=!1,a.trigger("change"+r.namespace)},r.processDelay)),r.$dropZone.removeClass("file-highlighted")},_addFilesFromSystem:function(e,t,r){var a=this,n=t.files,s=t.items,o=l.getDragDropFolders(s);if(e.preventDefault(),a.isDisabled||l.isEmpty(n)||!n.length){console.log("No valid copied files found in clipboard for pasting.");return}if(a._raise(r,{sourceEvent:e,files:n}))if(o>0){if(!a.isAjaxUpload){a._showFolderError(o);return}for(n=[],i=0;i<s.length;i++){var u=s[i].webkitGetAsEntry();u&&a._scanDroppedItems(u,n)}setTimeout(function(){a._dropFiles(e,n)},500)}else a._dropFiles(e,n)},_zoneDrop:function(e){var t=this;t.$element;var r=e.originalEvent.dataTransfer;t._addFilesFromSystem(e,r,"fileDragDrop")},_uploadClick:function(e){var t=this,r=t.$container.find(".fileinput-upload"),a,n=!r.hasClass("disabled")&&l.isEmpty(r.attr("disabled"));if(!(e&&e.isDefaultPrevented())){if(!t.isAjaxUpload){n&&r.attr("type")!=="submit"&&(e.preventDefault(),a=r.closest("form"),a.length&&a.trigger("submit"));return}e.preventDefault(),n&&t.upload()}},_submitForm:function(){var e=this;return e._isFileSelectionValid()&&!e._abort({})},_clearPreview:function(){var e=this,t=e.showUploadedThumbs?e.getFrames(":not(.file-preview-success)"):e.getFrames();t.each(function(){var r=p(this);r.remove()}),(!e.getFrames().length||!e.showPreview)&&e._resetUpload(),e._validateDefaultPreview()},_initSortable:function(){var e=this,t=e.$preview,r,a="."+l.SORT_CSS,n,s=p("body"),o=p("html"),u=e.reversePreviewOrder,f=window.Sortable,c,d;!f||t.find(a).length===0||(n=s.length?s:o.length?o:e.$container,c=function(){n.addClass("file-grabbing")},d=function(){n.removeClass("file-grabbing")},r={handle:".drag-handle-init",dataIdAttr:"data-fileid",animation:600,draggable:a,scroll:!1,forceFallback:!0,onChoose:c,onStart:c,onUnchoose:d,onEnd:d,onSort:function(m){var h=m.oldIndex,g=m.newIndex,w=0,b=e.initialPreviewConfig.length,v=b>0&&g>=b,x=p(m.item),C;v&&(g=b-1),e.initialPreview=l.moveArray(e.initialPreview,h,g,u),e.initialPreviewConfig=l.moveArray(e.initialPreviewConfig,h,g,u),e.previewCache.init(),e.getFrames(".file-preview-initial").each(function(){p(this).attr("data-fileindex",l.INIT_FLAG+w),w++}),v&&(C=e.getFrames(":not(.file-preview-initial):first"),C.length&&x.slideUp(function(){x.insertBefore(C).slideDown()})),e._raise("filesorted",{previewId:x.attr("id"),oldIndex:h,newIndex:g,stack:e.initialPreviewConfig})}},p.extend(!0,r,e.fileActionSettings.dragSettings),e.sortable&&e.sortable.destroy(),e.sortable=f.create(t[0],r))},_setPreviewContent:function(e){var t=this;l.setHtml(t.$preview,e),t._autoFitContent()},_initPreviewImageOrientations:function(){var e=this,t=0,r=e.canOrientImage;!e.autoOrientImageInitial&&!r||e.getFrames(".file-preview-initial").each(function(){var a=p(this),n,s,o,u=e.initialPreviewConfig[t];u&&u.exif&&u.exif.Orientation&&(o=a.attr("id"),n=a.find(">.kv-file-content img"),s=e._getZoom(o," >.kv-file-content img"),r?n.css("image-orientation",e.autoOrientImageInitial?"from-image":"none"):e.setImageOrientation(n,s,u.exif.Orientation,a)),t++})},_initPreview:function(e){var t=this,r=t.initialCaption||"",a;if(!t.previewCache.count(!0)){t._clearPreview(),e?t._setCaption(r):t._initCaption();return}a=t.previewCache.out(),r=e&&t.initialCaption?t.initialCaption:a.caption,t._setPreviewContent(a.content),t._setInitThumbAttr(),t._setCaption(r),t._initSortable(),l.isEmpty(a.content)||t.$container.removeClass("file-input-new"),t._initPreviewImageOrientations()},_getZoomButton:function(e){var t=this,r=t.previewZoomButtonIcons[e],a=t.previewZoomButtonClasses[e],n=' title="'+(t.previewZoomButtonTitles[e]||"")+'" ',s=l.isBs(5)?"bs-":"",o=n+(e==="close"?" data-"+s+'dismiss="modal" aria-hidden="true"':"");return(e==="fullscreen"||e==="borderless"||e==="toggleheader")&&(o+=' data-toggle="button" aria-pressed="false"'),'<button type="button" class="'+a+" btn-kv-"+e+'"'+o+">"+r+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({rtl:e.rtl?" kv-rtl":"",zoomFrameClass:e.frameClass,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),rotate:e._getZoomButton("rotate"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(e){var t=this,r=t.$modal,a=function(n){return{sourceEvent:n,previewId:r.data("previewId"),modal:r}};r.on(e+".bs.modal",function(n){if(n.namespace==="bs.modal"){var s=r.find(".btn-fullscreen"),o=r.find(".btn-borderless");r.data("fileinputPluginId")===t.$element.attr("id")&&t._raise("filezoom"+e,a(n)),e==="shown"&&(t._handleRotation(r,r.find(".file-zoom-detail"),r.data("angle")),o.removeClass("active").attr("aria-pressed","false"),s.removeClass("active").attr("aria-pressed","false"),r.hasClass("file-zoom-fullscreen")&&(t._maximizeZoomDialog(),l.checkFullScreen()?s.addClass("active").attr("aria-pressed","true"):o.addClass("active").attr("aria-pressed","true")))}})},_initZoom:function(){var e=this,t,r=e._getLayoutTemplate("modalMain"),a="#"+l.MODAL_ID;r=e._setTabIndex("modal",r),e.showPreview&&(e.$modal=p(a),(!e.$modal||!e.$modal.length)&&(t=l.createElement(l.cspBuffer.stash(r)).insertAfter(e.$container),e.$modal=p(a).insertBefore(t),l.cspBuffer.apply(e.$modal),t.remove()),l.initModal(e.$modal),e.$modal.html(l.cspBuffer.stash(e._getModalContent())),l.cspBuffer.apply(e.$modal),p.each(l.MODAL_EVENTS,function(n,s){e._listenModalEvent(s)}))},_initZoomButtons:function(){var e=this,t=e.$modal,r=t.data("previewId")||"",a,n,s=e.getFrames().toArray(),o=s.length,u=t.find(".btn-kv-prev"),f=t.find(".btn-kv-next");if(t.find(".btn-kv-rotate"),s.length<2){u.hide(),f.hide();return}else u.show(),f.show();o&&(a=p(s[0]),n=p(s[o-1]),u.removeAttr("disabled"),f.removeAttr("disabled"),e.reversePreviewOrder&&([u,f]=[f,u]),a.length&&a.attr("id")===r&&u.attr("disabled",!0),n.length&&n.attr("id")===r&&f.attr("disabled",!0))},_maximizeZoomDialog:function(){var e=this,t=e.$modal,r=t.find(".modal-header:visible"),a=t.find(".modal-footer:visible"),n=t.find(".kv-zoom-body"),s=p(window).height(),o=0;t.addClass("file-zoom-fullscreen"),r&&r.length&&(s-=r.outerHeight(!0)),a&&a.length&&(s-=a.outerHeight(!0)),n&&n.length&&(o=n.outerHeight(!0)-n.height(),s-=o),t.find(".kv-zoom-body").height(s)},_resizeZoomDialog:function(e){var t=this,r=t.$modal,a=r.find(".btn-kv-fullscreen"),n=r.find(".btn-kv-borderless");if(r.hasClass("file-zoom-fullscreen"))l.toggleFullScreen(!1),e?a.hasClass("active")||(r.removeClass("file-zoom-fullscreen"),t._resizeZoomDialog(!0),n.hasClass("active")&&n.removeClass("active").attr("aria-pressed","false")):a.hasClass("active")?a.removeClass("active").attr("aria-pressed","false"):(r.removeClass("file-zoom-fullscreen"),t.$modal.find(".kv-zoom-body").css("height",t.zoomModalHeight));else{if(!e){t._maximizeZoomDialog();return}l.toggleFullScreen(!0)}r.focus()},_setZoomContent:function(e,t){var r=this,a,n,s,o,u,f,c=e.attr("id"),d=r._getZoom(c),m=r.$modal,h,g,w,b=m.find(".btn-kv-fullscreen"),v=m.find(".btn-kv-borderless"),x,C,F=m.find(".btn-kv-toggleheader"),_,P=e.data("zoom");P&&(P=decodeURIComponent(P),_=d.html().replace(r.zoomPlaceholder,"").setTokens({zoomData:P}),d.html(_),e.data("zoom",""),d.attr("data-zoom",P)),n=d.attr("data-template")||"generic",a=d.find(".kv-file-content"),s=a.length?a.html():"",x=e.data("caption")||r.msgZoomModalHeading,C=e.data("size")||"",g=e.data("description")||"",m.find(".kv-zoom-caption").attr("title",x).html(x),m.find(".kv-zoom-size").html(C),w=m.find(".kv-zoom-description").hide(),g&&(r.showDescriptionClose&&(g=r._getLayoutTemplate("descriptionClose").setTokens({closeIcon:r.previewZoomButtonIcons.close})+"</button>"+g),w.show().html(g),r.showDescriptionClose&&r._handler(m.find(".kv-desc-hide"),"click",function(){p(this).parent().fadeOut("fast",function(){m.focus()})})),o=m.find(".kv-zoom-body"),m.removeClass("kv-single-content"),t?(h=o.addClass("file-thumb-loading").clone().insertAfter(o),l.setHtml(o,s).hide(),h.fadeOut("fast",function(){o.fadeIn("fast",function(){o.removeClass("file-thumb-loading")}),h.remove()})):l.setHtml(o,s),f=r.previewZoomSettings[n],f&&(u=o.find(".kv-preview-data"),l.addCss(u,"file-zoom-detail"),p.each(f,function(T,I){u.css(T,I),(u.attr("width")&&T==="width"||u.attr("height")&&T==="height")&&u.removeAttr(T)})),m.data("previewId",c),r._handler(m.find(".btn-kv-prev"),"click",function(){r._zoomSlideShow("prev",c)}),r._handler(m.find(".btn-kv-next"),"click",function(){r._zoomSlideShow("next",c)}),r._handler(b,"click",function(){r._resizeZoomDialog(!0)}),r._handler(v,"click",function(){r._resizeZoomDialog(!1)}),r._handler(F,"click",function(){var T=m.find(".modal-header"),I=m.find(".floating-buttons"),y,A=T.find(".kv-zoom-actions"),k=function(S){var D=r.$modal.find(".kv-zoom-body"),E=r.zoomModalHeight;m.hasClass("file-zoom-fullscreen")&&(E=D.outerHeight(!0),S||(E=E-T.outerHeight(!0))),D.css("height",S?E+S:E)};T.is(":visible")?(y=T.outerHeight(!0),T.slideUp("slow",function(){A.find(".btn").appendTo(I),k(y)})):(I.find(".btn").appendTo(A),T.slideDown("slow",function(){k()})),m.focus()}),r._handler(m,"keydown",function(T){var I=T.which||T.keyCode,y=r.processDelay+1,A=p(this).find(".btn-kv-prev"),k=p(this).find(".btn-kv-next"),S=p(this).data("previewId"),D,E;[D,E]=r.rtl?[39,37]:[37,39],p.each({prev:[A,D],next:[k,E]},function($,j){var B=j[0],z=j[1];I===z&&B.length&&(m.focus(),B.attr("disabled")||(B.blur(),setTimeout(function(){B.focus(),r._zoomSlideShow($,S),setTimeout(function(){B.attr("disabled")&&m.focus()},y)},y)))})})},_showModal:function(e){var t=this,r=t.$modal,a,n;!e||!e.length||(l.initModal(r),l.setHtml(r,t._getModalContent()),t._setZoomContent(e),r.removeClass("rotatable"),r.data({backdrop:!1,fileinputPluginId:t.$element.attr("id")}),r.find(".kv-zoom-body").css("height",t.zoomModalHeight),a=e.find(".kv-file-content > :first-child"),a.length&&(n=a.css("transform"),n&&r.find(".file-zoom-detail").css("transform",n)),e.hasClass("rotatable")&&r.addClass("rotatable"),e.data("angle")&&r.data("angle",e.data("angle")),e.data("angle"),r.modal("show"),t._initZoomButtons(),t._initRotateZoom(e,a))},_zoomPreview:function(e){var t=this,r;if(!e.length)throw"Cannot zoom to detailed preview!";r=e.closest(l.FRAMES),t._showModal(r)},_zoomSlideShow:function(e,t){var r=this,a=r.$modal,n=a.find(".kv-zoom-actions .btn-kv-"+e),s,o,u,f=r.getFrames().toArray(),c=[],d=f.length,m,h,g;if(r.reversePreviewOrder&&(e=e==="prev"?"next":"prev"),!n.attr("disabled")){for(o=0;o<d;o++)u=p(f[o]),u&&u.length&&u.find(".kv-file-zoom:visible").length&&c.push(f[o]);for(d=c.length,o=0;o<d;o++)if(p(c[o]).attr("id")===t){m=e==="prev"?o-1:o+1;break}m<0||m>=d||!c[m]||(s=p(c[m]),s.length&&r._setZoomContent(s,e),r._initZoomButtons(),s.length&&s.hasClass("rotatable")?(h=s.data("angle")||0,a.addClass("rotatable").data("angle",h),g=s.find(".kv-file-content > :first-child"),r._initRotateZoom(s,g)):a.removeClass("rotatable").removeData("angle"),r._raise("filezoom"+e,{previewId:t,modal:r.$modal}))}},_initZoomButton:function(){var e=this;e.$preview.find(".kv-file-zoom").each(function(){var t=p(this);e._handler(t,"click",function(){e._zoomPreview(t)})})},_inputFileCount:function(){return this.$element[0].files.length},_refreshPreview:function(){var e=this,t;!e._inputFileCount()&&!e.isAjaxUpload||!e.showPreview||!e.isPreviewable||(e.isAjaxUpload&&e.fileManager.count()>0?(t=p.extend(!0,[],e.getFileList()),e.fileManager.clear(),e._clearFileInput()):t=e.$element[0].files,t&&t.length&&e.readFiles(t))},_clearObjects:function(e){e.find("video audio").each(function(){this.pause(),p(this).remove()}),e.find("img object div").each(function(){p(this).remove()})},_clearFileInput:function(){var e=this,t=e.$element,r,a,n;e._inputFileCount()&&(r=t.closest("form"),a=p(document.createElement("form")),n=p(document.createElement("div")),t.before(n),r.length?r.after(a):n.after(a),a.append(t).trigger("reset"),n.before(t).remove(),a.remove())},_resetUpload:function(){var e=this;e.uploadInitiated=!1,e.uploadStartTime=l.now(),e.uploadCache=[],e.$btnUpload.removeAttr("disabled"),e._setProgress(0),e._hideProgress(),e._resetErrors(!1),e._initAjax(),e.fileManager.clearImages(),e._resetCanvas(),e.overwriteInitial&&(e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[],e.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var e=this;e.imageCanvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.imageCanvas.width,e.imageCanvas.height)},_hasInitialPreview:function(){var e=this;return!e.overwriteInitial&&e.previewCache.count(!0)},_resetPreview:function(){var e=this,t,r,a,n=e.showUploadedThumbs,s=!e.removeFromPreviewOnError,o=(n||s)&&e.isDuplicateError;e.previewCache.count(!0)?(t=e.previewCache.out(),o&&(a=l.createElement("").insertAfter(e.$container),e.getFrames().each(function(){var u=p(this);(n&&u.hasClass("file-preview-success")||s&&u.hasClass("file-preview-error"))&&a.append(u)})),e._setPreviewContent(t.content),e._setInitThumbAttr(),r=e.initialCaption?e.initialCaption:t.caption,e._setCaption(r),o&&(a.contents().appendTo(e.$preview),a.remove())):(e._clearPreview(),e._initCaption()),e.showPreview&&(e._initZoom(),e._initSortable()),e.isDuplicateError=!1},_clearDefaultPreview:function(){var e=this;e.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;!e.showPreview||l.isEmpty(e.defaultPreviewContent)||(e._setPreviewContent('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var t=this,r;if(e){t._clearPreview(),t.clearFileStack();return}t._hasInitialPreview()?(r=t.previewCache.out(),t._setPreviewContent(r.content),t._setInitThumbAttr(),t._setCaption(r.caption),t._initPreviewActions()):t._clearPreview()},_getLayoutTemplate:function(e){var t=this,r=t.layoutTemplates[e];return l.isEmpty(t.customLayoutTags)?r:l.replaceTags(r,t.customLayoutTags)},_getPreviewTemplate:function(e){var t=this,r=t.previewTemplates,a=r[e]||r.other;return l.isEmpty(t.customPreviewTags)?a:l.replaceTags(a,t.customPreviewTags)},_getOutData:function(e,t,r,a){var n=this;return t=t||{},r=r||{},a=a||n.fileManager.list(),{formdata:e,files:a,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:r,reader:n.reader,jqXHR:t}},_getMsgSelected:function(e,t){var r=this,a=e===1?r.fileSingle:r.filePlural;return e>0?r.msgSelected.replace("{n}",e).replace("{files}",a):t?r.msgProcessing:r.msgNoFilesSelected},_getFrame:function(e,t){var r=this,a=l.getFrameElement(r.$preview,e);return r.showPreview&&!t&&!a.length&&r._log(l.logMessages.invalidThumb,{id:e}),a},_getZoom:function(e,t){var r=this,a=l.getZoomElement(r.$preview,e,t);return r.showPreview&&!a.length&&r._log(l.logMessages.invalidThumb,{id:e}),a},_getThumbs:function(e){return e=e||"",this.getFrames(":not(.file-preview-initial)"+e)},_getThumbId:function(e){var t=this;return t.previewInitId+"-"+e},_getExtraData:function(e,t){var r=this,a=r.uploadExtraData;return typeof r.uploadExtraData=="function"&&(a=r.uploadExtraData(e,t)),a},_initXhr:function(e,t){var r=this,a=r.fileManager,n=function(s){var o=0,u=s.total,f=s.loaded||s.position,c=a.getUploadStats(t,f,u);s.lengthComputable&&!r.enableResumableUpload&&(o=l.round(f/u*100)),t?r._setFileUploadStats(t,o,c):r._setProgress(o,null,null,r._getStats(c)),r._raise("fileajaxprogress",[c])};return e.upload&&(r.progressDelay&&(n=l.debounce(n,r.progressDelay)),e.upload.addEventListener("progress",n,!1)),e},_initAjaxSettings:function(){var e=this;e._ajaxSettings=p.extend(!0,{},e.ajaxSettings),e._ajaxDeleteSettings=p.extend(!0,{},e.ajaxDeleteSettings)},_mergeAjaxCallback:function(e,t,r){var a=this,n=a._ajaxSettings,s=a.mergeAjaxCallbacks,o;r==="delete"&&(n=a._ajaxDeleteSettings,s=a.mergeAjaxDeleteCallbacks),o=n[e],s&&typeof o=="function"?s==="before"?n[e]=function(){o.apply(this,arguments),t.apply(this,arguments)}:n[e]=function(){t.apply(this,arguments),o.apply(this,arguments)}:n[e]=t},_ajaxSubmit:function(e,t,r,a,n,s,o,u){var f=this,c,d,m,h=f.taskManager;f._raise("filepreajax",[n,s,o])&&(n.append("initialPreview",JSON.stringify(f.initialPreview)),n.append("initialPreviewConfig",JSON.stringify(f.initialPreviewConfig)),n.append("initialPreviewThumbTags",JSON.stringify(f.initialPreviewThumbTags)),f._initAjaxSettings(),f._mergeAjaxCallback("beforeSend",e),f._mergeAjaxCallback("success",t),f._mergeAjaxCallback("complete",r),f._mergeAjaxCallback("error",a),u=u||f.uploadUrlThumb||f.uploadUrl,typeof u=="function"&&(u=u()),m=f._getExtraData(s,o)||{},typeof m=="object"&&p.each(m,function(g,w){n.append(g,w)}),d={xhr:function(){var g=p.ajaxSettings.xhr();return f._initXhr(g,s)},url:f._encodeURI(u),type:"POST",dataType:"json",data:n,cache:!1,processData:!1,contentType:!1},c=p.extend(!0,{},d,f._ajaxSettings),f.ajaxQueue.push(c),h.addTask(s+"-"+o,function(){var g=this.self,w,b;w=g.ajaxQueue.shift(),b=p.ajax(w),g.ajaxRequests.push(b)}).runWithContext({self:f}))},_mergeArray:function(e,t){var r=this,a=l.cleanArray(r[e]),n=l.cleanArray(t);r[e]=a.concat(n)},_initUploadSuccess:function(e,t,r){var a=this,n,s,o,u,f,c,d,m,h;if(!a.showPreview||typeof e!="object"||p.isEmptyObject(e)){a._resetCaption();return}e.initialPreview!==void 0&&e.initialPreview.length>0&&(a.hasInitData=!0,f=e.initialPreview||[],c=e.initialPreviewConfig||[],d=e.initialPreviewThumbTags||[],n=e.append===void 0||e.append,f.length>0&&!l.isArray(f)&&(f=f.split(a.initialPreviewDelimiter)),f.length&&(a._mergeArray("initialPreview",f),a._mergeArray("initialPreviewConfig",c),a._mergeArray("initialPreviewThumbTags",d)),t!==void 0?r?(m=t.attr("id"),h=a._getUploadCacheIndex(m),h!==null&&(a.uploadCache[h]={id:m,content:f[0],config:c[0]||[],tags:d[0]||[],append:n})):(o=a.previewCache.add(f[0],c[0],d[0],n),s=a.previewCache.get(o,!1),u=l.createElement(s).hide().appendTo(t),t.fadeOut("slow",function(){var g=u.find("> .file-preview-frame");g&&g.length&&g.insertBefore(t).fadeIn("slow").css("display:inline-block"),a._initPreviewActions(),a._clearFileInput(),t.remove(),u.remove(),a._initSortable()})):(a.previewCache.set(f,c,d,n),a._initPreview(),a._initPreviewActions())),a._resetCaption()},_getUploadCacheIndex:function(e){var t=this,r,a=t.uploadCache.length,n;for(r=0;r<a;r++)if(n=t.uploadCache[r],n.id===e)return r;return null},_initSuccessThumbs:function(){var e=this;e.showPreview&&setTimeout(function(){e._getThumbs(l.FRAMES+".file-preview-success").each(function(){var t=p(this),r=t.find(".kv-file-remove");r.removeAttr("disabled"),e._handler(r,"click",function(){var a=t.attr("id"),n=e._raise("filesuccessremove",[a,t.attr("data-fileindex")]);l.cleanMemory(t),n!==!1&&(e.$caption.attr("title",""),t.fadeOut("slow",function(){e.fileManager,t.remove(),e.getFrames().length||e.reset()}))})})},e.processDelay)},_updateInitialPreview:function(){var e=this,t=e.uploadCache;e.showPreview&&(p.each(t,function(r,a){e.previewCache.add(a.content,a.config,a.tags,a.append)}),e.hasInitData&&(e._initPreview(),e._initPreviewActions()))},_getThumbFileId:function(e){var t=this;return t.showPreview&&e!==void 0?e.attr("data-fileid"):null},_getThumbFile:function(e){var t=this,r=t._getThumbFileId(e);return r?t.fileManager.getFile(r):null},_uploadSingle:function(e,t,r,a){var n=this,s=n.fileManager,o=s.count(),u=new FormData,f,c=n._getThumbId(t),d,m,h,g,w=o>0||!p.isEmptyObject(n.uploadExtraData),b,v,x,C,F,_,P,T,I=n.ajaxOperations.uploadThumb,y=s.getFile(t),A={id:c,index:e,fileId:t},k=n.fileManager.getFileName(t,!0),S=function(){a&&a.resolve&&a.resolve()},D=function(){a&&a.reject&&a.reject()};n.enableResumableUpload||(n.uploadInitiated=!0,n.showPreview&&(d=s.getThumb(t),v=d.find(".file-thumb-progress"),h=d.find(".kv-file-upload"),g=d.find(".kv-file-remove"),v.show()),!(o===0||!w||n.showPreview&&h&&h.hasClass("disabled")||n._abort(A))&&(T=function(){b?s.errors.push(t):s.removeFile(t),s.setProcessed(t),s.isProcessed()&&(n.fileBatchCompleted=!0,m())},m=function(){var E;n.fileBatchCompleted&&setTimeout(function(){var $=s.count()===0,j=s.errors.length;n._updateInitialPreview(),n.unlock($),$&&n._clearFileInput(),E=n.$preview.find(".file-preview-initial"),n.uploadAsync&&E.length&&(l.addCss(E,l.SORT_CSS),n._initSortable()),n._raise("filebatchuploadcomplete",[s.stack,n._getExtraData()]),(!n.retryErrorUploads||j===0)&&s.clear(),n._setProgress(101),n.ajaxAborted=!1,n.uploadInitiated=!1},n.processDelay)},x=function(E){f=n._getOutData(u,E),s.initStats(t),n.fileBatchCompleted=!1,r||(n.ajaxAborted=!1),n.showPreview&&(d.hasClass("file-preview-success")||(n._setThumbStatus(d,"Loading"),l.addCss(d,"file-uploading")),h.attr("disabled",!0),g.attr("disabled",!0)),r||n.lock(),s.errors.indexOf(t)!==-1&&delete s.errors[t],n._raise("filepreupload",[f,c,e,n._getThumbFileId(d)]),p.extend(!0,A,f),n._abort(A)&&(E.abort(),r||(n._setThumbStatus(d,"New"),d.removeClass("file-uploading"),h.removeAttr("disabled"),g.removeAttr("disabled")),n._setProgressCancelled())},F=function(E,$,j){var B=n.showPreview&&d.attr("id")?d.attr("id"):c;f=n._getOutData(u,j,E),p.extend(!0,A,f),setTimeout(function(){l.isEmpty(E)||l.isEmpty(E.error)?(n.showPreview&&(n._setThumbStatus(d,"Success"),h.hide(),n._initUploadSuccess(E,d,r),n._setProgress(101,v)),n._raise("fileuploaded",[f,B,e,n._getThumbFileId(d)]),r?(T(),S()):n.fileManager.remove(d)):(b=!0,C=n._parseError(I,j,n.msgUploadError,n.fileManager.getFileName(t)),n._showFileError(C,A),n._setPreviewError(d,!0),n.retryErrorUploads||h.hide(),r&&(T(),S()),n._setProgress(101,n._getFrame(B).find(".file-thumb-progress"),n.msgUploadError))},n.processDelay)},_=function(){n.showPreview&&(h.removeAttr("disabled"),g.removeAttr("disabled"),d.removeClass("file-uploading")),r?m():(n.unlock(!1),n._clearFileInput()),n._initSuccessThumbs()},P=function(E,$,j){C=n._parseError(I,E,j,n.fileManager.getFileName(t)),b=!0,setTimeout(function(){var B;r&&(T(),D()),n.fileManager.setProgress(t,100),n._setPreviewError(d,!0),n.retryErrorUploads||h.hide(),p.extend(!0,A,n._getOutData(u,E)),n._setProgress(101,n.$progress,n.msgAjaxProgressError.replace("{operation}",I)),B=n.showPreview&&d?d.find(".file-thumb-progress"):"",n._setProgress(101,B,n.msgUploadError),n._showFileError(C,A)},n.processDelay)},n._setFileData(u,y.file,k,t),n._setUploadData(u,{fileId:t}),n._ajaxSubmit(x,F,_,P,u,t,e)))},_setFileData:function(e,t,r,a){var n=this,s=n.preProcessUpload;s&&typeof s=="function"?e.append(n.uploadFileAttr,s(a,t)):e.append(n.uploadFileAttr,t,r)},_checkBatchPreupload:function(e,t){var r=this,a=r._raise("filebatchpreupload",[e]);return a?!0:(r._abort(e),t&&t.abort(),r._getThumbs().each(function(){var n=p(this),s=n.find(".kv-file-upload"),o=n.find(".kv-file-remove");n.hasClass("file-preview-loading")&&(r._setThumbStatus(n,"New"),n.removeClass("file-uploading")),s.removeAttr("disabled"),o.removeAttr("disabled")}),r._setProgressCancelled(),!1)},_uploadBatch:function(){var e=this,t=e.fileManager,r=t.total(),a={},n,s,o,u,f=r>0||!p.isEmptyObject(e.uploadExtraData),c,d,m=new FormData,h=e.ajaxOperations.uploadBatch;if(!(r===0||!f||e._abort(a))){d=function(){e.fileManager.clear(),e._clearFileInput()},n=function(w){e.lock(),t.initStats();var b=e._getOutData(m,w);e.ajaxAborted=!1,e.showPreview&&e._getThumbs().each(function(){var v=p(this),x=v.find(".kv-file-upload"),C=v.find(".kv-file-remove");v.hasClass("file-preview-success")||(e._setThumbStatus(v,"Loading"),l.addCss(v,"file-uploading")),x.attr("disabled",!0),C.attr("disabled",!0)}),e._checkBatchPreupload(b,w)},s=function(w,b,v){var x=e._getOutData(m,v,w),C=0,F=e._getThumbs(":not(.file-preview-success)"),_=l.isEmpty(w)||l.isEmpty(w.errorkeys)?[]:w.errorkeys;l.isEmpty(w)||l.isEmpty(w.error)?(e._raise("filebatchuploadsuccess",[x]),d(),e.showPreview?(F.each(function(){var P=p(this);e._setThumbStatus(P,"Success"),P.removeClass("file-uploading"),P.find(".kv-file-upload").hide().removeAttr("disabled")}),e._initUploadSuccess(w)):e.reset(),e._setProgress(101)):(e.showPreview&&(F.each(function(){var P=p(this);P.removeClass("file-uploading"),P.find(".kv-file-upload").removeAttr("disabled"),P.find(".kv-file-remove").removeAttr("disabled"),_.length===0||p.inArray(C,_)!==-1?(e._setPreviewError(P,!0),e.retryErrorUploads||(P.find(".kv-file-upload").hide(),e.fileManager.remove(P))):(P.find(".kv-file-upload").hide(),e._setThumbStatus(P,"Success"),e.fileManager.remove(P)),(!P.hasClass("file-preview-error")||e.retryErrorUploads)&&C++}),e._initUploadSuccess(w)),c=e._parseError(h,v,e.msgUploadError),e._showFileError(c,x,"filebatchuploaderror"),e._setProgress(101,e.$progress,e.msgUploadError))},u=function(){e.unlock(),e._initSuccessThumbs(),e._clearFileInput(),e._raise("filebatchuploadcomplete",[e.fileManager.stack,e._getExtraData()])},o=function(w,b,v){var x=e._getOutData(m,w);c=e._parseError(h,w,v),e._showFileError(c,x,"filebatchuploaderror"),e.uploadFileCount=r-1,e.showPreview&&(e._getThumbs().each(function(){var C=p(this);C.removeClass("file-uploading"),e._getThumbFile(C)&&e._setPreviewError(C)}),e._getThumbs().removeClass("file-uploading"),e._getThumbs(" .kv-file-upload").removeAttr("disabled"),e._getThumbs(" .kv-file-delete").removeAttr("disabled"),e._setProgress(101,e.$progress,e.msgAjaxProgressError.replace("{operation}",h)))};var g=0;p.each(e.fileManager.stack,function(w,b){l.isEmpty(b.file)||e._setFileData(m,b.file,b.nameFmt||"untitled_"+g,w),g++}),e._ajaxSubmit(n,s,u,o,m)}},_uploadExtraOnly:function(){var e=this,t,r,a,n,s=new FormData,o,u=e.ajaxOperations.uploadExtra;t=function(f){e.lock();var c=e._getOutData(s,f);e._setProgress(50),e._checkBatchPreupload(c,f)},r=function(f,c,d){var m=e._getOutData(s,d,f);l.isEmpty(f)||l.isEmpty(f.error)?(e._raise("filebatchuploadsuccess",[m]),e._clearFileInput(),e._initUploadSuccess(f),e._setProgress(101)):(o=e._parseError(u,d,e.msgUploadError),e._showFileError(o,m,"filebatchuploaderror"))},a=function(){e.unlock(),e._clearFileInput(),e._raise("filebatchuploadcomplete",[e.fileManager.stack,e._getExtraData()])},n=function(f,c,d){var m=e._getOutData(s,f);o=e._parseError(u,f,d),e._showFileError(o,m,"filebatchuploaderror"),e._setProgress(101,e.$progress,e.msgAjaxProgressError.replace("{operation}",u))},e._ajaxSubmit(t,r,a,n,s)},_deleteFileIndex:function(e){var t=this,r=e.attr("data-fileindex"),a=t.reversePreviewOrder;r.substring(0,5)===l.INIT_FLAG&&(r=parseInt(r.replace(l.INIT_FLAG,"")),t.initialPreview=l.spliceArray(t.initialPreview,r,a),t.initialPreviewConfig=l.spliceArray(t.initialPreviewConfig,r,a),t.initialPreviewThumbTags=l.spliceArray(t.initialPreviewThumbTags,r,a),t.getFrames().each(function(){var n=p(this),s=n.attr("data-fileindex");s.substring(0,5)===l.INIT_FLAG&&(s=parseInt(s.replace(l.INIT_FLAG,"")),s>r&&(s--,n.attr("data-fileindex",l.INIT_FLAG+s)))}))},_resetCaption:function(){var e=this;setTimeout(function(){var t="",r,a=e.previewCache.count(!0),n=e.fileManager.count(),s,o=":not(.file-preview-success):not(.file-preview-error)",u,f=e.showPreview&&e.getFrames(o).length;n===0&&a===0&&!f?e.reset():(r=a+n,r>1?t=e._getMsgSelected(r):n===0?(u=e.initialPreviewConfig[0],t="",u&&(t=u.caption||u.filename||""),t||(t=e._getMsgSelected(r))):(s=e.fileManager.getFirstFile(),t=s?s.nameFmt:"_"),e._setCaption(t))},e.processDelay)},_handleRotation:function(e,t,r){var a=this,n,s,o="",u=1,f=t[0],c,d,m,h,g,w=t.parent(),b,v,x=p("body"),C=!!x.length;if(C&&x.addClass("kv-overflow-hidden"),!t.length||e.hasClass("hide-rotate")){C&&x.removeClass("kv-overflow-hidden");return}d=t.css("transform"),d&&t.css("transform","none"),d&&t.css("transform",d),r=r||0,c=r%360,n="rotate("+r+"deg)",s="rotate("+c+"deg)",o="",(c===90||c===270)&&(h=f.naturalWidth||t.outerWidth()||0,m=f.naturalHeight||t.outerHeight()||0,u=h>m&&h!=0?(m/h).toFixed(2):1,w.length&&(b=w.height(),v=w.width(),g=Math.min(h,v),b>u*g&&(u=g>b&&g!=0?(b/g).toFixed(2):1)),u!==1&&(o=" scale("+u+")")),t.addClass("rotate-animate").css("transform",n+o),setTimeout(function(){t.removeClass("rotate-animate").css("transform",s+o),C&&x.removeClass("kv-overflow-hidden"),e.data("angle",c)},a.fadeDelay)},_initRotateButton:function(){var e=this;e.getFrames(".rotatable .kv-file-rotate").each(function(){var t=p(this),r=t.closest(l.FRAMES),a=r.find(".kv-file-content > :first-child");e._handler(t,"click",function(){var n=(r.data("angle")||0)+90;e._handleRotation(r,a,n)})})},_initRotateZoom:function(e,t){var r=this,a=r.$modal,n=a.find(".btn-kv-rotate"),s=e.data("angle");a.data("angle",s),n.length&&(n.off("click"),a.hasClass("rotatable")&&n.on("click",function(){s=(a.data("angle")||0)+90,a.data("angle",s),r._handleRotation(a,a.find(".file-zoom-detail"),s),r._handleRotation(e,t,s),e.hasClass("hide-rotate")&&e.data("angle",s)}))},_initFileActions:function(){var e=this;e.showPreview&&(e._initZoomButton(),e._initRotateButton(),e.getFrames(" .kv-file-remove").each(function(){var t=p(this),r=t.closest(l.FRAMES),a,n=r.attr("id"),s=r.attr("data-fileindex"),o;e.fileManager,e._handler(t,"click",function(){if(o=e._raise("filepreremove",[n,s]),o===!1||!e._validateMinCount())return!1;a=r.hasClass("file-preview-error"),l.cleanMemory(r),r.fadeOut("slow",function(){e.fileManager.remove(r),e._clearObjects(r),r.remove(),n&&a&&e.$errorContainer.find('li[data-thumb-id="'+n+'"]').fadeOut("fast",function(){p(this).remove(),e._errorsExist()||e._resetErrors()}),e._clearFileInput(),e._resetCaption(),e._raise("fileremoved",[n,s])})})}),e.getFrames(" .kv-file-upload").each(function(){var t=p(this);e._handler(t,"click",function(){var r=t.closest(l.FRAMES),a=e._getThumbFileId(r);e._hideProgress(),!(r.hasClass("file-preview-error")&&!e.retryErrorUploads)&&e._uploadSingle(e.fileManager.getIndex(a),a,!1)})}))},_initPreviewActions:function(){var e=this,t=e.$preview,r=e.deleteExtraData||{},a=l.FRAMES+" .kv-file-remove",n=e.fileActionSettings,s=n.removeClass,o=n.removeErrorClass,u=function(){var f=e.isAjaxUpload?e.previewCache.count(!0):e._inputFileCount();!e.getFrames().length&&!f?(e._setCaption(""),e.reset(),e.initialCaption=""):e._resetCaption()};e._initZoomButton(),e._initRotateButton(),t.find(a).each(function(){var f=p(this),c=f.data("url")||e.deleteUrl,d=f.data("key"),m,h,g,w,b=e.ajaxOperations.deleteThumb;if(!(l.isEmpty(c)||d===void 0)){typeof c=="function"&&(c=c());var v=f.closest(l.FRAMES),x=e.previewCache.data,C,F,_,P,T,I=v.attr("data-fileindex");I=parseInt(I.replace(l.INIT_FLAG,"")),_=l.isEmpty(x.config)&&l.isEmpty(x.config[I])?null:x.config[I],T=l.isEmpty(_)||l.isEmpty(_.extra)?r:_.extra,P=_&&(_.filename||_.caption)||"",typeof T=="function"&&(T=T()),F={id:f.attr("id"),key:d,extra:T},h=function(y){e.ajaxAborted=!1,e._raise("filepredelete",[d,y,T]),e._abort()?y.abort():(f.removeClass(o),l.addCss(v,"file-uploading"),l.addCss(f,"disabled "+s))},g=function(y,A,k){var S,D;if(!l.isEmpty(y)&&!l.isEmpty(y.error)){F.jqXHR=k,F.response=y,m=e._parseError(b,k,e.msgDeleteError,P),e._showFileError(m,F,"filedeleteerror"),v.removeClass("file-uploading"),f.removeClass("disabled "+s).addClass(o),u();return}v.removeClass("file-uploading").addClass("file-deleted"),v.fadeOut("slow",function(){I=parseInt(v.attr("data-fileindex").replace(l.INIT_FLAG,"")),e.previewCache.unset(I),e._deleteFileIndex(v),S=e.previewCache.count(!0),D=S>0?e._getMsgSelected(S):"",e._setCaption(D),e._raise("filedeleted",[d,k,T]),e._clearObjects(v),v.remove(),u()})},w=function(y,A,k){var S=e._parseError(b,y,k,P);F.jqXHR=y,F.response={},e._showFileError(S,F,"filedeleteerror"),v.removeClass("file-uploading"),f.removeClass("disabled "+s).addClass(o),u()},e._initAjaxSettings(),e._mergeAjaxCallback("beforeSend",h,"delete"),e._mergeAjaxCallback("success",g,"delete"),e._mergeAjaxCallback("error",w,"delete"),C=p.extend(!0,{},{url:e._encodeURI(c),type:"POST",dataType:"json",data:p.extend(!0,{},{key:d},T)},e._ajaxDeleteSettings),e._handler(f,"click",function(){if(!e._validateMinCount())return!1;e.ajaxAborted=!1,e._raise("filebeforedelete",[d,T]),e.ajaxAborted instanceof Promise?e.ajaxAborted.then(function(y){y||p.ajax(C)}):e.ajaxAborted||p.ajax(C)})}})},_hideFileIcon:function(){var e=this;e.overwriteInitial&&e.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){var e=this;l.addCss(e.$captionContainer,"icon-visible")},_getSize:function(e,t,r){var a=this,n=parseFloat(e),s=0,o=a.bytesToKB,u=a.fileSizeGetter,f,c=n,d;if(!l.isNumeric(e)||!l.isNumeric(n))return"";if(typeof u=="function")f=u(n);else{if(r||(r=a.sizeUnits),n>0){for(;c>=o;)c/=o,++s;r[s]||(c=n,s=0)}d=c.toFixed(2),d==c&&(d=c),f=d+" "+r[s]}return t?f:a._getLayoutTemplate("size").replace("{sizeText}",f)},_getFileType:function(e){var t=this;return t.mimeTypeAliases[e]||e},_generatePreviewTemplate:function(e,t,r,a,n,s,o,u,f,c,d,m,h,g,w){var b=this,v=b.slug(r),x,C="",F="",_=f||r,P,T=_.split(".").pop().toLowerCase(),I=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y,A=v,k=v,S="type-default",D,E,$=d||b._renderFileFooter(e,v,u,"auto",o),j,B=p.inArray(T,b.alwaysPreviewFileExtensions)!==-1,z=b.preferIconicPreview&&!B,ee=b.preferIconicZoomPreview&&!B,K=z?"other":e;return y=I<400?b.previewSettingsSmall[K]||b.defaults.previewSettingsSmall[K]:b.previewSettings[K]||b.defaults.previewSettings[K],y&&p.each(y,function(G,Z){F+=G+":"+Z+";"}),D=function(G,Z,O,L,N){var te=O?"zoom-"+n:n,q=b._getPreviewTemplate(G),V=(c||"")+" "+L,J;return b.frameClass&&(V=b.frameClass+" "+V),O&&(V=V.replace(" "+l.SORT_CSS,"")),q=b._parseFilePreviewIcon(q,r),e==="object"&&!a&&p.each(b.defaults.fileTypeSettings,function(Y,Q){Y==="object"||Y==="other"||Q(r,a)&&(S="type-"+Y)}),l.isEmpty(g)||(g.title!==void 0&&g.title!==null&&(A=g.title),g.alt!==void 0&&g.alt!==null&&(k=A=g.alt)),J={previewId:te,caption:v,title:A,alt:k,frameClass:V,type:b._getFileType(a),fileindex:m,fileid:s||"",filename:_,typeCss:S,footer:$,data:O&&N?b.zoomPlaceholder+"{zoomData}":Z,template:h||e,style:F?'style="'+F+'"':"",zoomData:N?encodeURIComponent(N):""},O&&(J.zoomCache="",J.zoomData="{zoomData}"),q.setTokens(J)},m=m||n.slice(n.lastIndexOf("-")+1),j=b.fileActionSettings.showRotate&&p.inArray(T,b.rotatableFileExtensions)!==-1,b.fileActionSettings.showZoom&&(E="kv-zoom-thumb",j&&(E+=" rotatable"+(ee?" hide-rotate":"")),C=D(ee?"other":e,t,!0,E,w)),C=`
`+b._getLayoutTemplate("zoomCache").replace("{zoomContent}",C),typeof b.sanitizeZoomCache=="function"&&(C=b.sanitizeZoomCache(C)),E="kv-preview-thumb",j&&(P=z||b.hideThumbnailContent||!!b.previewFileIconSettings[T],E+=" rotatable"+(P?" hide-rotate":"")),x=D(z?"other":e,t,!1,E,w),x.setTokens({zoomCache:C})},_addToPreview:function(e,t){var r=this,a;return t=l.cspBuffer.stash(t),a=r.reversePreviewOrder?e.prepend(t):e.append(t),l.cspBuffer.apply(e),a},_previewDefault:function(e,t){var r=this,a=r.$preview;if(r.showPreview){var n=l.getFileName(e),s=e?e.type:"",o,u=e.size||0,f=r._getFileName(e,""),c=t===!0&&!r.isAjaxUpload,d=l.createObjectURL(e),m=r.fileManager.getId(e),h=r._getThumbId(m);r._clearDefaultPreview(),o=r._generatePreviewTemplate("other",d,n,s,h,m,c,u),r._addToPreview(a,o),r._setThumbAttr(h,f,u),t===!0&&r.isAjaxUpload&&r._setThumbStatus(r._getFrame(h),"Error")}},_previewFile:function(e,t,r,a,n){if(this.showPreview){var s=this,o=l.getFileName(t),u=n.type,f,c=n.name,d=s._parseFileType(u,o),m=s.$preview,h=t.size||0,g=d==="image"?r.target.result:a,w=s.fileManager,b=w.getId(t),v=s._getThumbId(b);f=s._generatePreviewTemplate(d,g,o,u,v,b,!1,h,n.filename),s._clearDefaultPreview(),s._addToPreview(m,f);var x=s._getFrame(v);s._validateImageOrientation(x.find("img"),t,v,b,c,u,h,g),s._setThumbAttr(v,c,h),s._initSortable()}},_setThumbAttr:function(e,t,r,a){var n=this,s=n._getFrame(e);s.length&&(r=r&&r>0?n._getSize(r):"",s.data({caption:t,size:r,description:a||""}))},_setInitThumbAttr:function(){var e=this,t=e.previewCache.data,r=e.previewCache.count(!0),a,n,s,o,u;if(r!==0)for(var f=0;f<r;f++)a=t.config[f],u=e.previewInitId+"-"+l.INIT_FLAG+f,n=l.ifSet("caption",a,l.ifSet("filename",a)),s=l.ifSet("size",a),o=l.ifSet("description",a),e._setThumbAttr(u,n,s,o)},_slugDefault:function(e){return l.isEmpty(e,!0)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var t=this,r=t.$element,a,n,s,o,u,f=l.isIE(9)&&l.findFileName(r.val())||r[0].files[0]&&r[0].files[0].name;!f&&t.fileManager.count()>0?(u=t.fileManager.getFirstFile(),a=u.nameFmt):a=f?t.slug(f):"_",n=t.isAjaxUpload?t.fileManager.count():e,o=t.previewCache.count(!0)+n,s=n===1?a:t._getMsgSelected(o,!t.isAjaxUpload&&!t.isError),t.isError?(t.$previewContainer.removeClass("file-thumb-loading"),t._initCapStatus(),t.$previewStatus.html(""),t.$captionContainer.removeClass("icon-visible")):t._showFileIcon(),t._setCaption(s,t.isError),t.$container.removeClass("file-input-new file-input-ajax-new"),t._raise("fileselect",[e,a]),t.previewCache.count(!0)&&t._initPreviewActions()},_setThumbStatus:function(e,t){var r=this;if(r.showPreview){var a="indicator"+t,n=a+"Title",s="file-preview-"+t.toLowerCase(),o=e.find(".file-upload-indicator"),u=r.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-paused file-preview-loading"),t==="Success"&&e.find(".file-drag-handle").remove(),l.setHtml(o,u[a]),o.attr("title",u[n]),e.addClass(s),t==="Error"&&!r.retryErrorUploads&&e.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,t,r,a){var n=this;if(t=t||n.$progress,!!t.length){var s=Math.min(e,100),o,u=n.progressUploadThreshold,f=e<=100?n.progressTemplate:n.progressCompleteTemplate,c=s<100?n.progressTemplate:r?n.paused?n.progressPauseTemplate:n.progressErrorTemplate:f;e>=100&&(a=""),l.isEmpty(c)||(u&&s>u&&e<=100?o=c.setTokens({percent:u,status:n.msgUploadThreshold}):o=c.setTokens({percent:s,status:e>100?n.msgUploadEnd:s+"%"}),a=a||"",o=o.setTokens({stats:a}),l.setHtml(t,o),r&&l.setHtml(t.find('[role="progressbar"]'),r))}},_hasFiles:function(){var e=this.$element[0];return!!(e&&e.files&&e.files.length)},_setFileDropZoneTitle:function(){var e=this,t=e.$container.find(".file-drop-zone"),r=e.dropZoneTitle,a;e.isClickable&&(a=l.isEmpty(e.$element.attr("multiple"))?e.fileSingle:e.filePlural,r+=e.dropZoneClickTitle.replace("{files}",a)),t.find("."+e.dropZoneTitleClass).remove(),!(!e.showPreview||t.length===0||e.fileManager.count()>0||!e.dropZoneEnabled||e.previewCache.count()>0||!e.isAjaxUpload&&e._hasFiles())&&(t.find(l.FRAMES).length===0&&l.isEmpty(e.defaultPreviewContent)&&t.prepend('<div class="'+e.dropZoneTitleClass+'">'+r+"</div>"),e.$container.removeClass("file-input-new"),l.addCss(e.$container,"file-input-ajax-new"))},_getStats:function(e){var t=this,r,a;return!t.showUploadStats||!e||!e.bitrate?"":(a=t._getLayoutTemplate("stats"),r=!e.elapsed||!e.bps?t.msgCalculatingTime:t.msgPendingTime.setTokens({time:l.getElapsed(Math.ceil(e.pendingBytes/e.bps))}),a.setTokens({uploadSpeed:e.bitrate,pendingTime:r}))},_setResumableProgress:function(e,t,r){var a=this,n=a.resumableManager,s=r?n:a,o=r?r.find(".file-thumb-progress"):null;s.lastProgress===0&&(s.lastProgress=e),e<s.lastProgress&&(e=s.lastProgress),a._setProgress(e,o,null,a._getStats(t)),s.lastProgress=e},_toggleResumableProgress:function(e,t){var r=this,a=r.$progress;a&&a.length&&l.setHtml(a,e.setTokens({percent:101,status:t,stats:""}))},_setFileUploadStats:function(e,t,r){var a=this,n=a.$progress;if(!(!a.showPreview&&(!n||!n.length))){var s=a.fileManager,o=a.resumableManager,u=s.getThumb(e),f,c=0,d=s.getTotalSize(),m=p.extend(!0,{},r);if(a.enableResumableUpload){var h=r.loaded,g=o.getUploadedSize(),w=o.file.size,b;h+=g,b=s.uploadedSize+h,t=l.round(100*h/w),r.pendingBytes=w-g,a._setResumableProgress(t,r,u),f=Math.floor(100*b/d),m.pendingBytes=d-b,a._setResumableProgress(f,m)}else s.setProgress(e,t),n=u&&u.length?u.find(".file-thumb-progress"):null,a._setProgress(t,n,null,a._getStats(r)),p.each(s.stats,function(v,x){c+=x.loaded}),m.pendingBytes=d-c,f=l.round(c/d*100),a._setProgress(f,null,null,a._getStats(m))}},_validateMinCount:function(){var e=this,t=e.isAjaxUpload?e.fileManager.count():e._inputFileCount();return e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(t-1)<e.minFileCount?(e._noFilesError({}),!1):!0},_getFileCount:function(e,t){var r=this,a=0;return t===void 0&&(t=r.validateInitialCount&&!r.overwriteInitial),t&&(a=r.previewCache.count(!0),e+=a),e},_getFileId:function(e){return l.getFileId(e,this.generateFileId)},_getFileName:function(e,t){var r=this,a=l.getFileName(e);return a?r.slug(a):t},_getFileNames:function(e){var t=this;return t.filenames.filter(function(r){return e?r!==void 0:r!=null})},_setPreviewError:function(e,t){var r=this,a=r.removeFromPreviewOnError&&!r.retryErrorUploads;if((!t||a)&&r.fileManager.remove(e),!!r.showPreview){if(a){e.remove();return}else r._setThumbStatus(e,"Error");r._refreshUploadButton(e)}},_refreshUploadButton:function(e){var t=this,r=e.find(".kv-file-upload"),a=t.fileActionSettings,n=a.uploadIcon,s=a.uploadTitle;r.length&&(t.retryErrorUploads&&(n=a.uploadRetryIcon,s=a.uploadRetryTitle),r.attr("title",s),l.setHtml(r,n))},_isValidSize:function(e,t,r,a,n,s){var o=this,u,f,c,d=e==="Small"?"min":"max",m=o[d+"Image"+t];return l.isEmpty(m)||!r.length||(c=r[0],f=t==="Width"?c.naturalWidth||c.width:c.naturalHeight||c.height,e==="Small"?f>=m:f<=m)?!0:(u=o["msgImage"+t+e]||'Image "{name}" has a size validation error (limit "{size}").',o._showFileError(u.setTokens({name:n,size:m,dimension:f}),s),o._setPreviewError(a),o.fileManager.remove(a),o._clearFileInput(),!1)},_getExifObj:function(e){var t=this,r,a=l.logMessages.exifWarning;if(e.slice(0,23)!=="data:image/jpeg;base64,"&&e.slice(0,22)!=="data:image/jpg;base64,"){r=null;return}try{r=window.piexif?window.piexif.load(e):null}catch(n){r=null,a=n&&n.message||""}return!r&&t.showExifErrorLog&&t._log(l.logMessages.badExifParser,{details:a}),r},setImageOrientation:function(e,t,r,a){var n=this,s=!e||!e.length,o=!t||!t.length,u,f=!1,c,d=s&&a&&a.attr("data-template")==="image",m;s&&o||(m="load.fileinputimageorient",d?(e=t,t=null,e.css(n.previewSettings.image),c=p(document.createElement("div")).appendTo(a.find(".kv-file-content")),u=p(document.createElement("span")).insertBefore(e),e.css("visibility","hidden").removeClass("file-zoom-detail").appendTo(c)):f=!e.is(":visible"),e.off(m).on(m,function(){f&&(n.$preview.removeClass("hide-content"),a.find(".kv-file-content").css("visibility","hidden"));var h=e[0],g=t&&t.length?t[0]:null,w=h.offsetHeight,b=h.offsetWidth,v=l.getRotation(r);if(f&&(a.find(".kv-file-content").css("visibility","visible"),n.$preview.addClass("hide-content")),e.data("orientation",r),g&&t.data("orientation",r),r<5){l.setTransform(h,v),l.setTransform(g,v);return}var x=Math.atan(b/w),C=Math.sqrt(Math.pow(w,2)+Math.pow(b,2)),F=C?w/Math.cos(Math.PI/2+x)/C:1,_=" scale("+Math.abs(F)+")";l.setTransform(h,v+_),l.setTransform(g,v+_),d&&(e.css("visibility","visible").insertAfter(u).addClass("file-zoom-detail"),u.remove(),c.remove())}))},_validateImageOrientation:function(e,t,r,a,n,s,o,u){var f=this,c=null,d,m=f.autoOrientImage,h;if(c=f._getExifObj(u),f.canOrientImage){e.css("image-orientation",m?"from-image":"none"),f._validateImage(r,a,n,s,o,u,c);return}if(h=l.getZoomSelector(r," img"),d=c?c["0th"][piexif.ImageIFD.Orientation]:null,!d){f._validateImage(r,a,n,s,o,u,c);return}f.setImageOrientation(e,p(h),d,f._getFrame(r)),f._raise("fileimageoriented",{$img:e,file:t}),f._validateImage(r,a,n,s,o,u,c)},_validateImage:function(e,t,r,a,n,s,o){var u=this,f=u.$preview,c,d,m,h=u._getFrame(e),g=h.attr("data-fileindex"),w=h.find("img");r=r||"Untitled",w.one("load",function(){w.data("validated")||(w.data("validated",!0),d=h.width(),m=f.width(),d>m&&w.css("width","100%"),c={ind:g,id:e,fileId:t},setTimeout(function(){var b,v;b=u._isValidSize("Small","Width",w,h,r,c),v=u._isValidSize("Small","Height",w,h,r,c),u.resizeImage||(b=b&&u._isValidSize("Large","Width",w,h,r,c),v=v&&u._isValidSize("Large","Height",w,h,r,c)),u._raise("fileimageloaded",[e]),h.data("exif",o),b&&v&&(u.fileManager.addImage(t,{ind:g,img:w,thumb:h,pid:e,typ:a,siz:n,validated:!1,imgData:s,exifObj:o}),u._validateAllImages())},u.processDelay))}).one("error",function(){u._raise("fileimageloaderror",[e])})},_validateAllImages:function(){var e=this,t={val:0},r=e.fileManager.getImageCount(),a,n=e.resizeIfSizeMoreThan;r===e.fileManager.totalImages&&(e._raise("fileimagesloaded"),e.resizeImage&&p.each(e.fileManager.loadedImages,function(s,o){o.validated||(a=o.siz,a&&a>n*e.bytesToKB&&e._getResizedImage(s,o,t,r),o.validated=!0)}))},_getResizedImage:function(e,t,r,a){var n=this,s=p(t.img)[0],o=s.naturalWidth,u=s.naturalHeight,f,c=1,d=n.maxImageWidth||o,m=n.maxImageHeight||u,h=!!(o&&u),g,w,b=n.imageCanvas,v,x=n.imageCanvasContext,C=t.typ,F=t.pid,_=t.ind,P=t.thumb,T,I,y=t.exifObj,A,k,S,D;if(T=function(E,$,j){n.isAjaxUpload?n._showFileError(E,$,j):n._showError(E,$,j),n._setPreviewError(P)},k=n.fileManager.getFile(e),S={id:F,index:_,fileId:e},D=[e,F,_],(!k||!h||o<=d&&u<=m)&&(h&&k&&n._raise("fileimageresized",D),r.val++,r.val===a&&n._raise("fileimagesresized"),!h)){T(n.msgImageResizeError,S,"fileimageresizeerror");return}C=C||n.resizeDefaultImageType,g=o>d,w=u>m,n.resizePreference==="width"?c=g?d/o:w?m/u:1:c=w?m/u:g?d/o:1,n._resetCanvas(),o*=c,u*=c,b.width=o,b.height=u;try{x.drawImage(s,0,0,o,u),v=b.toDataURL(C,n.resizeQuality),y&&(A=window.piexif.dump(y),v=window.piexif.insert(A,v)),f=l.dataURI2Blob(v),n.fileManager.setFile(e,f),n._raise("fileimageresized",D),r.val++,r.val===a&&n._raise("fileimagesresized",[void 0,void 0]),f instanceof Blob||T(n.msgImageResizeError,S,"fileimageresizeerror")}catch(E){r.val++,r.val===a&&n._raise("fileimagesresized",[void 0,void 0]),I=n.msgImageResizeException.replace("{errors}",E.message),T(I,S,"fileimageresizeexception")}},_showProgress:function(){var e=this;e.$progress&&e.$progress.length&&e.$progress.show()},_hideProgress:function(){var e=this;e.$progress&&e.$progress.length&&e.$progress.hide()},_initBrowse:function(e){var t=this,r=t.$element;t.showBrowse?t.$btnFile=e.find(".btn-file").append(r):(r.appendTo(e).attr("tabindex",-1),l.addCss(r,"file-no-browse"))},_initClickable:function(){var e=this,t,r;e.isClickable&&(t=e.$dropZone,e.isAjaxUpload||(r=e.$preview.find(".file-default-preview"),r.length&&(t=r)),l.addCss(t,"clickable"),t.attr("tabindex",-1),e._handler(t,"click",function(a){var n=p(a.target);!e.$errorContainer.is(":visible")&&(!n.parents(".file-preview-thumbnails").length||n.parents(".file-default-preview").length)&&(e.$element.data("zoneClicked",!0).trigger("click"),t.blur())}))},_initCaption:function(){var e=this,t=e.initialCaption||"";return e.overwriteInitial||l.isEmpty(t)?(e.$caption.val(""),!1):(e._setCaption(t),!0)},_setCaption:function(e,t){var r=this,a,n,s,o,u,f;if(r.$caption.length){if(r.$captionContainer.removeClass("icon-visible"),t)a=p("<div>"+r.msgValidationError+"</div>").text(),o=r.fileManager.count(),o?(f=r.fileManager.getFirstFile(),u=o===1&&f?f.nameFmt:r._getMsgSelected(o)):u=r._getMsgSelected(r.msgNo),n=l.isEmpty(e)?u:e,s='<span class="'+r.msgValidationErrorClass+'">'+r.msgValidationErrorIcon+"</span>";else{if(l.isEmpty(e)){r.$caption.attr("title","");return}a=p("<div>"+e+"</div>").text(),n=a,s=r._getLayoutTemplate("fileIcon")}r.$captionContainer.addClass("icon-visible"),r.$caption.attr("title",a).val(n),l.setHtml(r.$captionIcon,s)}},_createContainer:function(){var e=this,t={class:"file-input file-input-new"+(e.rtl?" kv-rtl":"")},r=l.createElement(l.cspBuffer.stash(e._renderMain()));return l.cspBuffer.apply(r),r.insertBefore(e.$element).attr(t),e._initBrowse(r),e.theme&&r.addClass("theme-"+e.theme),r},_refreshContainer:function(){var e=this,t=e.$container,r=e.$element;r.insertAfter(t),l.setHtml(t,e._renderMain()),e._initBrowse(t),e._validateDisabled()},_validateDisabled:function(){var e=this;e.$caption.attr({readonly:e.isDisabled})},_setTabIndex:function(e,t){var r=this,a=r.tabIndexConfig[e];return t.setTokens({tabIndexConfig:a==null?"":'tabindex="'+a+'"'})},_renderMain:function(){var e=this,t=e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",r=e.showClose?e._getLayoutTemplate("close"):"",a=e.showPreview?e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:t}):"",n=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,s=e.captionTemplate.setTokens({class:n+" kv-fileinput-caption"});return s=e._setTabIndex("caption",s),e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),inputGroupClass:e.inputGroupClass,preview:a,close:r,caption:s,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),pause:e._renderButton("pause"),browse:e._renderButton("browse")})},_renderButton:function(e){var t=this,r=t._getLayoutTemplate("btnDefault"),a=t[e+"Class"],n=t[e+"Title"],s=t[e+"Icon"],o=t[e+"Label"],u=t.isDisabled?" disabled":"",f="button";switch(e){case"remove":if(!t.showRemove)return"";break;case"cancel":if(!t.showCancel)return"";a+=" kv-hidden";break;case"pause":if(!t.showPause)return"";a+=" kv-hidden";break;case"upload":if(!t.showUpload)return"";t.isAjaxUpload&&!t.isDisabled?r=t._getLayoutTemplate("btnLink").replace("{href}",t.uploadUrl):f="submit";break;case"browse":if(!t.showBrowse)return"";r=t._getLayoutTemplate("btnBrowse");break;default:return""}return r=t._setTabIndex(e,r),a+=e==="browse"?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",l.isEmpty(o)||(o=' <span class="'+t.buttonLabelClass+'">'+o+"</span>"),r.setTokens({type:f,css:a,title:n,status:u,icon:s,label:o})},_renderThumbProgress:function(){var e=this;return'<div class="file-thumb-progress kv-hidden">'+e.progressInfoTemplate.setTokens({percent:101,status:e.msgUploadBegin,stats:""})+"</div>"},_renderFileFooter:function(e,t,r,a,n){var s=this,o=s.fileActionSettings,u=o.showRemove,f=o.showDrag,c=o.showUpload,d=o.showRotate,m=o.showZoom,h,g,w=s._getLayoutTemplate("footer"),b=s._getLayoutTemplate("indicator"),v=n?o.indicatorError:o.indicatorNew,x=n?o.indicatorErrorTitle:o.indicatorNewTitle,C=b.setTokens({indicator:v,indicatorTitle:x});return r=s._getSize(r),g={type:e,caption:t,size:r,width:a,progress:"",indicator:C},s.isAjaxUpload?(g.progress=s._renderThumbProgress(),g.actions=s._renderFileActions(g,c,!1,u,d,m,f,!1,!1,!1)):g.actions=s._renderFileActions(g,!1,!1,!1,!1,m,f,!1,!1,!1),h=w.setTokens(g),h=l.replaceTags(h,s.previewThumbTags),h},_renderFileActions:function(e,t,r,a,n,s,o,u,f,c,d,m,h){var g=this;if(!e.type&&d&&(e.type="image"),g.enableResumableUpload?t=!1:typeof t=="function"&&(t=t(e)),typeof r=="function"&&(r=r(e)),typeof a=="function"&&(a=a(e)),typeof s=="function"&&(s=s(e)),typeof o=="function"&&(o=o(e)),typeof n=="function"&&(n=n(e)),!t&&!r&&!a&&!n&&!s&&!o)return"";var w=f===!1?"":' data-url="'+f+'"',b="",v="",x="",C,F=c===!1?"":' data-key="'+c+'"',_="",P="",T="",I=g._getLayoutTemplate("actions"),y=g.fileActionSettings,A=g.otherActionButtons.setTokens({dataKey:F,key:c}),k=u?y.removeClass+" disabled":y.removeClass;return a&&(_=g._getLayoutTemplate("actionDelete").setTokens({removeClass:k,removeIcon:y.removeIcon,removeTitle:y.removeTitle,dataUrl:w,dataKey:F,key:c})),n&&(x=g._getLayoutTemplate("actionRotate").setTokens({rotateClass:y.rotateClass,rotateIcon:y.rotateIcon,rotateTitle:y.rotateTitle})),t&&(P=g._getLayoutTemplate("actionUpload").setTokens({uploadClass:y.uploadClass,uploadIcon:y.uploadIcon,uploadTitle:y.uploadTitle})),r&&(T=g._getLayoutTemplate("actionDownload").setTokens({downloadClass:y.downloadClass,downloadIcon:y.downloadIcon,downloadTitle:y.downloadTitle,downloadUrl:m||g.initialPreviewDownloadUrl}),T=T.setTokens({filename:h,key:c})),s&&(b=g._getLayoutTemplate("actionZoom").setTokens({zoomClass:y.zoomClass,zoomIcon:y.zoomIcon,zoomTitle:y.zoomTitle})),o&&d&&(C="drag-handle-init "+y.dragClass,v=g._getLayoutTemplate("actionDrag").setTokens({dragClass:C,dragTitle:y.dragTitle,dragIcon:y.dragIcon})),I.setTokens({delete:_,upload:P,download:T,rotate:x,zoom:b,drag:v,other:A})},_browse:function(e){var t=this;e&&e.isDefaultPrevented()||!t._raise("filebrowse")||(t.isError&&!t.isAjaxUpload&&t.clear(),t.focusCaptionOnBrowse&&t.$captionContainer.focus())},_change:function(e){var t=this;if(p(document.body).off("focusin.fileinput focusout.fileinput"),t.changeTriggered){t._toggleLoading("hide");return}t._toggleLoading("show");var r=t.$element,a=arguments.length>1,n=t.isAjaxUpload,s,o=a?arguments[1]:r[0].files,u=t.fileManager.count(),f,c,d,m=l.isEmpty(r.attr("multiple")),h=!n&&m?1:t.maxFileCount,g=t.maxTotalFileCount,w=g>0&&g>h,b=m&&u>0,v=function(C,F,_,P){var T=p.extend(!0,{},t._getOutData(null,{},{},o),{id:_,index:P}),I={id:_,index:P,file:F,files:o};return t.isPersistentError=!0,t._toggleLoading("hide"),n?t._showFileError(C,T):t._showError(C,I)},x=function(C,F,_){var P=_?t.msgTotalFilesTooMany:t.msgFilesTooMany;P=P.replace("{m}",F).replace("{n}",C),t.isError=v(P,null,null,null),t.$captionContainer.removeClass("icon-visible"),t._setCaption("",!0),t.$container.removeClass("file-input-new file-input-ajax-new")};if(t.reader=null,t._resetUpload(),t._hideFileIcon(),t.dropZoneEnabled&&t.$container.find(".file-drop-zone ."+t.dropZoneTitleClass).remove(),n||(e.target&&e.target.files===void 0?o=e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:o=e.target.files||{}),s=o,l.isEmpty(s)||s.length===0){n||t.clear(),t._raise("fileselectnone");return}if(t._resetErrors(),d=s.length,c=n?t.fileManager.count()+d:d,f=t._getFileCount(c,w?!1:void 0),h>0&&f>h){if(!t.autoReplace||d>h){x(t.autoReplace&&d>h?d:f,h);return}f>h&&t._resetPreviewThumbs(n)}else{if(w&&(f=t._getFileCount(c,!0),g>0&&f>g)){if(!t.autoReplace||d>h){x(t.autoReplace&&d>g?d:f,g,!0);return}f>h&&t._resetPreviewThumbs(n)}!n||b?(t._resetPreviewThumbs(!1),b&&t.clearFileStack()):n&&u===0&&(!t.previewCache.count(!0)||t.overwriteInitial)&&t._resetPreviewThumbs(!0)}t.autoReplace&&t._getThumbs().each(function(){var C=p(this);(C.hasClass("file-preview-success")||C.hasClass("file-preview-error"))&&C.remove()}),t.readFiles(s),t._toggleLoading("hide")},_abort:function(e){var t=this,r;return t.ajaxAborted&&typeof t.ajaxAborted=="object"&&t.ajaxAborted.message!==void 0?(r=p.extend(!0,{},t._getOutData(null),e),r.abortData=t.ajaxAborted.data||{},r.abortMessage=t.ajaxAborted.message,t._setProgress(101,t.$progress,t.msgCancelled),t._showFileError(t.ajaxAborted.message,r,"filecustomerror"),t.cancel(),t.unlock(),!0):!!t.ajaxAborted},_resetFileStack:function(){var e=this,t=0;e._getThumbs().each(function(){var r=p(this),a=r.attr("data-fileindex"),n=r.attr("id");a==="-1"||a===-1||(e._getThumbFile(r)?r.attr({"data-fileindex":"-1"}):(r.attr({"data-fileindex":t}),t++),e._getZoom(n).attr({"data-fileindex":r.attr("data-fileindex")}))})},_isFileSelectionValid:function(e){var t=this;return e=e||0,t.required&&!t.getFilesCount()?(t.$errorContainer.html(""),t._showFileError(t.msgFileRequired),!1):t.minFileCount>0&&t._getFileCount(e)<t.minFileCount?(t._noFilesError({}),!1):!0},_canPreview:function(e){var t=this;if(!e||!t.showPreview||!t.$preview||!t.$preview.length)return!1;var r=e.name||"",a=e.type||"",n=(e.size||0)/t.bytesToKB,s=t._parseFileType(a,r),o,u,f,c,d=t.allowedPreviewTypes,m=t.allowedPreviewMimeTypes,h=t.allowedPreviewExtensions||[],g=t.disabledPreviewTypes,w=t.disabledPreviewMimeTypes,b=t.disabledPreviewExtensions||[],v=t.maxFilePreviewSize&&parseFloat(t.maxFilePreviewSize)||0,x=new RegExp("\\.("+h.join("|")+")$","i"),C=new RegExp("\\.("+b.join("|")+")$","i");return o=!d||d.indexOf(s)!==-1,u=!m||m.indexOf(a)!==-1,f=!h.length||l.compare(r,x),c=g&&g.indexOf(s)!==-1||w&&w.indexOf(a)!==-1||b.length&&l.compare(r,C)||v&&!isNaN(v)&&n>v,!c&&(o||u||f)},addToStack:function(e,t){var r=this;r.stackIsUpdating=!0,r.fileManager.add(e,t),r._refreshPreview(),r.stackIsUpdating=!1},clearFileStack:function(){var e=this;return e.fileManager.clear(),e._initResumableUpload(),e.enableResumableUpload?(e.showPause===null&&(e.showPause=!0),e.showCancel===null&&(e.showCancel=!1)):(e.showPause=!1,e.showCancel===null&&(e.showCancel=!0)),e.$element},getFileStack:function(){return this.fileManager.stack},getFileList:function(){return this.fileManager.list()},getFilesSize:function(){return this.fileManager.getTotalSize()},getFilesCount:function(e){var t=this,r=t.isAjaxUpload?t.fileManager.count():t._inputFileCount();return e&&(r+=t.previewCache.count(!0)),t._getFileCount(r)},_initCapStatus:function(e){var t=this,r=t.$caption;r.removeClass("is-valid file-processing"),e&&(e==="processing"?r.addClass("file-processing"):r.addClass("is-valid"))},_toggleLoading:function(e){var t=this;t.$previewStatus.html(e==="hide"?"":t.msgProcessing),t.$container.removeClass("file-thumb-loading"),t._initCapStatus(e==="hide"?"":"processing"),e!=="hide"&&(t.dropZoneEnabled&&t.$container.find(".file-drop-zone ."+t.dropZoneTitleClass).remove(),t.$container.addClass("file-thumb-loading"))},_initFileSelected:function(){var e=this,t=e.$element,r=p(document.body),a="focusin.fileinput focusout.fileinput";r.length?r.off(a).on("focusout.fileinput",function(){e._toggleLoading("show")}).on("focusin.fileinput",function(){setTimeout(function(){t.val()||e._setFileDropZoneTitle(),r.off(a),e._toggleLoading("hide")},2500)}):e._toggleLoading("hide")},readFiles:function(e){this.reader=new FileReader;var t=this,r=t.reader,a=t.$previewContainer,n=t.$previewStatus,s=t.msgLoading,o=t.msgProgress,u=t.previewInitId,f=e.length,c=t.fileTypeSettings,d,m=t.allowedFileTypes,h=m?m.length:0,g=t.allowedFileExtensions,w=l.isEmpty(g)?"":g.join(", "),b=function(v,x,C,F,_){var P,T=p.extend(!0,{},t._getOutData(null,{},{},e),{id:C,index:F,fileId:_}),I={id:C,index:F,fileId:_,file:x,files:e};Object.values(e).forEach(y=>{t._previewDefault(y,!0)}),P=t._getFrame(C,!0),t._toggleLoading("hide"),t.isAjaxUpload?setTimeout(function(){d(F+1)},t.processDelay):(t.unlock(),f=0),t.removeFromPreviewOnError&&P.length?P.remove():(t._initFileActions(),P.find(".kv-file-upload").remove()),t.isPersistentError=!0,t.isError=t.isAjaxUpload?t._showFileError(v,T):t._showError(v,I),t._updateFileDetails(f)};t.fileManager.clearImages(),p.each(e,function(v,x){var C=t.fileTypeSettings.image;C&&C(x.type)&&t.fileManager.totalImages++}),d=function(v){var x=t.$errorContainer,C,F=t.fileManager;if(v>=f){t.unlock(),t.duplicateErrors.length&&(C="<li>"+t.duplicateErrors.join("</li><li>")+"</li>",x.find("ul").length===0?l.setHtml(x,t.errorCloseButton+"<ul>"+C+"</ul>"):x.find("ul").append(C),x.fadeIn(t.fadeDelay),t._handler(x.find(".kv-error-close"),"click",function(){x.fadeOut(t.fadeDelay)}),t.duplicateErrors=[]),t.isAjaxUpload?(t._raise("filebatchselected",[F.stack]),F.count()===0&&!t.isError&&t.reset()):t._raise("filebatchselected",[e]),a.removeClass("file-thumb-loading"),t._initCapStatus("valid"),n.html("");return}t.lock(!0);var _=e[v],P,T,I,y=_&&_.size||0,A=t._getSize(y,!0),k,S,D=c.image,E,$,j,B,z,ee=y/t.bytesToKB,K="",G,Z=0,O="",L,N,te=!1,q,V=0,J,Y,Q;if(Q=function(R){R=R||_,P=L=t._getFileId(_),T=u+"-"+P,G=l.createObjectURL(R),z=t._getFileName(_,"")},Y=function(){var R=!!F.loadedImages[P],ae=o.setTokens({index:v+1,files:f,percent:50,name:z});setTimeout(function(){n.html(ae),t._updateFileDetails(f),t.getFilesCount(!0)>0&&t.getFrames(":visible")&&t.$dropZone.find("."+t.dropZoneTitleClass).remove(),d(v+1)},t.processDelay),t._raise("fileloaded",[_,T,P,v,r])&&t.isAjaxUpload?R||F.add(_):R&&F.removeFile(P)},!!_){if(Q(),h>0)for(k=0;k<h;k++)j=m[k],B=t.msgFileTypes[j]||j,O+=k===0?B:", "+B;if(z===!1){d(v+1);return}if(z.length===0){S=t.msgInvalidFileName.replace("{name}",l.htmlEncode(l.getFileName(_),"[unknown]")),b(S,_,T,v,L);return}if(l.isEmpty(g)||(K=new RegExp("\\.("+g.join("|")+")$","i")),t.isAjaxUpload&&F.exists(L)||t._getFrame(T,!0).length){var M={id:T,index:v,fileId:L,file:_,files:e};S=t.msgDuplicateFile.setTokens({name:z,size:A}),t.isAjaxUpload?(t.stackIsUpdating||(t.duplicateErrors.push(S),t.isDuplicateError=!0,t._raise("fileduplicateerror",[_,L,z,A,T,v])),d(v+1),t._updateFileDetails(f)):(t._showError(S,M),t.unlock(),f=0,t._clearFileInput(),t.reset(),t._updateFileDetails(f));return}if(t.maxMultipleFileSize>0&&e.length>1){var U=[],ue=0;if(Object.values(e).forEach(R=>{ue=ue+R.size/t.bytesToKB,U.push(R.name)}),ue>t.maxMultipleFileSize){S=t.msgMultipleSizeTooLarge.setTokens({name:U,size:t._getSize(ue,!0),maxSize:t._getSize(t.maxMultipleFileSize*t.bytesToKB,!0)}),b(S,_,T,v,L);return}}else if(t.maxFileSize>0&&ee>t.maxFileSize){S=t.msgSizeTooLarge.setTokens({name:z,size:A,maxSize:t._getSize(t.maxFileSize*t.bytesToKB,!0)}),b(S,_,T,v,L);return}if(t.minFileSize!==null&&ee<=l.getNum(t.minFileSize)){S=t.msgSizeTooSmall.setTokens({name:z,size:A,minSize:t._getSize(t.minFileSize*t.bytesToKB,!0)}),b(S,_,T,v,L);return}if(!l.isEmpty(m)&&l.isArray(m)){for(k=0;k<m.length;k+=1)$=m[k],q=c[$],Z+=!q||typeof q!="function"?0:q(_.type,l.getFileName(_))?1:0;if(Z===0){S=t.msgInvalidFileType.setTokens({name:z,types:O}),b(S,_,T,v,L);return}}if(Z===0&&!l.isEmpty(g)&&l.isArray(g)&&!l.isEmpty(K)&&(E=l.compare(z,K),Z+=l.isEmpty(E)?0:E.length,Z===0)){S=t.msgInvalidFileExtension.setTokens({name:z,extensions:w}),b(S,_,T,v,L);return}if(!t._canPreview(_)){N=t._raise("filebeforeload",[_,v,r]),t.isAjaxUpload&&N&&F.add(_),t.showPreview&&N&&(a.addClass("file-thumb-loading"),t._initCapStatus("processing"),t._previewDefault(_),t._initFileActions()),setTimeout(function(){N&&t._updateFileDetails(f),d(v+1),t._raise("fileloaded",[_,T,P,v])},10);return}J=D(_.type,z),n.html(s.replace("{index}",v+1).replace("{files}",f)),a.addClass("file-thumb-loading"),t._initCapStatus("processing"),r.onerror=function(R){t._errorHandler(R,z)},r.onload=function(R){var ae,ie,se,me,ge=[],ce,ne,he=function(W,le){if(l.isEmpty(W)&&(ce=l.arrayBuffer2String(r.result),W=l.isSvg(ce)?"image/svg+xml":l.getMimeType(ae,ce,_.type)),ie={name:z,type:W||""},le&&typeof File<"u")try{var be=ie.filename=z+"."+le;I=new File([_],be,{type:ie.type}),Q(I)}catch{}if(J=D(W,""),J){var pe=new FileReader;pe.onerror=function(de){t._errorHandler(de,z)},pe.onload=function(de){if(t.isAjaxUpload&&!t._raise("filebeforeload",[_,v,r])){te=!0,t._resetCaption(),r.abort(),n.html(""),a.removeClass("file-thumb-loading"),t._initCapStatus("valid"),t.enable();return}t._previewFile(v,_,de,G,ie),t._initFileActions(),Y()},pe.readAsDataURL(_);return}if(t.isAjaxUpload&&!t._raise("filebeforeload",[_,v,r])){te=!0,t._resetCaption(),r.abort(),n.html(""),a.removeClass("file-thumb-loading"),t._initCapStatus("valid"),t.enable();return}t._previewFile(v,_,R,G,ie),t._initFileActions(),Y()};if(ne=_.type,ie={name:z,type:ne},p.each(c,function(W,le){W!=="object"&&W!=="other"&&typeof le=="function"&&le(ne,z)&&V++}),typeof FileTypeParser<"u")se=new Uint8Array(R.target.result),new FileTypeParser().parse(se).then(function(W){he(W&&W.mime||ne,W&&W.ext||"")});else{if(V===0){for(se=new Uint8Array(R.target.result),k=0;k<se.length;k++)me=se[k].toString(16),ge.push(me);ae=ge.join("").toLowerCase().substring(0,8),ne=l.getMimeType(ae,"","")}he(ne)}},r.onprogress=function(R){if(R.lengthComputable){var ae=R.loaded/R.total*100,ie=Math.ceil(ae);S=o.setTokens({index:v+1,files:f,percent:ie,name:z}),setTimeout(function(){te||n.html(S)},t.processDelay)}},r.readAsArrayBuffer(_)}},d(0),t._updateFileDetails(f)},lock:function(e){var t=this,r=t.$container;return t._resetErrors(),t.disable(),!e&&t.showCancel&&r.find(".fileinput-cancel").show(),!e&&t.showPause&&r.find(".fileinput-pause").show(),t._initCapStatus("processing"),t._raise("filelock",[t.fileManager.stack,t._getExtraData()]),t.$element},unlock:function(e){var t=this,r=t.$container;return e===void 0&&(e=!0),t.enable(),r.removeClass("is-locked"),t.showCancel&&r.find(".fileinput-cancel").hide(),t.showPause&&r.find(".fileinput-pause").hide(),e&&t._resetFileStack(),t._initCapStatus(),t._raise("fileunlock",[t.fileManager.stack,t._getExtraData()]),t.$element},resume:function(){var e=this,t=e.fileManager,r=!1,a=e.resumableManager;return t.bpsLog=[],t.bps=0,e.enableResumableUpload&&(e.paused?e._toggleResumableProgress(e.progressPauseTemplate,e.msgUploadResume):r=!0,e.paused=!1,r&&e._toggleResumableProgress(e.progressInfoTemplate,e.msgUploadBegin),setTimeout(function(){a.upload()},e.processDelay)),e.$element},paste:function(e){var t=this,r=e.clipboardData||e.originalEvent.clipboardData;return t._addFilesFromSystem(e,r,"filePaste"),t.$element},pause:function(){var e=this,t=e.resumableManager,r=e.ajaxRequests,a=r.length,n,s=t.getProgress(),o=e.fileActionSettings,u=e.taskManager,f=u.getPool(t.id);if(e.enableResumableUpload)f&&f.cancel();else return e.$element;if(e._raise("fileuploadpaused",[e.fileManager,t]),a>0)for(n=0;n<a;n+=1)e.paused=!0,r[n].abort();return e.showPreview&&e._getThumbs().each(function(){var c=p(this),d=e._getLayoutTemplate("stats"),m,h=c.find(".file-upload-indicator");c.removeClass("file-uploading"),h.attr("title")===o.indicatorLoadingTitle&&(e._setThumbStatus(c,"Paused"),m=d.setTokens({pendingTime:e.msgPaused,uploadSpeed:""}),e.paused=!0,e._setProgress(s,c.find(".file-thumb-progress"),s+"%",m)),e._getThumbFile(c)||c.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")}),e._setProgress(101,e.$progress,e.msgPaused),e.$element},cancel:function(){var e=this,t=e.ajaxRequests,r=e.resumableManager,a=e.taskManager,n=r?a.getPool(r.id):void 0,s=t.length,o;if(e.enableResumableUpload&&n?(n.cancel().done(function(){e._setProgressCancelled()}),r.reset(),e._raise("fileuploadcancelled",[e.fileManager,r])):(e.ajaxPool&&e.ajaxPool.cancel(),e._raise("fileuploadcancelled",[e.fileManager])),e._initAjax(),s>0)for(o=0;o<s;o+=1)e.cancelling=!0,t[o].abort();return e._getThumbs().each(function(){var u=p(this),f=u.find(".file-thumb-progress");u.removeClass("file-uploading"),e._setProgress(0,f),f.hide(),e._getThumbFile(u)||(u.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),u.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),e.unlock()}),setTimeout(function(){e._setProgressCancelled()},e.processDelay),e.$element},clear:function(){var e=this,t;if(e._raise("fileclear"))return e.clearInput=!0,e.$btnUpload.removeAttr("disabled"),e._getThumbs().find("video,audio,img").each(function(){l.cleanMemory(p(this))}),e._clearFileInput(),e._resetUpload(),e.clearFileStack(),e.isDuplicateError=!1,e.isPersistentError=!1,e._resetErrors(!0),e._hasInitialPreview()?(e._showFileIcon(),e._resetPreview(),e._initPreviewActions(),e.$container.removeClass("file-input-new")):(e._getThumbs().each(function(){e._clearObjects(p(this))}),e.isAjaxUpload&&(e.previewCache.data={}),e.$preview.html(""),t=!e.overwriteInitial&&e.initialCaption.length>0?e.initialCaption:"",e.$caption.attr("title","").val(t),l.addCss(e.$container,"file-input-new"),e._validateDefaultPreview()),e.$container.find(l.FRAMES).length===0&&(e._initCaption()||e.$captionContainer.removeClass("icon-visible")),e._hideFileIcon(),e.focusCaptionOnClear&&e.$captionContainer.focus(),e._setFileDropZoneTitle(),e._raise("filecleared"),e.$element},reset:function(){var e=this;if(e._raise("filereset"))return e.lastProgress=0,e._resetPreview(),e.$container.find(".fileinput-filename").text(""),l.addCss(e.$container,"file-input-new"),e.getFrames().length&&e.$container.removeClass("file-input-new"),e.clearFileStack(),e._setFileDropZoneTitle(),e.$element},disable:function(){var e=this,t=e.$container;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),t.addClass("is-locked"),l.addCss(t.find(".btn-file"),"disabled"),t.find(".kv-fileinput-caption").addClass("file-caption-disabled"),t.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),e._initDragDrop(),e.$element},enable:function(){var e=this,t=e.$container;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),t.removeClass("is-locked"),t.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),t.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),t.find(".btn-file").removeClass("disabled"),e._initDragDrop(),e.$element},upload:function(){var e=this,t=e.fileManager,r=t.count(),a,n,s=e.taskManager,o=!p.isEmptyObject(e._getExtraData());if(t.bpsLog=[],t.bps=0,!(!e.isAjaxUpload||e.isDisabled||!e._isFileSelectionValid(r))){if(e.lastProgress=0,e._resetUpload(),r===0&&!o){e._showFileError(e.msgUploadEmpty);return}if(e.cancelling=!1,e.uploadInitiated=!0,e._showProgress(),e.lock(),r===0&&o){e._setProgress(2),e._uploadExtraOnly();return}if(e.enableResumableUpload)return e.resume();if(e.uploadAsync||e.enableResumableUpload){if(n=e._getOutData(null),!e._checkBatchPreupload(n))return;e.fileBatchCompleted=!1,e.uploadCache=[],p.each(e.getFileStack(),function(f){var c=e._getThumbId(f);e.uploadCache.push({id:c,content:null,config:null,tags:null,append:!0})}),e.$preview.find(".file-preview-initial").removeClass(l.SORT_CSS),e._initSortable()}if(e._setProgress(2),e.hasInitData=!1,e.uploadAsync){a=0;var u=e.ajaxPool=s.addPool(l.uniqId());p.each(e.getFileStack(),function(f){u.addTask(f+a,function(c){e._uploadSingle(a,f,!0,c)}),a++}),u.run(e.maxAjaxThreads).done(function(){e._log("Async upload batch completed successfully."),e._raise("filebatchuploadsuccess",[t.stack,e._getExtraData()])}).fail(function(){e._log("Async upload batch completed with errors."),e._raise("filebatchuploaderror",[t.stack,e._getExtraData()])});return}return e._uploadBatch(),e.$element}},destroy:function(){var e=this,t=e.$form,r=e.$container,a=e.$element,n=e.namespace;return p(document).off(n),p(window).off(n),t&&t.length&&t.off(n),e.isAjaxUpload&&e._clearFileInput(),e._cleanup(),e._initPreviewCache(),a.insertBefore(r).off(n).removeData(),r.off().remove(),a},refresh:function(e){var t=this,r=t.$element;return typeof e!="object"||l.isEmpty(e)?e=t.options:e=p.extend(!0,{},t.options,e),t._init(e,!0),t._listen(),r},zoom:function(e){var t=this,r=t._getFrame(e);t._showModal(r)},getExif:function(e){var t=this,r=t._getFrame(e);return r&&r.data("exif")||null},getFrames:function(e){var t=this,r;return e=e||"",r=t.$preview.find(l.FRAMES+e),t.reversePreviewOrder&&(r=p(r.get().reverse())),r},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}},p.fn.fileinput=function(e){if(!(!l.hasFileAPISupport()&&!l.isIE(9))){var t=Array.apply(null,arguments),r=[];switch(t.shift(),this.each(function(){var a={};typeof e=="object"&&(a=p.extend(!0,{},p.fn.fileinput.defaults,e));var n=p(this),s=n.data("fileinput"),o=a.theme||n.data("theme")||p.fn.fileinput.defaults.theme,u={},f={},c=a.language||n.data("language")||p.fn.fileinput.defaults.language||"en",d;s||(o&&(f=p.fn.fileinputThemes[o]||{}),c!=="en"&&!l.isEmpty(p.fn.fileinputLocales[c])&&(u=p.fn.fileinputLocales[c]||{}),d=p.extend(!0,{},p.fn.fileinput.defaults,f,p.fn.fileinputLocales.en,u,a,n.data()),s=new H(this,d),n.data("fileinput",s)),typeof e=="string"&&r.push(s[e].apply(s,t))}),r.length){case 0:return this;case 1:return r[0];default:return r}}};var re='class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}',X="btn btn-sm btn-kv "+l.defaultButtonCss(),fe="btn "+l.defaultButtonCss();p.fn.fileinput.defaults={language:"en",bytesToKB:1024,showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showUploadStats:!0,showCancel:null,showPause:null,showClose:!0,showUploadedThumbs:!0,showConsoleLogs:!1,browseOnZoneClick:!1,autoReplace:!1,showDescriptionClose:!0,autoOrientImage:function(){var e=window.navigator.userAgent,t=!!e.match(/WebKit/i),r=!!e.match(/iP(od|ad|hone)/i),a=r&&t&&!e.match(/CriOS/i);return!a},autoOrientImageInitial:!0,showExifErrorLog:!1,required:!1,rtl:!1,hideThumbnailContent:!1,encodeUrl:!0,focusCaptionOnBrowse:!0,focusCaptionOnClear:!0,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"",inputGroupClass:"",mainTemplate:null,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,sanitizeZoomCache:function(e){var t=l.createElement(e);return t.find("input,textarea,select,datalist,form,.file-thumbnail-footer").remove(),t.html()},previewZoomButtonIcons:{prev:'<i class="bi-chevron-left"></i>',next:'<i class="bi-chevron-right"></i>',rotate:'<i class="bi-arrow-clockwise"></i>',toggleheader:'<i class="bi-arrows-expand"></i>',fullscreen:'<i class="bi-arrows-fullscreen"></i>',borderless:'<i class="bi-arrows-angle-expand"></i>',close:'<i class="bi-x-lg"></i>'},previewZoomButtonClasses:{prev:"btn btn-default btn-outline-secondary btn-navigate",next:"btn btn-default btn-outline-secondary btn-navigate",rotate:X,toggleheader:X,fullscreen:X,borderless:X,close:X},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:!1,preferIconicZoomPreview:!1,alwaysPreviewFileExtensions:[],rotatableFileExtensions:["jpg","jpeg","png","gif"],allowedFileTypes:null,allowedFileExtensions:null,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedPreviewExtensions:null,disabledPreviewTypes:void 0,disabledPreviewExtensions:["msi","exe","com","zip","rar","app","vb","scr"],disabledPreviewMimeTypes:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="bi-file-earmark-fill"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="bi-folder2-open"></i> ',browseClass:"btn btn-primary",removeIcon:'<i class="bi-trash"></i>',removeClass:fe,cancelIcon:'<i class="bi-slash-circle"></i>',cancelClass:fe,pauseIcon:'<i class="bi-pause-fill"></i>',pauseClass:fe,uploadIcon:'<i class="bi-upload"></i>',uploadClass:fe,uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadParamNames:{chunkCount:"chunkCount",chunkIndex:"chunkIndex",chunkSize:"chunkSize",chunkSizeStart:"chunkSizeStart",chunksUploaded:"chunksUploaded",fileBlob:"fileBlob",fileId:"fileId",fileName:"fileName",fileRelativePath:"fileRelativePath",fileSize:"fileSize",retryCount:"retryCount"},maxAjaxThreads:5,fadeDelay:800,processDelay:100,bitrateUpdateDelay:500,queueDelay:10,progressDelay:0,enableResumableUpload:!1,resumableUploadOptions:{fallback:null,testUrl:null,chunkSize:2048,maxThreads:4,maxRetries:3,showErrorLog:!0,retainErrorHistory:!1,skipErrorsAndProceed:!1},uploadExtraData:{},zoomModalHeight:485,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:-1,maxFileSize:0,maxMultipleFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,maxTotalFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="bi-exclamation-circle-fill"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-striped active progress-bar-animated",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active progress-bar-animated",progressInfoClass:"progress-bar bg-info progress-bar-info progress-bar-striped active progress-bar-animated",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressPauseClass:"progress-bar bg-primary progress-bar-primary progress-bar-striped active progress-bar-animated",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:void 0,slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",preProcessUpload:null,ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1,usePdfRenderer:function(){var e=!!window.MSInputMethodContext&&!!document.documentMode;return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)||e},pdfRendererUrl:"",pdfRendererTemplate:"<iframe "+re+"></iframe>",tabIndexConfig:{browse:500,remove:500,upload:500,cancel:null,pause:null,modal:-1}},p.fn.fileinputLocales.en={sizeUnits:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],bitRateUnits:["B/s","KB/s","MB/s","GB/s","TB/s","PB/s","EB/s","ZB/s","YB/s"],fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear all unprocessed files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",pauseLabel:"Pause",pauseTitle:"Pause ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPaused:"Paused",msgPlaceholder:"Select {files} ...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size}</b>) is too small and must be larger than <b>{minSize}</b>.',msgSizeTooLarge:'File "{name}" (<b>{size}</b>) exceeds maximum allowed upload size of <b>{maxSize}</b>.',msgMultipleSizeTooLarge:'Files "{name}" (<b>{size}</b>) exceeds maximum allowed upload size of <b>{maxSize}</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgTotalFilesTooMany:"You can upload a maximum of <b>{m}</b> files (<b>{n}</b> files detected).",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing &hellip;",msgUploadBegin:"Initializing &hellip;",msgUploadEnd:"Done",msgUploadResume:"Resuming upload &hellip;",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Upload Error",msgDeleteError:"Delete Error",msgProgressError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgProcessing:"Processing ...",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least <b>{size} px</b> (detected <b>{dimension} px</b>).',msgImageHeightSmall:'Height of image file "{name}" must be at least <b>{size} px</b> (detected <b>{dimension} px</b>).',msgImageWidthLarge:'Width of image file "{name}" cannot exceed <b>{size} px</b> (detected <b>{dimension} px</b>).',msgImageHeightLarge:'Height of image file "{name}" cannot exceed <b>{size} px</b> (detected <b>{dimension} px</b>).',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",msgDuplicateFile:'File "{name}" of same size "{size}" has already been selected earlier. Skipping duplicate selection.',msgResumableUploadRetriesExceeded:"Upload aborted beyond <b>{max}</b> retries for file <b>{file}</b>! Error Details: <pre>{error}</pre>",msgPendingTime:"{time} remaining",msgCalculatingTime:"calculating time remaining",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",rotate:"Rotate 90 deg. clockwise",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},p.fn.fileinput.Constructor=H,p(document).ready(function(){var e=p("input.file[type=file]");e.length&&e.fileinput()})})})();var ve=xe.exports;const ye=we(ve),Fe=Ce({__proto__:null,default:ye},[ve]);export{Fe as f};
