import{g as fl,c as hl}from"./_commonjsHelpers-Cpj98o6Y.js";function dl(Se,b){for(var M=0;M<b.length;M++){const Ct=b[M];if(typeof Ct!="string"&&!Array.isArray(Ct)){for(const kt in Ct)if(kt!=="default"&&!(kt in Se)){const De=Object.getOwnPropertyDescriptor(Ct,kt);De&&Object.defineProperty(Se,kt,De.get?De:{enumerable:!0,get:()=>Ct[kt]})}}}return Object.freeze(Object.defineProperty(Se,Symbol.toStringTag,{value:"Module"}))}function gl(Se){throw new Error('Could not dynamically require "'+Se+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ms={exports:{}},Zr={exports:{}},xs;function pl(){return xs||(xs=1,function(Se){(function(){var b={version:"3.5.17"},M=[].slice,Ct=function(t){return M.call(t)},kt=this.document;function De(t){return t&&(t.ownerDocument||t.document||t).documentElement}function be(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(kt)try{Ct(kt.documentElement.childNodes)[0].nodeType}catch{Ct=function(i){for(var r=i.length,o=new Array(r);r--;)o[r]=i[r];return o}}if(Date.now||(Date.now=function(){return+new Date}),kt)try{kt.createElement("DIV").style.setProperty("opacity",0,"")}catch{var mt=this.Element.prototype,Kt=mt.setAttribute,Hn=mt.setAttributeNS,Xt=this.CSSStyleDeclaration.prototype,ne=Xt.setProperty;mt.setAttribute=function(i,r){Kt.call(this,i,r+"")},mt.setAttributeNS=function(i,r,o){Hn.call(this,i,r,o+"")},Xt.setProperty=function(i,r,o){ne.call(this,i,r+"",o)}}b.ascending=Gt;function Gt(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}b.descending=function(t,i){return i<t?-1:i>t?1:i>=t?0:NaN},b.min=function(t,i){var r=-1,o=t.length,s,c;if(arguments.length===1){for(;++r<o;)if((c=t[r])!=null&&c>=c){s=c;break}for(;++r<o;)(c=t[r])!=null&&s>c&&(s=c)}else{for(;++r<o;)if((c=i.call(t,t[r],r))!=null&&c>=c){s=c;break}for(;++r<o;)(c=i.call(t,t[r],r))!=null&&s>c&&(s=c)}return s},b.max=function(t,i){var r=-1,o=t.length,s,c;if(arguments.length===1){for(;++r<o;)if((c=t[r])!=null&&c>=c){s=c;break}for(;++r<o;)(c=t[r])!=null&&c>s&&(s=c)}else{for(;++r<o;)if((c=i.call(t,t[r],r))!=null&&c>=c){s=c;break}for(;++r<o;)(c=i.call(t,t[r],r))!=null&&c>s&&(s=c)}return s},b.extent=function(t,i){var r=-1,o=t.length,s,c,f;if(arguments.length===1){for(;++r<o;)if((c=t[r])!=null&&c>=c){s=f=c;break}for(;++r<o;)(c=t[r])!=null&&(s>c&&(s=c),f<c&&(f=c))}else{for(;++r<o;)if((c=i.call(t,t[r],r))!=null&&c>=c){s=f=c;break}for(;++r<o;)(c=i.call(t,t[r],r))!=null&&(s>c&&(s=c),f<c&&(f=c))}return[s,f]};function le(t){return t===null?NaN:+t}function Jt(t){return!isNaN(t)}b.sum=function(t,i){var r=0,o=t.length,s,c=-1;if(arguments.length===1)for(;++c<o;)Jt(s=+t[c])&&(r+=s);else for(;++c<o;)Jt(s=+i.call(t,t[c],c))&&(r+=s);return r},b.mean=function(t,i){var r=0,o=t.length,s,c=-1,f=o;if(arguments.length===1)for(;++c<o;)Jt(s=le(t[c]))?r+=s:--f;else for(;++c<o;)Jt(s=le(i.call(t,t[c],c)))?r+=s:--f;if(f)return r/f},b.quantile=function(t,i){var r=(t.length-1)*i+1,o=Math.floor(r),s=+t[o-1],c=r-o;return c?s+c*(t[o]-s):s},b.median=function(t,i){var r=[],o=t.length,s,c=-1;if(arguments.length===1)for(;++c<o;)Jt(s=le(t[c]))&&r.push(s);else for(;++c<o;)Jt(s=le(i.call(t,t[c],c)))&&r.push(s);if(r.length)return b.quantile(r.sort(Gt),.5)},b.variance=function(t,i){var r=t.length,o=0,s,c,f=0,l=-1,h=0;if(arguments.length===1)for(;++l<r;)Jt(s=le(t[l]))&&(c=s-o,o+=c/++h,f+=c*(s-o));else for(;++l<r;)Jt(s=le(i.call(t,t[l],l)))&&(c=s-o,o+=c/++h,f+=c*(s-o));if(h>1)return f/(h-1)},b.deviation=function(){var t=b.variance.apply(this,arguments);return t&&Math.sqrt(t)};function Ae(t){return{left:function(i,r,o,s){for(arguments.length<3&&(o=0),arguments.length<4&&(s=i.length);o<s;){var c=o+s>>>1;t(i[c],r)<0?o=c+1:s=c}return o},right:function(i,r,o,s){for(arguments.length<3&&(o=0),arguments.length<4&&(s=i.length);o<s;){var c=o+s>>>1;t(i[c],r)>0?s=c:o=c+1}return o}}}var hn=Ae(Gt);b.bisectLeft=hn.left,b.bisect=b.bisectRight=hn.right,b.bisector=function(t){return Ae(t.length===1?function(i,r){return Gt(t(i),r)}:t)},b.shuffle=function(t,i,r){(o=arguments.length)<3&&(r=t.length,o<2&&(i=0));for(var o=r-i,s,c;o;)c=Math.random()*o--|0,s=t[o+i],t[o+i]=t[c+i],t[c+i]=s;return t},b.permute=function(t,i){for(var r=i.length,o=new Array(r);r--;)o[r]=t[i[r]];return o},b.pairs=function(t){for(var i=0,r=t.length-1,o=t[0],s=new Array(r<0?0:r);i<r;)s[i]=[o,o=t[++i]];return s},b.transpose=function(t){if(!(c=t.length))return[];for(var i=-1,r=b.min(t,qt),o=new Array(r);++i<r;)for(var s=-1,c,f=o[i]=new Array(c);++s<c;)f[s]=t[s][i];return o};function qt(t){return t.length}b.zip=function(){return b.transpose(arguments)},b.keys=function(t){var i=[];for(var r in t)i.push(r);return i},b.values=function(t){var i=[];for(var r in t)i.push(t[r]);return i},b.entries=function(t){var i=[];for(var r in t)i.push({key:r,value:t[r]});return i},b.merge=function(t){for(var i=t.length,r,o=-1,s=0,c,f;++o<i;)s+=t[o].length;for(c=new Array(s);--i>=0;)for(f=t[i],r=f.length;--r>=0;)c[--s]=f[r];return c};var at=Math.abs;b.range=function(t,i,r){if(arguments.length<3&&(r=1,arguments.length<2&&(i=t,t=0)),(i-t)/r===1/0)throw new Error("infinite range");var o=[],s=Yn(at(r)),c=-1,f;if(t*=s,i*=s,r*=s,r<0)for(;(f=t+r*++c)>i;)o.push(f/s);else for(;(f=t+r*++c)<i;)o.push(f/s);return o};function Yn(t){for(var i=1;t*i%1;)i*=10;return i}function qe(t,i){for(var r in i)Object.defineProperty(t.prototype,r,{value:i[r],enumerable:!1})}b.map=function(t,i){var r=new fe;if(t instanceof fe)t.forEach(function(l,h){r.set(l,h)});else if(Array.isArray(t)){var o=-1,s=t.length,c;if(arguments.length===1)for(;++o<s;)r.set(o,t[o]);else for(;++o<s;)r.set(i.call(t,c=t[o],o),c)}else for(var f in t)r.set(f,t[f]);return r};function fe(){this._=Object.create(null)}var pt="__proto__",Mt="\0";qe(fe,{has:Ve,get:function(t){return this._[Fe(t)]},set:function(t,i){return this._[Fe(t)]=i},remove:ut,keys:w,values:function(){var t=[];for(var i in this._)t.push(this._[i]);return t},entries:function(){var t=[];for(var i in this._)t.push({key:Qe(i),value:this._[i]});return t},size:Un,empty:Cn,forEach:function(t){for(var i in this._)t.call(this,Qe(i),this._[i])}});function Fe(t){return(t+="")===pt||t[0]===Mt?Mt+t:t}function Qe(t){return(t+="")[0]===Mt?t.slice(1):t}function Ve(t){return Fe(t)in this._}function ut(t){return(t=Fe(t))in this._&&delete this._[t]}function w(){var t=[];for(var i in this._)t.push(Qe(i));return t}function Un(){var t=0;for(var i in this._)++t;return t}function Cn(){for(var t in this._)return!1;return!0}b.nest=function(){var t={},i=[],r=[],o,s;function c(l,h,g){if(g>=i.length)return s?s.call(t,h):o?h.sort(o):h;for(var p=-1,x=h.length,m=i[g++],T,V,S,A=new fe,P;++p<x;)(P=A.get(T=m(V=h[p])))?P.push(V):A.set(T,[V]);return l?(V=l(),S=function(k,L){V.set(k,c(l,L,g))}):(V={},S=function(k,L){V[k]=c(l,L,g)}),A.forEach(S),V}function f(l,h){if(h>=i.length)return l;var g=[],p=r[h++];return l.forEach(function(x,m){g.push({key:x,values:f(m,h)})}),p?g.sort(function(x,m){return p(x.key,m.key)}):g}return t.map=function(l,h){return c(h,l,0)},t.entries=function(l){return f(c(b.map,l,0),0)},t.key=function(l){return i.push(l),t},t.sortKeys=function(l){return r[i.length-1]=l,t},t.sortValues=function(l){return o=l,t},t.rollup=function(l){return s=l,t},t},b.set=function(t){var i=new dn;if(t)for(var r=0,o=t.length;r<o;++r)i.add(t[r]);return i};function dn(){this._=Object.create(null)}qe(dn,{has:Ve,add:function(t){return this._[Fe(t+="")]=!0,t},remove:ut,values:w,size:Un,empty:Cn,forEach:function(t){for(var i in this._)t.call(this,Qe(i))}}),b.behavior={};function e(t){return t}b.rebind=function(t,i){for(var r=1,o=arguments.length,s;++r<o;)t[s=arguments[r]]=n(t,i,i[s]);return t};function n(t,i,r){return function(){var o=r.apply(i,arguments);return o===i?t:o}}function a(t,i){if(i in t)return i;i=i.charAt(0).toUpperCase()+i.slice(1);for(var r=0,o=u.length;r<o;++r){var s=u[r]+i;if(s in t)return s}}var u=["webkit","ms","moz","Moz","o","O"];function d(){}b.dispatch=function(){for(var t=new _,i=-1,r=arguments.length;++i<r;)t[arguments[i]]=v(t);return t};function _(){}_.prototype.on=function(t,i){var r=t.indexOf("."),o="";if(r>=0&&(o=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(o):this[t].on(o,i);if(arguments.length===2){if(i==null)for(t in this)this.hasOwnProperty(t)&&this[t].on(o,null);return this}};function v(t){var i=[],r=new fe;function o(){for(var s=i,c=-1,f=s.length,l;++c<f;)(l=s[c].on)&&l.apply(this,arguments);return t}return o.on=function(s,c){var f=r.get(s),l;return arguments.length<2?f&&f.on:(f&&(f.on=null,i=i.slice(0,l=i.indexOf(f)).concat(i.slice(l+1)),r.remove(s)),c&&i.push(r.set(s,{on:c})),t)},o}b.event=null;function y(){b.event.preventDefault()}function G(){for(var t=b.event,i;i=t.sourceEvent;)t=i;return t}function C(t){for(var i=new _,r=0,o=arguments.length;++r<o;)i[arguments[r]]=v(i);return i.of=function(s,c){return function(f){try{var l=f.sourceEvent=b.event;f.target=t,b.event=f,i[f.type].apply(s,c)}finally{b.event=l}}},i}b.requote=function(t){return t.replace(R,"\\$&")};var R=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$={}.__proto__?function(t,i){t.__proto__=i}:function(t,i){for(var r in i)t[r]=i[r]};function N(t){return $(t,J),t}var B=function(t,i){return i.querySelector(t)},Q=function(t,i){return i.querySelectorAll(t)},K=function(t,i){var r=t.matches||t[a(t,"matchesSelector")];return K=function(o,s){return r.call(o,s)},K(t,i)};typeof Sizzle=="function"&&(B=function(t,i){return Sizzle(t,i)[0]||null},Q=Sizzle,K=Sizzle.matchesSelector),b.selection=function(){return b.select(kt.documentElement)};var J=b.selection.prototype=[];J.select=function(t){var i=[],r,o,s,c;t=gt(t);for(var f=-1,l=this.length;++f<l;){i.push(r=[]),r.parentNode=(s=this[f]).parentNode;for(var h=-1,g=s.length;++h<g;)(c=s[h])?(r.push(o=t.call(c,c.__data__,h,f)),o&&"__data__"in c&&(o.__data__=c.__data__)):r.push(null)}return N(i)};function gt(t){return typeof t=="function"?t:function(){return B(t,this)}}J.selectAll=function(t){var i=[],r,o;t=yt(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],l=-1,h=f.length;++l<h;)(o=f[l])&&(i.push(r=Ct(t.call(o,o.__data__,l,s))),r.parentNode=o);return N(i)};function yt(t){return typeof t=="function"?t:function(){return Q(t,this)}}var vt="http://www.w3.org/1999/xhtml",xt={svg:"http://www.w3.org/2000/svg",xhtml:vt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};b.ns={prefix:xt,qualify:function(t){var i=t.indexOf(":"),r=t;return i>=0&&(r=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),xt.hasOwnProperty(r)?{space:xt[r],local:t}:t}},J.attr=function(t,i){if(arguments.length<2){if(typeof t=="string"){var r=this.node();return t=b.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(i in t)this.each(wt(i,t[i]));return this}return this.each(wt(t,i))};function wt(t,i){t=b.ns.qualify(t);function r(){this.removeAttribute(t)}function o(){this.removeAttributeNS(t.space,t.local)}function s(){this.setAttribute(t,i)}function c(){this.setAttributeNS(t.space,t.local,i)}function f(){var h=i.apply(this,arguments);h==null?this.removeAttribute(t):this.setAttribute(t,h)}function l(){var h=i.apply(this,arguments);h==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,h)}return i==null?t.local?o:r:typeof i=="function"?t.local?l:f:t.local?c:s}function bt(t){return t.trim().replace(/\s+/g," ")}J.classed=function(t,i){if(arguments.length<2){if(typeof t=="string"){var r=this.node(),o=(t=st(t)).length,s=-1;if(i=r.classList){for(;++s<o;)if(!i.contains(t[s]))return!1}else for(i=r.getAttribute("class");++s<o;)if(!it(t[s]).test(i))return!1;return!0}for(i in t)this.each(Vt(i,t[i]));return this}return this.each(Vt(t,i))};function it(t){return new RegExp("(?:^|\\s+)"+b.requote(t)+"(?:\\s+|$)","g")}function st(t){return(t+"").trim().split(/^|\s+/)}function Vt(t,i){t=st(t).map(_t);var r=t.length;function o(){for(var c=-1;++c<r;)t[c](this,i)}function s(){for(var c=-1,f=i.apply(this,arguments);++c<r;)t[c](this,f)}return typeof i=="function"?s:o}function _t(t){var i=it(t);return function(r,o){if(s=r.classList)return o?s.add(t):s.remove(t);var s=r.getAttribute("class")||"";o?(i.lastIndex=0,i.test(s)||r.setAttribute("class",bt(s+" "+t))):r.setAttribute("class",bt(s.replace(i," ")))}}J.style=function(t,i,r){var o=arguments.length;if(o<3){if(typeof t!="string"){o<2&&(i="");for(r in t)this.each(Lt(r,t[r],i));return this}if(o<2){var s=this.node();return be(s).getComputedStyle(s,null).getPropertyValue(t)}r=""}return this.each(Lt(t,i,r))};function Lt(t,i,r){function o(){this.style.removeProperty(t)}function s(){this.style.setProperty(t,i,r)}function c(){var f=i.apply(this,arguments);f==null?this.style.removeProperty(t):this.style.setProperty(t,f,r)}return i==null?o:typeof i=="function"?c:s}J.property=function(t,i){if(arguments.length<2){if(typeof t=="string")return this.node()[t];for(i in t)this.each(Tt(i,t[i]));return this}return this.each(Tt(t,i))};function Tt(t,i){function r(){delete this[t]}function o(){this[t]=i}function s(){var c=i.apply(this,arguments);c==null?delete this[t]:this[t]=c}return i==null?r:typeof i=="function"?s:o}J.text=function(t){return arguments.length?this.each(typeof t=="function"?function(){var i=t.apply(this,arguments);this.textContent=i??""}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},J.html=function(t){return arguments.length?this.each(typeof t=="function"?function(){var i=t.apply(this,arguments);this.innerHTML=i??""}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},J.append=function(t){return t=It(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})};function It(t){function i(){var o=this.ownerDocument,s=this.namespaceURI;return s===vt&&o.documentElement.namespaceURI===vt?o.createElement(t):o.createElementNS(s,t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return typeof t=="function"?t:(t=b.ns.qualify(t)).local?r:i}J.insert=function(t,i){return t=It(t),i=gt(i),this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})},J.remove=function(){return this.each(ie)};function ie(){var t=this.parentNode;t&&t.removeChild(this)}J.data=function(t,i){var r=-1,o=this.length,s,c;if(!arguments.length){for(t=new Array(o=(s=this[0]).length);++r<o;)(c=s[r])&&(t[r]=c.__data__);return t}function f(p,x){var m,T=p.length,V=x.length,S=Math.min(T,V),A=new Array(V),P=new Array(V),k=new Array(T),L,E;if(i){var I=new fe,F=new Array(T),D;for(m=-1;++m<T;)(L=p[m])&&(I.has(D=i.call(L,L.__data__,m))?k[m]=L:I.set(D,L),F[m]=D);for(m=-1;++m<V;)(L=I.get(D=i.call(x,E=x[m],m)))?L!==!0&&(A[m]=L,L.__data__=E):P[m]=Ut(E),I.set(D,!0);for(m=-1;++m<T;)m in F&&I.get(F[m])!==!0&&(k[m]=p[m])}else{for(m=-1;++m<S;)L=p[m],E=x[m],L?(L.__data__=E,A[m]=L):P[m]=Ut(E);for(;m<V;++m)P[m]=Ut(x[m]);for(;m<T;++m)k[m]=p[m]}P.update=A,P.parentNode=A.parentNode=k.parentNode=p.parentNode,l.push(P),h.push(A),g.push(k)}var l=zt([]),h=N([]),g=N([]);if(typeof t=="function")for(;++r<o;)f(s=this[r],t.call(s,s.parentNode.__data__,r));else for(;++r<o;)f(s=this[r],t);return h.enter=function(){return l},h.exit=function(){return g},h};function Ut(t){return{__data__:t}}J.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},J.filter=function(t){var i=[],r,o,s;typeof t!="function"&&(t=Ht(t));for(var c=0,f=this.length;c<f;c++){i.push(r=[]),r.parentNode=(o=this[c]).parentNode;for(var l=0,h=o.length;l<h;l++)(s=o[l])&&t.call(s,s.__data__,l,c)&&r.push(s)}return N(i)};function Ht(t){return function(){return K(this,t)}}J.order=function(){for(var t=-1,i=this.length;++t<i;)for(var r=this[t],o=r.length-1,s=r[o],c;--o>=0;)(c=r[o])&&(s&&s!==c.nextSibling&&s.parentNode.insertBefore(c,s),s=c);return this},J.sort=function(t){t=Dt.apply(this,arguments);for(var i=-1,r=this.length;++i<r;)this[i].sort(t);return this.order()};function Dt(t){return arguments.length||(t=Gt),function(i,r){return i&&r?t(i.__data__,r.__data__):!i-!r}}J.each=function(t){return Nt(this,function(i,r,o){t.call(i,i.__data__,r,o)})};function Nt(t,i){for(var r=0,o=t.length;r<o;r++)for(var s=t[r],c=0,f=s.length,l;c<f;c++)(l=s[c])&&i(l,c,r);return t}J.call=function(t){var i=Ct(arguments);return t.apply(i[0]=this,i),this},J.empty=function(){return!this.node()},J.node=function(){for(var t=0,i=this.length;t<i;t++)for(var r=this[t],o=0,s=r.length;o<s;o++){var c=r[o];if(c)return c}return null},J.size=function(){var t=0;return Nt(this,function(){++t}),t};function zt(t){return $(t,ot),t}var ot=[];b.selection.enter=zt,b.selection.enter.prototype=ot,ot.append=J.append,ot.empty=J.empty,ot.node=J.node,ot.call=J.call,ot.size=J.size,ot.select=function(t){for(var i=[],r,o,s,c,f,l=-1,h=this.length;++l<h;){s=(c=this[l]).update,i.push(r=[]),r.parentNode=c.parentNode;for(var g=-1,p=c.length;++g<p;)(f=c[g])?(r.push(s[g]=o=t.call(c.parentNode,f.__data__,g,l)),o.__data__=f.__data__):r.push(null)}return N(i)},ot.insert=function(t,i){return arguments.length<2&&(i=lt(this)),J.insert.call(this,t,i)};function lt(t){var i,r;return function(o,s,c){var f=t[c].update,l=f.length,h;for(c!=r&&(r=c,i=0),s>=i&&(i=s+1);!(h=f[i])&&++i<l;);return h}}b.select=function(t){var i;return typeof t=="string"?(i=[B(t,kt)],i.parentNode=kt.documentElement):(i=[t],i.parentNode=De(t)),N([i])},b.selectAll=function(t){var i;return typeof t=="string"?(i=Ct(Q(t,kt)),i.parentNode=kt.documentElement):(i=Ct(t),i.parentNode=null),N([i])},J.on=function(t,i,r){var o=arguments.length;if(o<3){if(typeof t!="string"){o<2&&(i=!1);for(r in t)this.each(Rt(r,t[r],i));return this}if(o<2)return(o=this.node()["__on"+t])&&o._;r=!1}return this.each(Rt(t,i,r))};function Rt(t,i,r){var o="__on"+t,s=t.indexOf("."),c=ke;s>0&&(t=t.slice(0,s));var f=Te.get(t);f&&(t=f,c=pe);function l(){var p=this[o];p&&(this.removeEventListener(t,p,p.$),delete this[o])}function h(){var p=c(i,Ct(arguments));l.call(this),this.addEventListener(t,this[o]=p,p.$=r),p._=i}function g(){var p=new RegExp("^__on([^.]+)"+b.requote(t)+"$"),x;for(var m in this)if(x=m.match(p)){var T=this[m];this.removeEventListener(x[1],T,T.$),delete this[m]}}return s?i?h:l:i?d:g}var Te=b.map({mouseenter:"mouseover",mouseleave:"mouseout"});kt&&Te.forEach(function(t){"on"+t in kt&&Te.remove(t)});function ke(t,i){return function(r){var o=b.event;b.event=r,i[0]=this.__data__;try{t.apply(this,i)}finally{b.event=o}}}function pe(t,i){var r=ke(t,i);return function(o){var s=this,c=o.relatedTarget;(!c||c!==s&&!(c.compareDocumentPosition(s)&8))&&r.call(s,o)}}var Bt,Ie=0;function Ne(t){var i=".dragsuppress-"+ ++Ie,r="click"+i,o=b.select(be(t)).on("touchmove"+i,y).on("dragstart"+i,y).on("selectstart"+i,y);if(Bt==null&&(Bt="onselectstart"in t?!1:a(t.style,"userSelect")),Bt){var s=De(t).style,c=s[Bt];s[Bt]="none"}return function(f){if(o.on(i,null),Bt&&(s[Bt]=c),f){var l=function(){o.on(r,null)};o.on(r,function(){y(),l()},!0),setTimeout(l,0)}}}b.mouse=function(t){return Pe(t,G())};var Ze=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Pe(t,i){i.changedTouches&&(i=i.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var o=r.createSVGPoint();if(Ze<0){var s=be(t);if(s.scrollX||s.scrollY){r=b.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var c=r[0][0].getScreenCTM();Ze=!(c.f||c.e),r.remove()}}return Ze?(o.x=i.pageX,o.y=i.pageY):(o.x=i.clientX,o.y=i.clientY),o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}var f=t.getBoundingClientRect();return[i.clientX-f.left-t.clientLeft,i.clientY-f.top-t.clientTop]}b.touch=function(t,i,r){if(arguments.length<3&&(r=i,i=G().changedTouches),i){for(var o=0,s=i.length,c;o<s;++o)if((c=i[o]).identifier===r)return Pe(t,c)}},b.behavior.drag=function(){var t=C(s,"drag","dragstart","dragend"),i=null,r=c(d,b.mouse,be,"mousemove","mouseup"),o=c(jn,b.touch,e,"touchmove","touchend");function s(){this.on("mousedown.drag",r).on("touchstart.drag",o)}function c(f,l,h,g,p){return function(){var x=this,m=b.event.target.correspondingElement||b.event.target,T=x.parentNode,V=t.of(x,arguments),S=0,A=f(),P=".drag"+(A==null?"":"-"+A),k,L=b.select(h(m)).on(g+P,F).on(p+P,D),E=Ne(m),I=l(T,A);i?(k=i.apply(x,arguments),k=[k.x-I[0],k.y-I[1]]):k=[0,0],V({type:"dragstart"});function F(){var O=l(T,A),H,U;O&&(H=O[0]-I[0],U=O[1]-I[1],S|=H|U,I=O,V({type:"drag",x:O[0]+k[0],y:O[1]+k[1],dx:H,dy:U}))}function D(){l(T,A)&&(L.on(g+P,null).on(p+P,null),E(S),V({type:"dragend"}))}}}return s.origin=function(f){return arguments.length?(i=f,s):i},b.rebind(s,t,"on")};function jn(){return b.event.changedTouches[0].identifier}b.touches=function(t,i){return arguments.length<2&&(i=G().touches),i?Ct(i).map(function(r){var o=Pe(t,r);return o.identifier=r.identifier,o}):[]};var et=1e-6,se=et*et,ft=Math.PI,ue=2*ft,vs=ue-et,$t=ft/2,ht=ft/180,Et=180/ft;function Kr(t){return t>0?1:t<0?-1:0}function Hi(t,i,r){return(i[0]-t[0])*(r[1]-t[1])-(i[1]-t[1])*(r[0]-t[0])}function Jr(t){return t>1?0:t<-1?ft:Math.acos(t)}function ze(t){return t>1?$t:t<-1?-$t:Math.asin(t)}function ws(t){return((t=Math.exp(t))-1/t)/2}function ta(t){return((t=Math.exp(t))+1/t)/2}function Ss(t){return((t=Math.exp(2*t))-1)/(t+1)}function ea(t){return(t=Math.sin(t/2))*t}var Mn=Math.SQRT2,Yi=2,na=4;b.interpolateZoom=function(t,i){var r=t[0],o=t[1],s=t[2],c=i[0],f=i[1],l=i[2],h=c-r,g=f-o,p=h*h+g*g,x,m;if(p<se)m=Math.log(l/s)/Mn,x=function(k){return[r+k*h,o+k*g,s*Math.exp(Mn*k*m)]};else{var T=Math.sqrt(p),V=(l*l-s*s+na*p)/(2*s*Yi*T),S=(l*l-s*s-na*p)/(2*l*Yi*T),A=Math.log(Math.sqrt(V*V+1)-V),P=Math.log(Math.sqrt(S*S+1)-S);m=(P-A)/Mn,x=function(k){var L=k*m,E=ta(A),I=s/(Yi*T)*(E*Ss(Mn*L+A)-ws(A));return[r+I*h,o+I*g,s*E/ta(Mn*L+A)]}}return x.duration=m*1e3,x},b.behavior.zoom=function(){var t={x:0,y:0,k:1},i,r,o,s=[960,500],c=ia,f=250,l=0,h="mousedown.zoom",g="mousemove.zoom",p="mouseup.zoom",x,m="touchstart.zoom",T,V=C(L,"zoomstart","zoom","zoomend"),S,A,P,k;Ui||(Ui="onwheel"in kt?(Wn=function(){return-b.event.deltaY*(b.event.deltaMode?120:1)},"wheel"):"onmousewheel"in kt?(Wn=function(){return b.event.wheelDelta},"mousewheel"):(Wn=function(){return-b.event.detail},"MozMousePixelScroll"));function L(X){X.on(h,Z).on(Ui+".zoom",Y).on("dblclick.zoom",W).on(m,z)}L.event=function(X){X.each(function(){var j=V.of(this,arguments),nt=t;un?b.select(this).transition().each("start.zoom",function(){t=this.__chart__||{x:0,y:0,k:1},U(j)}).tween("zoom:zoom",function(){var ct=s[0],dt=s[1],St=r?r[0]:ct/2,Pt=r?r[1]:dt/2,Qt=b.interpolateZoom([(St-t.x)/t.k,(Pt-t.y)/t.k,ct/t.k],[(St-nt.x)/nt.k,(Pt-nt.y)/nt.k,ct/nt.k]);return function(ee){var Zt=Qt(ee),ae=ct/Zt[2];this.__chart__=t={x:St-Zt[0]*ae,y:Pt-Zt[1]*ae,k:ae},tt(j)}}).each("interrupt.zoom",function(){q(j)}).each("end.zoom",function(){q(j)}):(this.__chart__=t,U(j),tt(j),q(j))})},L.translate=function(X){return arguments.length?(t={x:+X[0],y:+X[1],k:t.k},H(),L):[t.x,t.y]},L.scale=function(X){return arguments.length?(t={x:t.x,y:t.y,k:null},F(+X),H(),L):t.k},L.scaleExtent=function(X){return arguments.length?(c=X==null?ia:[+X[0],+X[1]],L):c},L.center=function(X){return arguments.length?(o=X&&[+X[0],+X[1]],L):o},L.size=function(X){return arguments.length?(s=X&&[+X[0],+X[1]],L):s},L.duration=function(X){return arguments.length?(f=+X,L):f},L.x=function(X){return arguments.length?(A=X,S=X.copy(),t={x:0,y:0,k:1},L):A},L.y=function(X){return arguments.length?(k=X,P=X.copy(),t={x:0,y:0,k:1},L):k};function E(X){return[(X[0]-t.x)/t.k,(X[1]-t.y)/t.k]}function I(X){return[X[0]*t.k+t.x,X[1]*t.k+t.y]}function F(X){t.k=Math.max(c[0],Math.min(c[1],X))}function D(X,j){j=I(j),t.x+=X[0]-j[0],t.y+=X[1]-j[1]}function O(X,j,nt,ct){X.__chart__={x:t.x,y:t.y,k:t.k},F(Math.pow(2,ct)),D(r=j,nt),X=b.select(X),f>0&&(X=X.transition().duration(f)),X.call(L.event)}function H(){A&&A.domain(S.range().map(function(X){return(X-t.x)/t.k}).map(S.invert)),k&&k.domain(P.range().map(function(X){return(X-t.y)/t.k}).map(P.invert))}function U(X){l++||X({type:"zoomstart"})}function tt(X){H(),X({type:"zoom",scale:t.k,translate:[t.x,t.y]})}function q(X){--l||(X({type:"zoomend"}),r=null)}function Z(){var X=this,j=V.of(X,arguments),nt=0,ct=b.select(be(X)).on(g,Pt).on(p,Qt),dt=E(b.mouse(X)),St=Ne(X);Ii.call(X),U(j);function Pt(){nt=1,D(b.mouse(X),dt),tt(j)}function Qt(){ct.on(g,null).on(p,null),St(nt),q(j)}}function z(){var X=this,j=V.of(X,arguments),nt={},ct=0,dt,St=".zoom-"+b.event.changedTouches[0].identifier,Pt="touchmove"+St,Qt="touchend"+St,ee=[],Zt=b.select(X),ae=Ne(X);oe(),U(j),Zt.on(h,null).on(m,oe);function Wt(){var we=b.touches(X);return dt=t.k,we.forEach(function(Yt){Yt.identifier in nt&&(nt[Yt.identifier]=E(Yt))}),we}function oe(){var we=b.event.target;b.select(we).on(Pt,ln).on(Qt,ll),ee.push(we);for(var Yt=b.event.changedTouches,de=0,Ee=Yt.length;de<Ee;++de)nt[Yt[de].identifier]=null;var ge=Wt(),Ln=Date.now();if(ge.length===1){if(Ln-T<500){var fn=ge[0];O(X,fn,nt[fn.identifier],Math.floor(Math.log(t.k)/Math.LN2)+1),y()}T=Ln}else if(ge.length>1){var fn=ge[0],We=ge[1],Bi=fn[0]-We[0],_s=fn[1]-We[1];ct=Bi*Bi+_s*_s}}function ln(){var we=b.touches(X),Yt,de,Ee,ge;Ii.call(X);for(var Ln=0,fn=we.length;Ln<fn;++Ln,ge=null)if(Ee=we[Ln],ge=nt[Ee.identifier]){if(de)break;Yt=Ee,de=ge}if(ge){var We=(We=Ee[0]-Yt[0])*We+(We=Ee[1]-Yt[1])*We,Bi=ct&&Math.sqrt(We/ct);Yt=[(Yt[0]+Ee[0])/2,(Yt[1]+Ee[1])/2],de=[(de[0]+ge[0])/2,(de[1]+ge[1])/2],F(Bi*dt)}T=null,D(Yt,de),tt(j)}function ll(){if(b.event.touches.length){for(var we=b.event.changedTouches,Yt=0,de=we.length;Yt<de;++Yt)delete nt[we[Yt].identifier];for(var Ee in nt)return void Wt()}b.selectAll(ee).on(St,null),Zt.on(h,Z).on(m,z),ae(),q(j)}}function Y(){var X=V.of(this,arguments);x?clearTimeout(x):(Ii.call(this),i=E(r=o||b.mouse(this)),U(X)),x=setTimeout(function(){x=null,q(X)},50),y(),F(Math.pow(2,Wn()*.002)*t.k),D(r,i),tt(X)}function W(){var X=b.mouse(this),j=Math.log(t.k)/Math.LN2;O(this,X,E(X),b.event.shiftKey?Math.ceil(j)-1:Math.floor(j)+1)}return b.rebind(L,V,"on")};var ia=[0,1/0],Wn,Ui;b.color=Ke;function Ke(){}Ke.prototype.toString=function(){return this.rgb()+""},b.hsl=Le;function Le(t,i,r){return this instanceof Le?(this.h=+t,this.s=+i,void(this.l=+r)):arguments.length<2?t instanceof Le?new Le(t.h,t.s,t.l):la(""+t,fa,Le):new Le(t,i,r)}var ji=Le.prototype=new Ke;ji.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Le(this.h,this.s,this.l/t)},ji.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Le(this.h,this.s,t*this.l)},ji.rgb=function(){return Wi(this.h,this.s,this.l)};function Wi(t,i,r){var o,s;t=isNaN(t)?0:(t%=360)<0?t+360:t,i=isNaN(i)||i<0?0:i>1?1:i,r=r<0?0:r>1?1:r,s=r<=.5?r*(1+i):r+i-r*i,o=2*r-s;function c(l){return l>360?l-=360:l<0&&(l+=360),l<60?o+(s-o)*l/60:l<180?s:l<240?o+(s-o)*(240-l)/60:o}function f(l){return Math.round(c(l)*255)}return new re(f(t+120),f(t),f(t-120))}b.hcl=_e;function _e(t,i,r){return this instanceof _e?(this.h=+t,this.c=+i,void(this.l=+r)):arguments.length<2?t instanceof _e?new _e(t.h,t.c,t.l):t instanceof xe?ua(t.l,t.a,t.b):ua((t=ha((t=b.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new _e(t,i,r)}var qi=_e.prototype=new Ke;qi.brighter=function(t){return new _e(this.h,this.c,Math.min(100,this.l+qn*(arguments.length?t:1)))},qi.darker=function(t){return new _e(this.h,this.c,Math.max(0,this.l-qn*(arguments.length?t:1)))},qi.rgb=function(){return Qi(this.h,this.c,this.l).rgb()};function Qi(t,i,r){return isNaN(t)&&(t=0),isNaN(i)&&(i=0),new xe(r,Math.cos(t*=ht)*i,Math.sin(t)*i)}b.lab=xe;function xe(t,i,r){return this instanceof xe?(this.l=+t,this.a=+i,void(this.b=+r)):arguments.length<2?t instanceof xe?new xe(t.l,t.a,t.b):t instanceof _e?Qi(t.h,t.c,t.l):ha((t=re(t)).r,t.g,t.b):new xe(t,i,r)}var qn=18,ra=.95047,aa=1,oa=1.08883,Zi=xe.prototype=new Ke;Zi.brighter=function(t){return new xe(Math.min(100,this.l+qn*(arguments.length?t:1)),this.a,this.b)},Zi.darker=function(t){return new xe(Math.max(0,this.l-qn*(arguments.length?t:1)),this.a,this.b)},Zi.rgb=function(){return sa(this.l,this.a,this.b)};function sa(t,i,r){var o=(t+16)/116,s=o+i/500,c=o-r/200;return s=Ki(s)*ra,o=Ki(o)*aa,c=Ki(c)*oa,new re(tr(3.2404542*s-1.5371385*o-.4985314*c),tr(-.969266*s+1.8760108*o+.041556*c),tr(.0556434*s-.2040259*o+1.0572252*c))}function ua(t,i,r){return t>0?new _e(Math.atan2(r,i)*Et,Math.sqrt(i*i+r*r),t):new _e(NaN,NaN,t)}function Ki(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function Ji(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function tr(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}b.rgb=re;function re(t,i,r){return this instanceof re?(this.r=~~t,this.g=~~i,void(this.b=~~r)):arguments.length<2?t instanceof re?new re(t.r,t.g,t.b):la(""+t,re,Wi):new re(t,i,r)}function ca(t){return new re(t>>16,t>>8&255,t&255)}function Qn(t){return ca(t)+""}var Zn=re.prototype=new Ke;Zn.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var i=this.r,r=this.g,o=this.b,s=30;return!i&&!r&&!o?new re(s,s,s):(i&&i<s&&(i=s),r&&r<s&&(r=s),o&&o<s&&(o=s),new re(Math.min(255,i/t),Math.min(255,r/t),Math.min(255,o/t)))},Zn.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new re(t*this.r,t*this.g,t*this.b)},Zn.hsl=function(){return fa(this.r,this.g,this.b)},Zn.toString=function(){return"#"+gn(this.r)+gn(this.g)+gn(this.b)};function gn(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function la(t,i,r){var o=0,s=0,c=0,f,l,h;if(f=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()),f)switch(l=f[2].split(","),f[1]){case"hsl":return r(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100);case"rgb":return i(nr(l[0]),nr(l[1]),nr(l[2]))}return(h=Kn.get(t))?i(h.r,h.g,h.b):(t!=null&&t.charAt(0)==="#"&&!isNaN(h=parseInt(t.slice(1),16))&&(t.length===4?(o=(h&3840)>>4,o=o>>4|o,s=h&240,s=s>>4|s,c=h&15,c=c<<4|c):t.length===7&&(o=(h&16711680)>>16,s=(h&65280)>>8,c=h&255)),i(o,s,c))}function fa(t,i,r){var o=Math.min(t/=255,i/=255,r/=255),s=Math.max(t,i,r),c=s-o,f,l,h=(s+o)/2;return c?(l=h<.5?c/(s+o):c/(2-s-o),t==s?f=(i-r)/c+(i<r?6:0):i==s?f=(r-t)/c+2:f=(t-i)/c+4,f*=60):(f=NaN,l=h>0&&h<1?0:f),new Le(f,l,h)}function ha(t,i,r){t=er(t),i=er(i),r=er(r);var o=Ji((.4124564*t+.3575761*i+.1804375*r)/ra),s=Ji((.2126729*t+.7151522*i+.072175*r)/aa),c=Ji((.0193339*t+.119192*i+.9503041*r)/oa);return xe(116*s-16,500*(o-s),200*(s-c))}function er(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function nr(t){var i=parseFloat(t);return t.charAt(t.length-1)==="%"?Math.round(i*2.55):i}var Kn=b.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Kn.forEach(function(t,i){Kn.set(t,ca(i))});function At(t){return typeof t=="function"?t:function(){return t}}b.functor=At,b.xhr=ir(e);function ir(t){return function(i,r,o){return arguments.length===2&&typeof r=="function"&&(o=r,r=null),Jn(i,r,t,o)}}function Jn(t,i,r,o){var s={},c=b.dispatch("beforesend","progress","load","error"),f={},l=new XMLHttpRequest,h=null;this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=g:l.onreadystatechange=function(){l.readyState>3&&g()};function g(){var p=l.status,x;if(!p&&As(l)||p>=200&&p<300||p===304){try{x=r.call(s,l)}catch(m){c.error.call(s,m);return}c.load.call(s,x)}else c.error.call(s,l)}return l.onprogress=function(p){var x=b.event;b.event=p;try{c.progress.call(s,l)}finally{b.event=x}},s.header=function(p,x){return p=(p+"").toLowerCase(),arguments.length<2?f[p]:(x==null?delete f[p]:f[p]=x+"",s)},s.mimeType=function(p){return arguments.length?(i=p==null?null:p+"",s):i},s.responseType=function(p){return arguments.length?(h=p,s):h},s.response=function(p){return r=p,s},["get","post"].forEach(function(p){s[p]=function(){return s.send.apply(s,[p].concat(Ct(arguments)))}}),s.send=function(p,x,m){if(arguments.length===2&&typeof x=="function"&&(m=x,x=null),l.open(p,t,!0),i!=null&&!("accept"in f)&&(f.accept=i+",*/*"),l.setRequestHeader)for(var T in f)l.setRequestHeader(T,f[T]);return i!=null&&l.overrideMimeType&&l.overrideMimeType(i),h!=null&&(l.responseType=h),m!=null&&s.on("error",m).on("load",function(V){m(null,V)}),c.beforesend.call(s,l),l.send(x??null),s},s.abort=function(){return l.abort(),s},b.rebind(s,c,"on"),o==null?s:s.get(bs(o))}function bs(t){return t.length===1?function(i,r){t(i==null?r:null)}:t}function As(t){var i=t.responseType;return i&&i!=="text"?t.response:t.responseText}b.dsv=function(t,i){var r=new RegExp('["'+t+`
]`),o=t.charCodeAt(0);function s(g,p,x){arguments.length<3&&(x=p,p=null);var m=Jn(g,i,p==null?c:f(p),x);return m.row=function(T){return arguments.length?m.response((p=T)==null?c:f(T)):p},m}function c(g){return s.parse(g.responseText)}function f(g){return function(p){return s.parse(p.responseText,g)}}s.parse=function(g,p){var x;return s.parseRows(g,function(m,T){if(x)return x(m,T-1);var V=new Function("d","return {"+m.map(function(S,A){return JSON.stringify(S)+": d["+A+"]"}).join(",")+"}");x=p?function(S,A){return p(V(S),A)}:V})},s.parseRows=function(g,p){var x={},m={},T=[],V=g.length,S=0,A=0,P,k;function L(){if(S>=V)return m;if(k)return k=!1,x;var I=S;if(g.charCodeAt(I)===34){for(var F=I;F++<V;)if(g.charCodeAt(F)===34){if(g.charCodeAt(F+1)!==34)break;++F}S=F+2;var D=g.charCodeAt(F+1);return D===13?(k=!0,g.charCodeAt(F+2)===10&&++S):D===10&&(k=!0),g.slice(I+1,F).replace(/""/g,'"')}for(;S<V;){var D=g.charCodeAt(S++),O=1;if(D===10)k=!0;else if(D===13)k=!0,g.charCodeAt(S)===10&&(++S,++O);else if(D!==o)continue;return g.slice(I,S-O)}return g.slice(I)}for(;(P=L())!==m;){for(var E=[];P!==x&&P!==m;)E.push(P),P=L();p&&(E=p(E,A++))==null||T.push(E)}return T},s.format=function(g){if(Array.isArray(g[0]))return s.formatRows(g);var p=new dn,x=[];return g.forEach(function(m){for(var T in m)p.has(T)||x.push(p.add(T))}),[x.map(h).join(t)].concat(g.map(function(m){return x.map(function(T){return h(m[T])}).join(t)})).join(`
`)},s.formatRows=function(g){return g.map(l).join(`
`)};function l(g){return g.map(h).join(t)}function h(g){return r.test(g)?'"'+g.replace(/\"/g,'""')+'"':g}return s},b.csv=b.dsv(",","text/csv"),b.tsv=b.dsv("	","text/tab-separated-values");var ti,ei,ni,ii,da=this[a(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};b.timer=function(){ri.apply(this,arguments)};function ri(t,i,r){var o=arguments.length;o<2&&(i=0),o<3&&(r=Date.now());var s=r+i,c={c:t,t:s,n:null};return ei?ei.n=c:ti=c,ei=c,ni||(ii=clearTimeout(ii),ni=1,da(rr)),c}function rr(){var t=ga(),i=pa()-t;i>24?(isFinite(i)&&(clearTimeout(ii),ii=setTimeout(rr,i)),ni=0):(ni=1,da(rr))}b.timer.flush=function(){ga(),pa()};function ga(){for(var t=Date.now(),i=ti;i;)t>=i.t&&i.c(t-i.t)&&(i.c=null),i=i.n;return t}function pa(){for(var t,i=ti,r=1/0;i;)i.c?(i.t<r&&(r=i.t),i=(t=i).n):i=t?t.n=i.n:ti=i.n;return ei=t,r}function ar(t,i){return i-(t?Math.ceil(Math.log(t)/Math.LN10):1)}b.round=function(t,i){return i?Math.round(t*(i=Math.pow(10,i)))/i:Math.round(t)};var Ts=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ps);b.formatPrefix=function(t,i){var r=0;return(t=+t)&&(t<0&&(t*=-1),i&&(t=b.round(t,ar(t,i))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))),Ts[8+r/3]};function Ps(t,i){var r=Math.pow(10,at(8-i)*3);return{scale:i>8?function(o){return o/r}:function(o){return o*r},symbol:t}}function Ls(t){var i=t.decimal,r=t.thousands,o=t.grouping,s=t.currency,c=o&&r?function(f,l){for(var h=f.length,g=[],p=0,x=o[0],m=0;h>0&&x>0&&(m+x+1>l&&(x=Math.max(1,l-m)),g.push(f.substring(h-=x,h+x)),!((m+=x+1)>l));)x=o[p=(p+1)%o.length];return g.reverse().join(r)}:e;return function(f){var l=_a.exec(f),h=l[1]||" ",g=l[2]||">",p=l[3]||"-",x=l[4]||"",m=l[5],T=+l[6],V=l[7],S=l[8],A=l[9],P=1,k="",L="",E=!1,I=!0;switch(S&&(S=+S.substring(1)),(m||h==="0"&&g==="=")&&(m=h="0",g="="),A){case"n":V=!0,A="g";break;case"%":P=100,L="%",A="f";break;case"p":P=100,L="%",A="r";break;case"b":case"o":case"x":case"X":x==="#"&&(k="0"+A.toLowerCase());case"c":I=!1;case"d":E=!0,S=0;break;case"s":P=-1,A="r";break}x==="$"&&(k=s[0],L=s[1]),A=="r"&&!S&&(A="g"),S!=null&&(A=="g"?S=Math.max(1,Math.min(21,S)):(A=="e"||A=="f")&&(S=Math.max(0,Math.min(20,S)))),A=Cs.get(A)||Ms;var F=m&&V;return function(D){var O=L;if(E&&D%1)return"";var H=D<0||D===0&&1/D<0?(D=-D,"-"):p==="-"?"":p;if(P<0){var U=b.formatPrefix(D,S);D=U.scale(D),O=U.symbol+L}else D*=P;D=A(D,S);var tt=D.lastIndexOf("."),q,Z;if(tt<0){var z=I?D.lastIndexOf("e"):-1;z<0?(q=D,Z=""):(q=D.substring(0,z),Z=D.substring(z))}else q=D.substring(0,tt),Z=i+D.substring(tt+1);!m&&V&&(q=c(q,1/0));var Y=k.length+q.length+Z.length+(F?0:H.length),W=Y<T?new Array(Y=T-Y+1).join(h):"";return F&&(q=c(W+q,W.length?T-Z.length:1/0)),H+=k,D=q+Z,(g==="<"?H+D+W:g===">"?W+H+D:g==="^"?W.substring(0,Y>>=1)+H+D+W.substring(Y):H+(F?D:W+D))+O}}}var _a=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Cs=b.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,i){return t.toPrecision(i)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},r:function(t,i){return(t=b.round(t,ar(t,i))).toFixed(Math.max(0,Math.min(20,ar(t*(1+1e-15),i))))}});function Ms(t){return t+""}var rt=b.time={},jt=Date;function Ge(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ge.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Re.setUTCDate.apply(this._,arguments)},setDay:function(){Re.setUTCDay.apply(this._,arguments)},setFullYear:function(){Re.setUTCFullYear.apply(this._,arguments)},setHours:function(){Re.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Re.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Re.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Re.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Re.setUTCSeconds.apply(this._,arguments)},setTime:function(){Re.setTime.apply(this._,arguments)}};var Re=Date.prototype;function Je(t,i,r){function o(g){var p=t(g),x=c(p,1);return g-p<x-g?p:x}function s(g){return i(g=t(new jt(g-1)),1),g}function c(g,p){return i(g=new jt(+g),p),g}function f(g,p,x){var m=s(g),T=[];if(x>1)for(;m<p;)r(m)%x||T.push(new Date(+m)),i(m,1);else for(;m<p;)T.push(new Date(+m)),i(m,1);return T}function l(g,p,x){try{jt=Ge;var m=new Ge;return m._=g,f(m,p,x)}finally{jt=Date}}t.floor=t,t.round=o,t.ceil=s,t.offset=c,t.range=f;var h=t.utc=ai(t);return h.floor=h,h.round=ai(o),h.ceil=ai(s),h.offset=ai(c),h.range=l,t}function ai(t){return function(i,r){try{jt=Ge;var o=new Ge;return o._=i,t(o,r)._}finally{jt=Date}}}rt.year=Je(function(t){return t=rt.day(t),t.setMonth(0,1),t},function(t,i){t.setFullYear(t.getFullYear()+i)},function(t){return t.getFullYear()}),rt.years=rt.year.range,rt.years.utc=rt.year.utc.range,rt.day=Je(function(t){var i=new jt(2e3,0);return i.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),i},function(t,i){t.setDate(t.getDate()+i)},function(t){return t.getDate()-1}),rt.days=rt.day.range,rt.days.utc=rt.day.utc.range,rt.dayOfYear=function(t){var i=rt.year(t);return Math.floor((t-i-(t.getTimezoneOffset()-i.getTimezoneOffset())*6e4)/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,i){i=7-i;var r=rt[t]=Je(function(o){return(o=rt.day(o)).setDate(o.getDate()-(o.getDay()+i)%7),o},function(o,s){o.setDate(o.getDate()+Math.floor(s)*7)},function(o){var s=rt.year(o).getDay();return Math.floor((rt.dayOfYear(o)+(s+i)%7)/7)-(s!==i)});rt[t+"s"]=r.range,rt[t+"s"].utc=r.utc.range,rt[t+"OfYear"]=function(o){var s=rt.year(o).getDay();return Math.floor((rt.dayOfYear(o)+(s+i)%7)/7)}}),rt.week=rt.sunday,rt.weeks=rt.sunday.range,rt.weeks.utc=rt.sunday.utc.range,rt.weekOfYear=rt.sundayOfYear;function Es(t){var i=t.dateTime,r=t.date,o=t.time,s=t.periods,c=t.days,f=t.shortDays,l=t.months,h=t.shortMonths;function g(z){var Y=z.length;function W(X){for(var j=[],nt=-1,ct=0,dt,St,Pt;++nt<Y;)z.charCodeAt(nt)===37&&(j.push(z.slice(ct,nt)),(St=xa[dt=z.charAt(++nt)])!=null&&(dt=z.charAt(++nt)),(Pt=E[dt])&&(dt=Pt(X,St??(dt==="e"?" ":"0"))),j.push(dt),ct=nt+1);return j.push(z.slice(ct,nt)),j.join("")}return W.parse=function(X){var j={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},nt=p(j,z,X,0);if(nt!=X.length)return null;"p"in j&&(j.H=j.H%12+j.p*12);var ct=j.Z!=null&&jt!==Ge,dt=new(ct?Ge:jt);return"j"in j?dt.setFullYear(j.y,0,j.j):"W"in j||"U"in j?("w"in j||(j.w="W"in j?1:0),dt.setFullYear(j.y,0,1),dt.setFullYear(j.y,0,"W"in j?(j.w+6)%7+j.W*7-(dt.getDay()+5)%7:j.w+j.U*7-(dt.getDay()+6)%7)):dt.setFullYear(j.y,j.m,j.d),dt.setHours(j.H+(j.Z/100|0),j.M+j.Z%100,j.S,j.L),ct?dt._:dt},W.toString=function(){return z},W}function p(z,Y,W,X){for(var j,nt,ct,dt=0,St=Y.length,Pt=W.length;dt<St;){if(X>=Pt)return-1;if(j=Y.charCodeAt(dt++),j===37){if(ct=Y.charAt(dt++),nt=I[ct in xa?Y.charAt(dt++):ct],!nt||(X=nt(z,W,X))<0)return-1}else if(j!=W.charCodeAt(X++))return-1}return X}g.utc=function(z){var Y=g(z);function W(X){try{jt=Ge;var j=new jt;return j._=X,Y(j)}finally{jt=Date}}return W.parse=function(X){try{jt=Ge;var j=Y.parse(X);return j&&j._}finally{jt=Date}},W.toString=Y.toString,W},g.multi=g.utc.multi=Ys;var x=b.map(),m=oi(c),T=si(c),V=oi(f),S=si(f),A=oi(l),P=si(l),k=oi(h),L=si(h);s.forEach(function(z,Y){x.set(z.toLowerCase(),Y)});var E={a:function(z){return f[z.getDay()]},A:function(z){return c[z.getDay()]},b:function(z){return h[z.getMonth()]},B:function(z){return l[z.getMonth()]},c:g(i),d:function(z,Y){return te(z.getDate(),Y,2)},e:function(z,Y){return te(z.getDate(),Y,2)},H:function(z,Y){return te(z.getHours(),Y,2)},I:function(z,Y){return te(z.getHours()%12||12,Y,2)},j:function(z,Y){return te(1+rt.dayOfYear(z),Y,3)},L:function(z,Y){return te(z.getMilliseconds(),Y,3)},m:function(z,Y){return te(z.getMonth()+1,Y,2)},M:function(z,Y){return te(z.getMinutes(),Y,2)},p:function(z){return s[+(z.getHours()>=12)]},S:function(z,Y){return te(z.getSeconds(),Y,2)},U:function(z,Y){return te(rt.sundayOfYear(z),Y,2)},w:function(z){return z.getDay()},W:function(z,Y){return te(rt.mondayOfYear(z),Y,2)},x:g(r),X:g(o),y:function(z,Y){return te(z.getFullYear()%100,Y,2)},Y:function(z,Y){return te(z.getFullYear()%1e4,Y,4)},Z:Bs,"%":function(){return"%"}},I={a:F,A:D,b:O,B:H,c:U,d:ya,e:ya,H:va,I:va,j:Is,L:Xs,m:Fs,M:Ns,p:Z,S:zs,U:ks,w:Vs,W:Gs,x:tt,X:q,y:$s,Y:Rs,Z:Os,"%":Hs};function F(z,Y,W){V.lastIndex=0;var X=V.exec(Y.slice(W));return X?(z.w=S.get(X[0].toLowerCase()),W+X[0].length):-1}function D(z,Y,W){m.lastIndex=0;var X=m.exec(Y.slice(W));return X?(z.w=T.get(X[0].toLowerCase()),W+X[0].length):-1}function O(z,Y,W){k.lastIndex=0;var X=k.exec(Y.slice(W));return X?(z.m=L.get(X[0].toLowerCase()),W+X[0].length):-1}function H(z,Y,W){A.lastIndex=0;var X=A.exec(Y.slice(W));return X?(z.m=P.get(X[0].toLowerCase()),W+X[0].length):-1}function U(z,Y,W){return p(z,E.c.toString(),Y,W)}function tt(z,Y,W){return p(z,E.x.toString(),Y,W)}function q(z,Y,W){return p(z,E.X.toString(),Y,W)}function Z(z,Y,W){var X=x.get(Y.slice(W,W+=2).toLowerCase());return X==null?-1:(z.p=X,W)}return g}var xa={"-":"",_:" ",0:"0"},Ot=/^\s*\d+/,ma=/^%/;function te(t,i,r){var o=t<0?"-":"",s=(o?-t:t)+"",c=s.length;return o+(c<r?new Array(r-c+1).join(i)+s:s)}function oi(t){return new RegExp("^(?:"+t.map(b.requote).join("|")+")","i")}function si(t){for(var i=new fe,r=-1,o=t.length;++r<o;)i.set(t[r].toLowerCase(),r);return i}function Vs(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+1));return o?(t.w=+o[0],r+o[0].length):-1}function ks(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r));return o?(t.U=+o[0],r+o[0].length):-1}function Gs(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r));return o?(t.W=+o[0],r+o[0].length):-1}function Rs(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+4));return o?(t.y=+o[0],r+o[0].length):-1}function $s(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+2));return o?(t.y=Ds(+o[0]),r+o[0].length):-1}function Os(t,i,r){return/^[+-]\d{4}$/.test(i=i.slice(r,r+5))?(t.Z=-i,r+5):-1}function Ds(t){return t+(t>68?1900:2e3)}function Fs(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+2));return o?(t.m=o[0]-1,r+o[0].length):-1}function ya(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+2));return o?(t.d=+o[0],r+o[0].length):-1}function Is(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+3));return o?(t.j=+o[0],r+o[0].length):-1}function va(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+2));return o?(t.H=+o[0],r+o[0].length):-1}function Ns(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+2));return o?(t.M=+o[0],r+o[0].length):-1}function zs(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+2));return o?(t.S=+o[0],r+o[0].length):-1}function Xs(t,i,r){Ot.lastIndex=0;var o=Ot.exec(i.slice(r,r+3));return o?(t.L=+o[0],r+o[0].length):-1}function Bs(t){var i=t.getTimezoneOffset(),r=i>0?"-":"+",o=at(i)/60|0,s=at(i)%60;return r+te(o,"0",2)+te(s,"0",2)}function Hs(t,i,r){ma.lastIndex=0;var o=ma.exec(i.slice(r,r+1));return o?r+o[0].length:-1}function Ys(t){for(var i=t.length,r=-1;++r<i;)t[r][0]=this(t[r][0]);return function(o){for(var s=0,c=t[s];!c[1](o);)c=t[++s];return c[0](o)}}b.locale=function(t){return{numberFormat:Ls(t),timeFormat:Es(t)}};var wa=b.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});b.format=wa.numberFormat,b.geo={};function or(){}or.prototype={s:0,t:0,add:function(t){Sa(t,this.t,ui),Sa(ui.s,this.s,this),this.s?this.t+=ui.t:this.s=ui.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ui=new or;function Sa(t,i,r){var o=r.s=t+i,s=o-t,c=o-s;r.t=t-c+(i-s)}b.geo.stream=function(t,i){t&&ba.hasOwnProperty(t.type)?ba[t.type](t,i):ci(t,i)};function ci(t,i){t&&Aa.hasOwnProperty(t.type)&&Aa[t.type](t,i)}var ba={Feature:function(t,i){ci(t.geometry,i)},FeatureCollection:function(t,i){for(var r=t.features,o=-1,s=r.length;++o<s;)ci(r[o].geometry,i)}},Aa={Sphere:function(t,i){i.sphere()},Point:function(t,i){t=t.coordinates,i.point(t[0],t[1],t[2])},MultiPoint:function(t,i){for(var r=t.coordinates,o=-1,s=r.length;++o<s;)t=r[o],i.point(t[0],t[1],t[2])},LineString:function(t,i){sr(t.coordinates,i,0)},MultiLineString:function(t,i){for(var r=t.coordinates,o=-1,s=r.length;++o<s;)sr(r[o],i,0)},Polygon:function(t,i){Ta(t.coordinates,i)},MultiPolygon:function(t,i){for(var r=t.coordinates,o=-1,s=r.length;++o<s;)Ta(r[o],i)},GeometryCollection:function(t,i){for(var r=t.geometries,o=-1,s=r.length;++o<s;)ci(r[o],i)}};function sr(t,i,r){var o=-1,s=t.length-r,c;for(i.lineStart();++o<s;)c=t[o],i.point(c[0],c[1],c[2]);i.lineEnd()}function Ta(t,i){var r=-1,o=t.length;for(i.polygonStart();++r<o;)sr(t[r],i,1);i.polygonEnd()}b.geo.area=function(t){return li=0,b.geo.stream(t,ce),li};var li,tn=new or,ce={sphere:function(){li+=4*ft},point:d,lineStart:d,lineEnd:d,polygonStart:function(){tn.reset(),ce.lineStart=Us},polygonEnd:function(){var t=2*tn;li+=t<0?4*ft+t:t,ce.lineStart=ce.lineEnd=ce.point=d}};function Us(){var t,i,r,o,s;ce.point=function(f,l){ce.point=c,r=(t=f)*ht,o=Math.cos(l=(i=l)*ht/2+ft/4),s=Math.sin(l)};function c(f,l){f*=ht,l=l*ht/2+ft/4;var h=f-r,g=h>=0?1:-1,p=g*h,x=Math.cos(l),m=Math.sin(l),T=s*m,V=o*x+T*Math.cos(p),S=T*g*Math.sin(p);tn.add(Math.atan2(S,V)),r=f,o=x,s=m}ce.lineEnd=function(){c(t,i)}}function en(t){var i=t[0],r=t[1],o=Math.cos(r);return[o*Math.cos(i),o*Math.sin(i),Math.sin(r)]}function fi(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}function pn(t,i){return[t[1]*i[2]-t[2]*i[1],t[2]*i[0]-t[0]*i[2],t[0]*i[1]-t[1]*i[0]]}function ur(t,i){t[0]+=i[0],t[1]+=i[1],t[2]+=i[2]}function hi(t,i){return[t[0]*i,t[1]*i,t[2]*i]}function di(t){var i=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=i,t[1]/=i,t[2]/=i}function gi(t){return[Math.atan2(t[1],t[0]),ze(t[2])]}function pi(t,i){return at(t[0]-i[0])<et&&at(t[1]-i[1])<et}b.geo.bounds=function(){var t,i,r,o,s,c,f,l,h,g,p,x={point:m,lineStart:V,lineEnd:S,polygonStart:function(){x.point=A,x.lineStart=P,x.lineEnd=k,h=0,ce.polygonStart()},polygonEnd:function(){ce.polygonEnd(),x.point=m,x.lineStart=V,x.lineEnd=S,tn<0?(t=-(r=180),i=-(o=90)):h>et?o=90:h<-et&&(i=-90),p[0]=t,p[1]=r}};function m(F,D){g.push(p=[t=F,r=F]),D<i&&(i=D),D>o&&(o=D)}function T(F,D){var O=en([F*ht,D*ht]);if(l){var H=pn(l,O),U=[H[1],-H[0],0],tt=pn(U,H);di(tt),tt=gi(tt);var q=F-s,Z=q>0?1:-1,z=tt[0]*Et*Z,Y=at(q)>180;if(Y^(Z*s<z&&z<Z*F)){var W=tt[1]*Et;W>o&&(o=W)}else if(z=(z+360)%360-180,Y^(Z*s<z&&z<Z*F)){var W=-tt[1]*Et;W<i&&(i=W)}else D<i&&(i=D),D>o&&(o=D);Y?F<s?L(t,F)>L(t,r)&&(r=F):L(F,r)>L(t,r)&&(t=F):r>=t?(F<t&&(t=F),F>r&&(r=F)):F>s?L(t,F)>L(t,r)&&(r=F):L(F,r)>L(t,r)&&(t=F)}else m(F,D);l=O,s=F}function V(){x.point=T}function S(){p[0]=t,p[1]=r,x.point=m,l=null}function A(F,D){if(l){var O=F-s;h+=at(O)>180?O+(O>0?360:-360):O}else c=F,f=D;ce.point(F,D),T(F,D)}function P(){ce.lineStart()}function k(){A(c,f),ce.lineEnd(),at(h)>et&&(t=-(r=180)),p[0]=t,p[1]=r,l=null}function L(F,D){return(D-=F)<0?D+360:D}function E(F,D){return F[0]-D[0]}function I(F,D){return D[0]<=D[1]?D[0]<=F&&F<=D[1]:F<D[0]||D[1]<F}return function(F){o=r=-(t=i=1/0),g=[],b.geo.stream(F,x);var D=g.length;if(D){g.sort(E);for(var O=1,H=g[0],U,tt=[H];O<D;++O)U=g[O],I(U[0],H)||I(U[1],H)?(L(H[0],U[1])>L(H[0],H[1])&&(H[1]=U[1]),L(U[0],H[1])>L(H[0],H[1])&&(H[0]=U[0])):tt.push(H=U);for(var q=-1/0,Z,D=tt.length-1,O=0,H=tt[D],U;O<=D;H=U,++O)U=tt[O],(Z=L(H[1],U[0]))>q&&(q=Z,t=U[0],r=H[1])}return g=p=null,t===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,i],[r,o]]}}(),b.geo.centroid=function(t){En=_i=nn=rn=$e=Xe=Be=Ce=_n=xn=He=0,b.geo.stream(t,me);var i=_n,r=xn,o=He,s=i*i+r*r+o*o;return s<se&&(i=Xe,r=Be,o=Ce,_i<et&&(i=nn,r=rn,o=$e),s=i*i+r*r+o*o,s<se)?[NaN,NaN]:[Math.atan2(r,i)*Et,ze(o/Math.sqrt(s))*Et]};var En,_i,nn,rn,$e,Xe,Be,Ce,_n,xn,He,me={sphere:d,point:cr,lineStart:Pa,lineEnd:La,polygonStart:function(){me.lineStart=js},polygonEnd:function(){me.lineStart=Pa}};function cr(t,i){t*=ht;var r=Math.cos(i*=ht);Vn(r*Math.cos(t),r*Math.sin(t),Math.sin(i))}function Vn(t,i,r){++En,nn+=(t-nn)/En,rn+=(i-rn)/En,$e+=(r-$e)/En}function Pa(){var t,i,r;me.point=function(s,c){s*=ht;var f=Math.cos(c*=ht);t=f*Math.cos(s),i=f*Math.sin(s),r=Math.sin(c),me.point=o,Vn(t,i,r)};function o(s,c){s*=ht;var f=Math.cos(c*=ht),l=f*Math.cos(s),h=f*Math.sin(s),g=Math.sin(c),p=Math.atan2(Math.sqrt((p=i*g-r*h)*p+(p=r*l-t*g)*p+(p=t*h-i*l)*p),t*l+i*h+r*g);_i+=p,Xe+=p*(t+(t=l)),Be+=p*(i+(i=h)),Ce+=p*(r+(r=g)),Vn(t,i,r)}}function La(){me.point=cr}function js(){var t,i,r,o,s;me.point=function(f,l){t=f,i=l,me.point=c,f*=ht;var h=Math.cos(l*=ht);r=h*Math.cos(f),o=h*Math.sin(f),s=Math.sin(l),Vn(r,o,s)},me.lineEnd=function(){c(t,i),me.lineEnd=La,me.point=cr};function c(f,l){f*=ht;var h=Math.cos(l*=ht),g=h*Math.cos(f),p=h*Math.sin(f),x=Math.sin(l),m=o*x-s*p,T=s*g-r*x,V=r*p-o*g,S=Math.sqrt(m*m+T*T+V*V),A=r*g+o*p+s*x,P=S&&-Jr(A)/S,k=Math.atan2(S,A);_n+=P*m,xn+=P*T,He+=P*V,_i+=k,Xe+=k*(r+(r=g)),Be+=k*(o+(o=p)),Ce+=k*(s+(s=x)),Vn(r,o,s)}}function Ca(t,i){function r(o,s){return o=t(o,s),i(o[0],o[1])}return t.invert&&i.invert&&(r.invert=function(o,s){return o=i.invert(o,s),o&&t.invert(o[0],o[1])}),r}function kn(){return!0}function Ma(t,i,r,o,s){var c=[],f=[];if(t.forEach(function(S){if(!((A=S.length-1)<=0)){var A,P=S[0],k=S[A];if(pi(P,k)){s.lineStart();for(var L=0;L<A;++L)s.point((P=S[L])[0],P[1]);s.lineEnd();return}var E=new xi(P,S,null,!0),I=new xi(P,null,E,!1);E.o=I,c.push(E),f.push(I),E=new xi(k,S,null,!1),I=new xi(k,null,E,!0),E.o=I,c.push(E),f.push(I)}}),f.sort(i),Ea(c),Ea(f),!!c.length){for(var l=0,h=r,g=f.length;l<g;++l)f[l].e=h=!h;for(var p=c[0],x,m;;){for(var T=p,V=!0;T.v;)if((T=T.n)===p)return;x=T.z,s.lineStart();do{if(T.v=T.o.v=!0,T.e){if(V)for(var l=0,g=x.length;l<g;++l)s.point((m=x[l])[0],m[1]);else o(T.x,T.n.x,1,s);T=T.n}else{if(V){x=T.p.z;for(var l=x.length-1;l>=0;--l)s.point((m=x[l])[0],m[1])}else o(T.x,T.p.x,-1,s);T=T.p}T=T.o,x=T.z,V=!V}while(!T.v);s.lineEnd()}}}function Ea(t){if(i=t.length){for(var i,r=0,o=t[0],s;++r<i;)o.n=s=t[r],s.p=o,o=s;o.n=s=t[0],s.p=o}}function xi(t,i,r,o){this.x=t,this.z=i,this.o=r,this.e=o,this.v=!1,this.n=this.p=null}function Va(t,i,r,o){return function(s,c){var f=i(c),l=s.invert(o[0],o[1]),h={point:g,lineStart:x,lineEnd:m,polygonStart:function(){h.point=L,h.lineStart=E,h.lineEnd=I,T=[],P=[]},polygonEnd:function(){h.point=g,h.lineStart=x,h.lineEnd=m,T=b.merge(T);var F=Js(l,P);T.length?(A||(c.polygonStart(),A=!0),Ma(T,qs,F,r,c)):F&&(A||(c.polygonStart(),A=!0),c.lineStart(),r(null,null,1,c),c.lineEnd()),A&&(c.polygonEnd(),A=!1),T=P=null},sphere:function(){c.polygonStart(),c.lineStart(),r(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function g(F,D){var O=s(F,D);t(F=O[0],D=O[1])&&c.point(F,D)}function p(F,D){var O=s(F,D);f.point(O[0],O[1])}function x(){h.point=p,f.lineStart()}function m(){h.point=g,f.lineEnd()}var T,V=ka(),S=i(V),A=!1,P,k;function L(F,D){k.push([F,D]);var O=s(F,D);S.point(O[0],O[1])}function E(){S.lineStart(),k=[]}function I(){L(k[0][0],k[0][1]),S.lineEnd();var F=S.clean(),D=V.buffer(),O,H=D.length;if(k.pop(),P.push(k),k=null,!!H){if(F&1){O=D[0];var H=O.length-1,U=-1,tt;if(H>0){for(A||(c.polygonStart(),A=!0),c.lineStart();++U<H;)c.point((tt=O[U])[0],tt[1]);c.lineEnd()}return}H>1&&F&2&&D.push(D.pop().concat(D.shift())),T.push(D.filter(Ws))}}return h}}function Ws(t){return t.length>1}function ka(){var t=[],i;return{lineStart:function(){t.push(i=[])},point:function(r,o){i.push([r,o])},lineEnd:d,buffer:function(){var r=t;return t=[],i=null,r},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function qs(t,i){return((t=t.x)[0]<0?t[1]-$t-et:$t-t[1])-((i=i.x)[0]<0?i[1]-$t-et:$t-i[1])}var Ga=Va(kn,Qs,Ks,[-ft,-ft/2]);function Qs(t){var i=NaN,r=NaN,o=NaN,s;return{lineStart:function(){t.lineStart(),s=1},point:function(c,f){var l=c>0?ft:-ft,h=at(c-i);at(h-ft)<et?(t.point(i,r=(r+f)/2>0?$t:-$t),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(l,r),t.point(c,r),s=0):o!==l&&h>=ft&&(at(i-o)<et&&(i-=o*et),at(c-l)<et&&(c-=l*et),r=Zs(i,r,c,f),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(l,r),s=0),t.point(i=c,r=f),o=l},lineEnd:function(){t.lineEnd(),i=r=NaN},clean:function(){return 2-s}}}function Zs(t,i,r,o){var s,c,f=Math.sin(t-r);return at(f)>et?Math.atan((Math.sin(i)*(c=Math.cos(o))*Math.sin(r)-Math.sin(o)*(s=Math.cos(i))*Math.sin(t))/(s*c*f)):(i+o)/2}function Ks(t,i,r,o){var s;if(t==null)s=r*$t,o.point(-ft,s),o.point(0,s),o.point(ft,s),o.point(ft,0),o.point(ft,-s),o.point(0,-s),o.point(-ft,-s),o.point(-ft,0),o.point(-ft,s);else if(at(t[0]-i[0])>et){var c=t[0]<i[0]?ft:-ft;s=r*c/2,o.point(-c,s),o.point(0,s),o.point(c,s)}else o.point(i[0],i[1])}function Js(t,i){var r=t[0],o=t[1],s=[Math.sin(r),-Math.cos(r),0],c=0,f=0;tn.reset();for(var l=0,h=i.length;l<h;++l){var g=i[l],p=g.length;if(p)for(var x=g[0],m=x[0],T=x[1]/2+ft/4,V=Math.sin(T),S=Math.cos(T),A=1;;){A===p&&(A=0),t=g[A];var P=t[0],k=t[1]/2+ft/4,L=Math.sin(k),E=Math.cos(k),I=P-m,F=I>=0?1:-1,D=F*I,O=D>ft,H=V*L;if(tn.add(Math.atan2(H*F*Math.sin(D),S*E+H*Math.cos(D))),c+=O?I+F*ue:I,O^m>=r^P>=r){var U=pn(en(x),en(t));di(U);var tt=pn(s,U);di(tt);var q=(O^I>=0?-1:1)*ze(tt[2]);(o>q||o===q&&(U[0]||U[1]))&&(f+=O^I>=0?1:-1)}if(!A++)break;m=P,V=L,S=E,x=t}}return(c<-et||c<et&&tn<-et)^f&1}function tu(t){var i=Math.cos(t),r=i>0,o=at(i)>et,s=pr(t,6*ht);return Va(c,f,s,r?[0,-t]:[-ft,t-ft]);function c(g,p){return Math.cos(g)*Math.cos(p)>i}function f(g){var p,x,m,T,V;return{lineStart:function(){T=m=!1,V=1},point:function(S,A){var P=[S,A],k,L=c(S,A),E=r?L?0:h(S,A):L?h(S+(S<0?ft:-ft),A):0;if(!p&&(T=m=L)&&g.lineStart(),L!==m&&(k=l(p,P),(pi(p,k)||pi(P,k))&&(P[0]+=et,P[1]+=et,L=c(P[0],P[1]))),L!==m)V=0,L?(g.lineStart(),k=l(P,p),g.point(k[0],k[1])):(k=l(p,P),g.point(k[0],k[1]),g.lineEnd()),p=k;else if(o&&p&&r^L){var I;!(E&x)&&(I=l(P,p,!0))&&(V=0,r?(g.lineStart(),g.point(I[0][0],I[0][1]),g.point(I[1][0],I[1][1]),g.lineEnd()):(g.point(I[1][0],I[1][1]),g.lineEnd(),g.lineStart(),g.point(I[0][0],I[0][1])))}L&&(!p||!pi(p,P))&&g.point(P[0],P[1]),p=P,m=L,x=E},lineEnd:function(){m&&g.lineEnd(),p=null},clean:function(){return V|(T&&m)<<1}}}function l(g,p,x){var m=en(g),T=en(p),V=[1,0,0],S=pn(m,T),A=fi(S,S),P=S[0],k=A-P*P;if(!k)return!x&&g;var L=i*A/k,E=-i*P/k,I=pn(V,S),F=hi(V,L),D=hi(S,E);ur(F,D);var O=I,H=fi(F,O),U=fi(O,O),tt=H*H-U*(fi(F,F)-1);if(!(tt<0)){var q=Math.sqrt(tt),Z=hi(O,(-H-q)/U);if(ur(Z,F),Z=gi(Z),!x)return Z;var z=g[0],Y=p[0],W=g[1],X=p[1],j;Y<z&&(j=z,z=Y,Y=j);var nt=Y-z,ct=at(nt-ft)<et,dt=ct||nt<et;if(!ct&&X<W&&(j=W,W=X,X=j),dt?ct?W+X>0^Z[1]<(at(Z[0]-z)<et?W:X):W<=Z[1]&&Z[1]<=X:nt>ft^(z<=Z[0]&&Z[0]<=Y)){var St=hi(O,(-H+q)/U);return ur(St,F),[Z,gi(St)]}}}function h(g,p){var x=r?t:ft-t,m=0;return g<-x?m|=1:g>x&&(m|=2),p<-x?m|=4:p>x&&(m|=8),m}}function Ra(t,i,r,o){return function(s){var c=s.a,f=s.b,l=c.x,h=c.y,g=f.x,p=f.y,x=0,m=1,T=g-l,V=p-h,S;if(S=t-l,!(!T&&S>0)){if(S/=T,T<0){if(S<x)return;S<m&&(m=S)}else if(T>0){if(S>m)return;S>x&&(x=S)}if(S=r-l,!(!T&&S<0)){if(S/=T,T<0){if(S>m)return;S>x&&(x=S)}else if(T>0){if(S<x)return;S<m&&(m=S)}if(S=i-h,!(!V&&S>0)){if(S/=V,V<0){if(S<x)return;S<m&&(m=S)}else if(V>0){if(S>m)return;S>x&&(x=S)}if(S=o-h,!(!V&&S<0)){if(S/=V,V<0){if(S>m)return;S>x&&(x=S)}else if(V>0){if(S<x)return;S<m&&(m=S)}return x>0&&(s.a={x:l+x*T,y:h+x*V}),m<1&&(s.b={x:l+m*T,y:h+m*V}),s}}}}}}var mi=1e9;b.geo.clipExtent=function(){var t,i,r,o,s,c,f={stream:function(l){return s&&(s.valid=!1),s=c(l),s.valid=!0,s},extent:function(l){return arguments.length?(c=$a(t=+l[0][0],i=+l[0][1],r=+l[1][0],o=+l[1][1]),s&&(s.valid=!1,s=null),f):[[t,i],[r,o]]}};return f.extent([[0,0],[960,500]])};function $a(t,i,r,o){return function(l){var h=l,g=ka(),p=Ra(t,i,r,o),x,m,T,V={point:k,lineStart:tt,lineEnd:q,polygonStart:function(){l=g,x=[],m=[],U=!0},polygonEnd:function(){l=h,x=b.merge(x);var z=S([t,o]),Y=U&&z,W=x.length;(Y||W)&&(l.polygonStart(),Y&&(l.lineStart(),A(null,null,1,l),l.lineEnd()),W&&Ma(x,c,z,A,l),l.polygonEnd()),x=m=T=null}};function S(z){for(var Y=0,W=m.length,X=z[1],j=0;j<W;++j)for(var nt=1,ct=m[j],dt=ct.length,St=ct[0],Pt;nt<dt;++nt)Pt=ct[nt],St[1]<=X?Pt[1]>X&&Hi(St,Pt,z)>0&&++Y:Pt[1]<=X&&Hi(St,Pt,z)<0&&--Y,St=Pt;return Y!==0}function A(z,Y,W,X){var j=0,nt=0;if(z==null||(j=s(z,W))!==(nt=s(Y,W))||f(z,Y)<0^W>0)do X.point(j===0||j===3?t:r,j>1?o:i);while((j=(j+W+4)%4)!==nt);else X.point(Y[0],Y[1])}function P(z,Y){return t<=z&&z<=r&&i<=Y&&Y<=o}function k(z,Y){P(z,Y)&&l.point(z,Y)}var L,E,I,F,D,O,H,U;function tt(){V.point=Z,m&&m.push(T=[]),H=!0,O=!1,F=D=NaN}function q(){x&&(Z(L,E),I&&O&&g.rejoin(),x.push(g.buffer())),V.point=k,O&&l.lineEnd()}function Z(z,Y){z=Math.max(-mi,Math.min(mi,z)),Y=Math.max(-mi,Math.min(mi,Y));var W=P(z,Y);if(m&&T.push([z,Y]),H)L=z,E=Y,I=W,H=!1,W&&(l.lineStart(),l.point(z,Y));else if(W&&O)l.point(z,Y);else{var X={a:{x:F,y:D},b:{x:z,y:Y}};p(X)?(O||(l.lineStart(),l.point(X.a.x,X.a.y)),l.point(X.b.x,X.b.y),W||l.lineEnd(),U=!1):W&&(l.lineStart(),l.point(z,Y),U=!1)}F=z,D=Y,O=W}return V};function s(l,h){return at(l[0]-t)<et?h>0?0:3:at(l[0]-r)<et?h>0?2:1:at(l[1]-i)<et?h>0?1:0:h>0?3:2}function c(l,h){return f(l.x,h.x)}function f(l,h){var g=s(l,1),p=s(h,1);return g!==p?g-p:g===0?h[1]-l[1]:g===1?l[0]-h[0]:g===2?l[1]-h[1]:h[0]-l[0]}}function lr(t){var i=0,r=ft/3,o=dr(t),s=o(i,r);return s.parallels=function(c){return arguments.length?o(i=c[0]*ft/180,r=c[1]*ft/180):[i/ft*180,r/ft*180]},s}function Oa(t,i){var r=Math.sin(t),o=(r+Math.sin(i))/2,s=1+r*(2*o-r),c=Math.sqrt(s)/o;function f(l,h){var g=Math.sqrt(s-2*o*Math.sin(h))/o;return[g*Math.sin(l*=o),c-g*Math.cos(l)]}return f.invert=function(l,h){var g=c-h;return[Math.atan2(l,g)/o,ze((s-(l*l+g*g)*o*o)/(2*o))]},f}(b.geo.conicEqualArea=function(){return lr(Oa)}).raw=Oa,b.geo.albers=function(){return b.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},b.geo.albersUsa=function(){var t=b.geo.albers(),i=b.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r=b.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,s={point:function(g,p){o=[g,p]}},c,f,l;function h(g){var p=g[0],x=g[1];return o=null,c(p,x),o||(f(p,x),o)||l(p,x),o}return h.invert=function(g){var p=t.scale(),x=t.translate(),m=(g[0]-x[0])/p,T=(g[1]-x[1])/p;return(T>=.12&&T<.234&&m>=-.425&&m<-.214?i:T>=.166&&T<.234&&m>=-.214&&m<-.115?r:t).invert(g)},h.stream=function(g){var p=t.stream(g),x=i.stream(g),m=r.stream(g);return{point:function(T,V){p.point(T,V),x.point(T,V),m.point(T,V)},sphere:function(){p.sphere(),x.sphere(),m.sphere()},lineStart:function(){p.lineStart(),x.lineStart(),m.lineStart()},lineEnd:function(){p.lineEnd(),x.lineEnd(),m.lineEnd()},polygonStart:function(){p.polygonStart(),x.polygonStart(),m.polygonStart()},polygonEnd:function(){p.polygonEnd(),x.polygonEnd(),m.polygonEnd()}}},h.precision=function(g){return arguments.length?(t.precision(g),i.precision(g),r.precision(g),h):t.precision()},h.scale=function(g){return arguments.length?(t.scale(g),i.scale(g*.35),r.scale(g),h.translate(t.translate())):t.scale()},h.translate=function(g){if(!arguments.length)return t.translate();var p=t.scale(),x=+g[0],m=+g[1];return c=t.translate(g).clipExtent([[x-.455*p,m-.238*p],[x+.455*p,m+.238*p]]).stream(s).point,f=i.translate([x-.307*p,m+.201*p]).clipExtent([[x-.425*p+et,m+.12*p+et],[x-.214*p-et,m+.234*p-et]]).stream(s).point,l=r.translate([x-.205*p,m+.212*p]).clipExtent([[x-.214*p+et,m+.166*p+et],[x-.115*p-et,m+.234*p-et]]).stream(s).point,h},h.scale(1070)};var fr,hr,Ye={point:d,lineStart:d,lineEnd:d,polygonStart:function(){hr=0,Ye.lineStart=eu},polygonEnd:function(){Ye.lineStart=Ye.lineEnd=Ye.point=d,fr+=at(hr/2)}};function eu(){var t,i,r,o;Ye.point=function(c,f){Ye.point=s,t=r=c,i=o=f};function s(c,f){hr+=o*c-r*f,r=c,o=f}Ye.lineEnd=function(){s(t,i)}}var yi,vi,wi,Si,nu={point:iu,lineStart:d,lineEnd:d,polygonStart:d,polygonEnd:d};function iu(t,i){t<yi&&(yi=t),t>wi&&(wi=t),i<vi&&(vi=i),i>Si&&(Si=i)}function ru(){var t=Da(4.5),i=[],r={point:o,lineStart:function(){r.point=s},lineEnd:f,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=f,r.point=o},pointRadius:function(h){return t=Da(h),r},result:function(){if(i.length){var h=i.join("");return i=[],h}}};function o(h,g){i.push("M",h,",",g,t)}function s(h,g){i.push("M",h,",",g),r.point=c}function c(h,g){i.push("L",h,",",g)}function f(){r.point=o}function l(){i.push("Z")}return r}function Da(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var ye={point:an,lineStart:Fa,lineEnd:Ia,polygonStart:function(){ye.lineStart=au},polygonEnd:function(){ye.point=an,ye.lineStart=Fa,ye.lineEnd=Ia}};function an(t,i){nn+=t,rn+=i,++$e}function Fa(){var t,i;ye.point=function(o,s){ye.point=r,an(t=o,i=s)};function r(o,s){var c=o-t,f=s-i,l=Math.sqrt(c*c+f*f);Xe+=l*(t+o)/2,Be+=l*(i+s)/2,Ce+=l,an(t=o,i=s)}}function Ia(){ye.point=an}function au(){var t,i,r,o;ye.point=function(c,f){ye.point=s,an(t=r=c,i=o=f)};function s(c,f){var l=c-r,h=f-o,g=Math.sqrt(l*l+h*h);Xe+=g*(r+c)/2,Be+=g*(o+f)/2,Ce+=g,g=o*c-r*f,_n+=g*(r+c),xn+=g*(o+f),He+=g*3,an(r=c,o=f)}ye.lineEnd=function(){s(t,i)}}function ou(t){var i=4.5,r={point:o,lineStart:function(){r.point=s},lineEnd:f,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=f,r.point=o},pointRadius:function(h){return i=h,r},result:d};function o(h,g){t.moveTo(h+i,g),t.arc(h,g,i,0,ue)}function s(h,g){t.moveTo(h,g),r.point=c}function c(h,g){t.lineTo(h,g)}function f(){r.point=o}function l(){t.closePath()}return r}function Na(t){var i=.5,r=Math.cos(30*ht),o=16;function s(h){return(o?f:c)(h)}function c(h){return Xa(h,function(g,p){g=t(g,p),h.point(g[0],g[1])})}function f(h){var g,p,x,m,T,V,S,A,P,k,L,E,I={point:F,lineStart:D,lineEnd:H,polygonStart:function(){h.polygonStart(),I.lineStart=U},polygonEnd:function(){h.polygonEnd(),I.lineStart=D}};function F(Z,z){Z=t(Z,z),h.point(Z[0],Z[1])}function D(){A=NaN,I.point=O,h.lineStart()}function O(Z,z){var Y=en([Z,z]),W=t(Z,z);l(A,P,S,k,L,E,A=W[0],P=W[1],S=Z,k=Y[0],L=Y[1],E=Y[2],o,h),h.point(A,P)}function H(){I.point=F,h.lineEnd()}function U(){D(),I.point=tt,I.lineEnd=q}function tt(Z,z){O(g=Z,z),p=A,x=P,m=k,T=L,V=E,I.point=O}function q(){l(A,P,S,k,L,E,p,x,g,m,T,V,o,h),I.lineEnd=H,H()}return I}function l(h,g,p,x,m,T,V,S,A,P,k,L,E,I){var F=V-h,D=S-g,O=F*F+D*D;if(O>4*i&&E--){var H=x+P,U=m+k,tt=T+L,q=Math.sqrt(H*H+U*U+tt*tt),Z=Math.asin(tt/=q),z=at(at(tt)-1)<et||at(p-A)<et?(p+A)/2:Math.atan2(U,H),Y=t(z,Z),W=Y[0],X=Y[1],j=W-h,nt=X-g,ct=D*j-F*nt;(ct*ct/O>i||at((F*j+D*nt)/O-.5)>.3||x*P+m*k+T*L<r)&&(l(h,g,p,x,m,T,W,X,z,H/=q,U/=q,tt,E,I),I.point(W,X),l(W,X,z,H,U,tt,V,S,A,P,k,L,E,I))}}return s.precision=function(h){return arguments.length?(o=(i=h*h)>0&&16,s):Math.sqrt(i)},s}b.geo.path=function(){var t=4.5,i,r,o,s,c;function f(h){return h&&(typeof t=="function"&&s.pointRadius(+t.apply(this,arguments)),(!c||!c.valid)&&(c=o(s)),b.geo.stream(h,c)),s.result()}f.area=function(h){return fr=0,b.geo.stream(h,o(Ye)),fr},f.centroid=function(h){return nn=rn=$e=Xe=Be=Ce=_n=xn=He=0,b.geo.stream(h,o(ye)),He?[_n/He,xn/He]:Ce?[Xe/Ce,Be/Ce]:$e?[nn/$e,rn/$e]:[NaN,NaN]},f.bounds=function(h){return wi=Si=-(yi=vi=1/0),b.geo.stream(h,o(nu)),[[yi,vi],[wi,Si]]},f.projection=function(h){return arguments.length?(o=(i=h)?h.stream||su(h):e,l()):i},f.context=function(h){return arguments.length?(s=(r=h)==null?new ru:new ou(h),typeof t!="function"&&s.pointRadius(t),l()):r},f.pointRadius=function(h){return arguments.length?(t=typeof h=="function"?h:(s.pointRadius(+h),+h),f):t};function l(){return c=null,f}return f.projection(b.geo.albersUsa()).context(null)};function su(t){var i=Na(function(r,o){return t([r*Et,o*Et])});return function(r){return Ba(i(r))}}b.geo.transform=function(t){return{stream:function(i){var r=new za(i);for(var o in t)r[o]=t[o];return r}}};function za(t){this.stream=t}za.prototype={point:function(t,i){this.stream.point(t,i)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Xa(t,i){return{point:i,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}b.geo.projection=Ue,b.geo.projectionMutator=dr;function Ue(t){return dr(function(){return t})()}function dr(t){var i,r,o,s=Na(function(O,H){return O=i(O,H),[O[0]*c+T,V-O[1]*c]}),c=150,f=480,l=250,h=0,g=0,p=0,x=0,m=0,T,V,S=Ga,A=e,P=null,k=null,L;function E(O){return O=o(O[0]*ht,O[1]*ht),[O[0]*c+T,V-O[1]*c]}function I(O){return O=o.invert((O[0]-T)/c,(V-O[1])/c),O&&[O[0]*Et,O[1]*Et]}E.stream=function(O){return L&&(L.valid=!1),L=Ba(S(r,s(A(O)))),L.valid=!0,L},E.clipAngle=function(O){return arguments.length?(S=O==null?(P=O,Ga):tu((P=+O)*ht),D()):P},E.clipExtent=function(O){return arguments.length?(k=O,A=O?$a(O[0][0],O[0][1],O[1][0],O[1][1]):e,D()):k},E.scale=function(O){return arguments.length?(c=+O,F()):c},E.translate=function(O){return arguments.length?(f=+O[0],l=+O[1],F()):[f,l]},E.center=function(O){return arguments.length?(h=O[0]%360*ht,g=O[1]%360*ht,F()):[h*Et,g*Et]},E.rotate=function(O){return arguments.length?(p=O[0]%360*ht,x=O[1]%360*ht,m=O.length>2?O[2]%360*ht:0,F()):[p*Et,x*Et,m*Et]},b.rebind(E,s,"precision");function F(){o=Ca(r=gr(p,x,m),i);var O=i(h,g);return T=f-O[0]*c,V=l+O[1]*c,D()}function D(){return L&&(L.valid=!1,L=null),E}return function(){return i=t.apply(this,arguments),E.invert=i.invert&&I,F()}}function Ba(t){return Xa(t,function(i,r){t.point(i*ht,r*ht)})}function Gn(t,i){return[t,i]}(b.geo.equirectangular=function(){return Ue(Gn)}).raw=Gn.invert=Gn,b.geo.rotation=function(t){t=gr(t[0]%360*ht,t[1]*ht,t.length>2?t[2]*ht:0);function i(r){return r=t(r[0]*ht,r[1]*ht),r[0]*=Et,r[1]*=Et,r}return i.invert=function(r){return r=t.invert(r[0]*ht,r[1]*ht),r[0]*=Et,r[1]*=Et,r},i};function Ha(t,i){return[t>ft?t-ue:t<-ft?t+ue:t,i]}Ha.invert=Gn;function gr(t,i,r){return t?i||r?Ca(Ua(t),ja(i,r)):Ua(t):i||r?ja(i,r):Ha}function Ya(t){return function(i,r){return i+=t,[i>ft?i-ue:i<-ft?i+ue:i,r]}}function Ua(t){var i=Ya(t);return i.invert=Ya(-t),i}function ja(t,i){var r=Math.cos(t),o=Math.sin(t),s=Math.cos(i),c=Math.sin(i);function f(l,h){var g=Math.cos(h),p=Math.cos(l)*g,x=Math.sin(l)*g,m=Math.sin(h),T=m*r+p*o;return[Math.atan2(x*s-T*c,p*r-m*o),ze(T*s+x*c)]}return f.invert=function(l,h){var g=Math.cos(h),p=Math.cos(l)*g,x=Math.sin(l)*g,m=Math.sin(h),T=m*s-x*c;return[Math.atan2(x*s+m*c,p*r+T*o),ze(T*r-p*o)]},f}b.geo.circle=function(){var t=[0,0],i,r=6,o;function s(){var c=typeof t=="function"?t.apply(this,arguments):t,f=gr(-c[0]*ht,-c[1]*ht,0).invert,l=[];return o(null,null,1,{point:function(h,g){l.push(h=f(h,g)),h[0]*=Et,h[1]*=Et}}),{type:"Polygon",coordinates:[l]}}return s.origin=function(c){return arguments.length?(t=c,s):t},s.angle=function(c){return arguments.length?(o=pr((i=+c)*ht,r*ht),s):i},s.precision=function(c){return arguments.length?(o=pr(i*ht,(r=+c)*ht),s):r},s.angle(90)};function pr(t,i){var r=Math.cos(t),o=Math.sin(t);return function(s,c,f,l){var h=f*i;s!=null?(s=Wa(r,s),c=Wa(r,c),(f>0?s<c:s>c)&&(s+=f*ue)):(s=t+f*ue,c=t-.5*h);for(var g,p=s;f>0?p>c:p<c;p-=h)l.point((g=gi([r,-o*Math.cos(p),-o*Math.sin(p)]))[0],g[1])}}function Wa(t,i){var r=en(i);r[0]-=t,di(r);var o=Jr(-r[1]);return((-r[2]<0?-o:o)+2*Math.PI-et)%(2*Math.PI)}b.geo.distance=function(t,i){var r=(i[0]-t[0])*ht,o=t[1]*ht,s=i[1]*ht,c=Math.sin(r),f=Math.cos(r),l=Math.sin(o),h=Math.cos(o),g=Math.sin(s),p=Math.cos(s),x;return Math.atan2(Math.sqrt((x=p*c)*x+(x=h*g-l*p*f)*x),l*g+h*p*f)},b.geo.graticule=function(){var t,i,r,o,s,c,f,l,h=10,g=h,p=90,x=360,m,T,V,S,A=2.5;function P(){return{type:"MultiLineString",coordinates:k()}}function k(){return b.range(Math.ceil(o/p)*p,r,p).map(V).concat(b.range(Math.ceil(l/x)*x,f,x).map(S)).concat(b.range(Math.ceil(i/h)*h,t,h).filter(function(L){return at(L%p)>et}).map(m)).concat(b.range(Math.ceil(c/g)*g,s,g).filter(function(L){return at(L%x)>et}).map(T))}return P.lines=function(){return k().map(function(L){return{type:"LineString",coordinates:L}})},P.outline=function(){return{type:"Polygon",coordinates:[V(o).concat(S(f).slice(1),V(r).reverse().slice(1),S(l).reverse().slice(1))]}},P.extent=function(L){return arguments.length?P.majorExtent(L).minorExtent(L):P.minorExtent()},P.majorExtent=function(L){return arguments.length?(o=+L[0][0],r=+L[1][0],l=+L[0][1],f=+L[1][1],o>r&&(L=o,o=r,r=L),l>f&&(L=l,l=f,f=L),P.precision(A)):[[o,l],[r,f]]},P.minorExtent=function(L){return arguments.length?(i=+L[0][0],t=+L[1][0],c=+L[0][1],s=+L[1][1],i>t&&(L=i,i=t,t=L),c>s&&(L=c,c=s,s=L),P.precision(A)):[[i,c],[t,s]]},P.step=function(L){return arguments.length?P.majorStep(L).minorStep(L):P.minorStep()},P.majorStep=function(L){return arguments.length?(p=+L[0],x=+L[1],P):[p,x]},P.minorStep=function(L){return arguments.length?(h=+L[0],g=+L[1],P):[h,g]},P.precision=function(L){return arguments.length?(A=+L,m=qa(c,s,90),T=Qa(i,t,A),V=qa(l,f,90),S=Qa(o,r,A),P):A},P.majorExtent([[-180,-90+et],[180,90-et]]).minorExtent([[-180,-80-et],[180,80+et]])};function qa(t,i,r){var o=b.range(t,i-et,r).concat(i);return function(s){return o.map(function(c){return[s,c]})}}function Qa(t,i,r){var o=b.range(t,i-et,r).concat(i);return function(s){return o.map(function(c){return[c,s]})}}function _r(t){return t.source}function xr(t){return t.target}b.geo.greatArc=function(){var t=_r,i,r=xr,o;function s(){return{type:"LineString",coordinates:[i||t.apply(this,arguments),o||r.apply(this,arguments)]}}return s.distance=function(){return b.geo.distance(i||t.apply(this,arguments),o||r.apply(this,arguments))},s.source=function(c){return arguments.length?(t=c,i=typeof c=="function"?null:c,s):t},s.target=function(c){return arguments.length?(r=c,o=typeof c=="function"?null:c,s):r},s.precision=function(){return arguments.length?s:0},s},b.geo.interpolate=function(t,i){return uu(t[0]*ht,t[1]*ht,i[0]*ht,i[1]*ht)};function uu(t,i,r,o){var s=Math.cos(i),c=Math.sin(i),f=Math.cos(o),l=Math.sin(o),h=s*Math.cos(t),g=s*Math.sin(t),p=f*Math.cos(r),x=f*Math.sin(r),m=2*Math.asin(Math.sqrt(ea(o-i)+s*f*ea(r-t))),T=1/Math.sin(m),V=m?function(S){var A=Math.sin(S*=m)*T,P=Math.sin(m-S)*T,k=P*h+A*p,L=P*g+A*x,E=P*c+A*l;return[Math.atan2(L,k)*Et,Math.atan2(E,Math.sqrt(k*k+L*L))*Et]}:function(){return[t*Et,i*Et]};return V.distance=m,V}b.geo.length=function(t){return mr=0,b.geo.stream(t,mn),mr};var mr,mn={sphere:d,point:d,lineStart:cu,lineEnd:d,polygonStart:d,polygonEnd:d};function cu(){var t,i,r;mn.point=function(s,c){t=s*ht,i=Math.sin(c*=ht),r=Math.cos(c),mn.point=o},mn.lineEnd=function(){mn.point=mn.lineEnd=d};function o(s,c){var f=Math.sin(c*=ht),l=Math.cos(c),h=at((s*=ht)-t),g=Math.cos(h);mr+=Math.atan2(Math.sqrt((h=l*Math.sin(h))*h+(h=r*f-i*l*g)*h),i*f+r*l*g),t=s,i=f,r=l}}function Rn(t,i){function r(o,s){var c=Math.cos(o),f=Math.cos(s),l=t(c*f);return[l*f*Math.sin(o),l*Math.sin(s)]}return r.invert=function(o,s){var c=Math.sqrt(o*o+s*s),f=i(c),l=Math.sin(f),h=Math.cos(f);return[Math.atan2(o*l,c*h),Math.asin(c&&s*l/c)]},r}var Za=Rn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(b.geo.azimuthalEqualArea=function(){return Ue(Za)}).raw=Za;var Ka=Rn(function(t){var i=Math.acos(t);return i&&i/Math.sin(i)},e);(b.geo.azimuthalEquidistant=function(){return Ue(Ka)}).raw=Ka;function Ja(t,i){var r=Math.cos(t),o=function(l){return Math.tan(ft/4+l/2)},s=t===i?Math.sin(t):Math.log(r/Math.cos(i))/Math.log(o(i)/o(t)),c=r*Math.pow(o(t),s)/s;if(!s)return bi;function f(l,h){c>0?h<-$t+et&&(h=-$t+et):h>$t-et&&(h=$t-et);var g=c/Math.pow(o(h),s);return[g*Math.sin(s*l),c-g*Math.cos(s*l)]}return f.invert=function(l,h){var g=c-h,p=Kr(s)*Math.sqrt(l*l+g*g);return[Math.atan2(l,g)/s,2*Math.atan(Math.pow(c/p,1/s))-$t]},f}(b.geo.conicConformal=function(){return lr(Ja)}).raw=Ja;function to(t,i){var r=Math.cos(t),o=t===i?Math.sin(t):(r-Math.cos(i))/(i-t),s=r/o+t;if(at(o)<et)return Gn;function c(f,l){var h=s-l;return[h*Math.sin(o*f),s-h*Math.cos(o*f)]}return c.invert=function(f,l){var h=s-l;return[Math.atan2(f,h)/o,s-Kr(o)*Math.sqrt(f*f+h*h)]},c}(b.geo.conicEquidistant=function(){return lr(to)}).raw=to;var eo=Rn(function(t){return 1/t},Math.atan);(b.geo.gnomonic=function(){return Ue(eo)}).raw=eo;function bi(t,i){return[t,Math.log(Math.tan(ft/4+i/2))]}bi.invert=function(t,i){return[t,2*Math.atan(Math.exp(i))-$t]};function no(t){var i=Ue(t),r=i.scale,o=i.translate,s=i.clipExtent,c;return i.scale=function(){var f=r.apply(i,arguments);return f===i?c?i.clipExtent(null):i:f},i.translate=function(){var f=o.apply(i,arguments);return f===i?c?i.clipExtent(null):i:f},i.clipExtent=function(f){var l=s.apply(i,arguments);if(l===i){if(c=f==null){var h=ft*r(),g=o();s([[g[0]-h,g[1]-h],[g[0]+h,g[1]+h]])}}else c&&(l=null);return l},i.clipExtent(null)}(b.geo.mercator=function(){return no(bi)}).raw=bi;var io=Rn(function(){return 1},Math.asin);(b.geo.orthographic=function(){return Ue(io)}).raw=io;var ro=Rn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(b.geo.stereographic=function(){return Ue(ro)}).raw=ro;function yr(t,i){return[Math.log(Math.tan(ft/4+i/2)),-t]}yr.invert=function(t,i){return[-i,2*Math.atan(Math.exp(t))-$t]},(b.geo.transverseMercator=function(){var t=no(yr),i=t.center,r=t.rotate;return t.center=function(o){return o?i([-o[1],o[0]]):(o=i(),[o[1],-o[0]])},t.rotate=function(o){return o?r([o[0],o[1],o.length>2?o[2]+90:90]):(o=r(),[o[0],o[1],o[2]-90])},r([0,0,90])}).raw=yr,b.geom={};function yn(t){return t[0]}function $n(t){return t[1]}b.geom.hull=function(t){var i=yn,r=$n;if(arguments.length)return o(t);function o(s){if(s.length<3)return[];var c=At(i),f=At(r),l,h=s.length,g=[],p=[];for(l=0;l<h;l++)g.push([+c.call(this,s[l],l),+f.call(this,s[l],l),l]);for(g.sort(lu),l=0;l<h;l++)p.push([g[l][0],-g[l][1]]);var x=ao(g),m=ao(p),T=m[0]===x[0],V=m[m.length-1]===x[x.length-1],S=[];for(l=x.length-1;l>=0;--l)S.push(s[g[x[l]][2]]);for(l=+T;l<m.length-V;++l)S.push(s[g[m[l]][2]]);return S}return o.x=function(s){return arguments.length?(i=s,o):i},o.y=function(s){return arguments.length?(r=s,o):r},o};function ao(t){for(var i=t.length,r=[0,1],o=2,s=2;s<i;s++){for(;o>1&&Hi(t[r[o-2]],t[r[o-1]],t[s])<=0;)--o;r[o++]=s}return r.slice(0,o)}function lu(t,i){return t[0]-i[0]||t[1]-i[1]}b.geom.polygon=function(t){return $(t,Ai),t};var Ai=b.geom.polygon.prototype=[];Ai.area=function(){for(var t=-1,i=this.length,r,o=this[i-1],s=0;++t<i;)r=o,o=this[t],s+=r[1]*o[0]-r[0]*o[1];return s*.5},Ai.centroid=function(t){var i=-1,r=this.length,o=0,s=0,c,f=this[r-1],l;for(arguments.length||(t=-1/(6*this.area()));++i<r;)c=f,f=this[i],l=c[0]*f[1]-f[0]*c[1],o+=(c[0]+f[0])*l,s+=(c[1]+f[1])*l;return[o*t,s*t]},Ai.clip=function(t){for(var i,r=oo(t),o=-1,s=this.length-oo(this),c,f,l=this[s-1],h,g,p;++o<s;){for(i=t.slice(),t.length=0,h=this[o],g=i[(f=i.length-r)-1],c=-1;++c<f;)p=i[c],vr(p,l,h)?(vr(g,l,h)||t.push(wr(g,p,l,h)),t.push(p)):vr(g,l,h)&&t.push(wr(g,p,l,h)),g=p;r&&t.push(t[0]),l=h}return t};function vr(t,i,r){return(r[0]-i[0])*(t[1]-i[1])<(r[1]-i[1])*(t[0]-i[0])}function wr(t,i,r,o){var s=t[0],c=r[0],f=i[0]-s,l=o[0]-c,h=t[1],g=r[1],p=i[1]-h,x=o[1]-g,m=(l*(h-g)-x*(s-c))/(x*f-l*p);return[s+m*f,h+m*p]}function oo(t){var i=t[0],r=t[t.length-1];return!(i[0]-r[0]||i[1]-r[1])}var vn,on,wn,so=[],Sr,On,uo=[];function fu(){Li(this),this.edge=this.site=this.circle=null}function co(t){var i=so.pop()||new fu;return i.site=t,i}function br(t){bn(t),wn.remove(t),so.push(t),Li(t)}function hu(t){var i=t.circle,r=i.x,o=i.cy,s={x:r,y:o},c=t.P,f=t.N,l=[t];br(t);for(var h=c;h.circle&&at(r-h.circle.x)<et&&at(o-h.circle.cy)<et;)c=h.P,l.unshift(h),br(h),h=c;l.unshift(h),bn(h);for(var g=f;g.circle&&at(r-g.circle.x)<et&&at(o-g.circle.cy)<et;)f=g.N,l.push(g),br(g),g=f;l.push(g),bn(g);var p=l.length,x;for(x=1;x<p;++x)g=l[x],h=l[x-1],Ti(g.edge,h.site,g.site,s);h=l[0],g=l[p-1],g.edge=Dn(h.site,g.site,null,s),Sn(h),Sn(g)}function du(t){for(var i=t.x,r=t.y,o,s,c,f,l=wn._;l;)if(c=lo(l,r)-i,c>et)l=l.L;else if(f=i-gu(l,r),f>et){if(!l.R){o=l;break}l=l.R}else{c>-et?(o=l.P,s=l):f>-et?(o=l,s=l.N):o=s=l;break}var h=co(t);if(wn.insert(o,h),!(!o&&!s)){if(o===s){bn(o),s=co(o.site),wn.insert(h,s),h.edge=s.edge=Dn(o.site,h.site),Sn(o),Sn(s);return}if(!s){h.edge=Dn(o.site,h.site);return}bn(o),bn(s);var g=o.site,p=g.x,x=g.y,m=t.x-p,T=t.y-x,V=s.site,S=V.x-p,A=V.y-x,P=2*(m*A-T*S),k=m*m+T*T,L=S*S+A*A,E={x:(A*k-T*L)/P+p,y:(m*L-S*k)/P+x};Ti(s.edge,g,V,E),h.edge=Dn(g,t,null,E),s.edge=Dn(t,V,null,E),Sn(o),Sn(s)}}function lo(t,i){var r=t.site,o=r.x,s=r.y,c=s-i;if(!c)return o;var f=t.P;if(!f)return-1/0;r=f.site;var l=r.x,h=r.y,g=h-i;if(!g)return l;var p=l-o,x=1/c-1/g,m=p/g;return x?(-m+Math.sqrt(m*m-2*x*(p*p/(-2*g)-h+g/2+s-c/2)))/x+o:(o+l)/2}function gu(t,i){var r=t.N;if(r)return lo(r,i);var o=t.site;return o.y===i?o.x:1/0}function fo(t){this.site=t,this.edges=[]}fo.prototype.prepare=function(){for(var t=this.edges,i=t.length,r;i--;)r=t[i].edge,(!r.b||!r.a)&&t.splice(i,1);return t.sort(ho),t.length};function pu(t){for(var i=t[0][0],r=t[1][0],o=t[0][1],s=t[1][1],c,f,l,h,g=on,p=g.length,x,m,T,V,S,A;p--;)if(x=g[p],!(!x||!x.prepare()))for(T=x.edges,V=T.length,m=0;m<V;)A=T[m].end(),l=A.x,h=A.y,S=T[++m%V].start(),c=S.x,f=S.y,(at(l-c)>et||at(h-f)>et)&&(T.splice(m,0,new Pi(yu(x.site,A,at(l-i)<et&&s-h>et?{x:i,y:at(c-i)<et?f:s}:at(h-s)<et&&r-l>et?{x:at(f-s)<et?c:r,y:s}:at(l-r)<et&&h-o>et?{x:r,y:at(c-r)<et?f:o}:at(h-o)<et&&l-i>et?{x:at(f-o)<et?c:i,y:o}:null),x.site,null)),++V)}function ho(t,i){return i.angle-t.angle}function _u(){Li(this),this.x=this.y=this.arc=this.site=this.cy=null}function Sn(t){var i=t.P,r=t.N;if(!(!i||!r)){var o=i.site,s=t.site,c=r.site;if(o!==c){var f=s.x,l=s.y,h=o.x-f,g=o.y-l,p=c.x-f,A=c.y-l,x=2*(h*A-g*p);if(!(x>=-se)){var m=h*h+g*g,T=p*p+A*A,V=(A*m-g*T)/x,S=(h*T-p*m)/x,A=S+l,P=uo.pop()||new _u;P.arc=t,P.site=s,P.x=V+f,P.y=A+Math.sqrt(V*V+S*S),P.cy=A,t.circle=P;for(var k=null,L=On._;L;)if(P.y<L.y||P.y===L.y&&P.x<=L.x)if(L.L)L=L.L;else{k=L.P;break}else if(L.R)L=L.R;else{k=L;break}On.insert(k,P),k||(Sr=P)}}}}function bn(t){var i=t.circle;i&&(i.P||(Sr=i.N),On.remove(i),uo.push(i),Li(i),t.circle=null)}function xu(t){for(var i=vn,r=Ra(t[0][0],t[0][1],t[1][0],t[1][1]),o=i.length,s;o--;)s=i[o],(!mu(s,t)||!r(s)||at(s.a.x-s.b.x)<et&&at(s.a.y-s.b.y)<et)&&(s.a=s.b=null,i.splice(o,1))}function mu(t,i){var r=t.b;if(r)return!0;var o=t.a,s=i[0][0],c=i[1][0],f=i[0][1],l=i[1][1],h=t.l,g=t.r,p=h.x,x=h.y,m=g.x,T=g.y,V=(p+m)/2,S=(x+T)/2,A,P;if(T===x){if(V<s||V>=c)return;if(p>m){if(!o)o={x:V,y:f};else if(o.y>=l)return;r={x:V,y:l}}else{if(!o)o={x:V,y:l};else if(o.y<f)return;r={x:V,y:f}}}else if(A=(p-m)/(T-x),P=S-A*V,A<-1||A>1)if(p>m){if(!o)o={x:(f-P)/A,y:f};else if(o.y>=l)return;r={x:(l-P)/A,y:l}}else{if(!o)o={x:(l-P)/A,y:l};else if(o.y<f)return;r={x:(f-P)/A,y:f}}else if(x<T){if(!o)o={x:s,y:A*s+P};else if(o.x>=c)return;r={x:c,y:A*c+P}}else{if(!o)o={x:c,y:A*c+P};else if(o.x<s)return;r={x:s,y:A*s+P}}return t.a=o,t.b=r,!0}function go(t,i){this.l=t,this.r=i,this.a=this.b=null}function Dn(t,i,r,o){var s=new go(t,i);return vn.push(s),r&&Ti(s,t,i,r),o&&Ti(s,i,t,o),on[t.i].edges.push(new Pi(s,t,i)),on[i.i].edges.push(new Pi(s,i,t)),s}function yu(t,i,r){var o=new go(t,null);return o.a=i,o.b=r,vn.push(o),o}function Ti(t,i,r,o){!t.a&&!t.b?(t.a=o,t.l=i,t.r=r):t.l===r?t.b=o:t.a=o}function Pi(t,i,r){var o=t.a,s=t.b;this.edge=t,this.site=i,this.angle=r?Math.atan2(r.y-i.y,r.x-i.x):t.l===i?Math.atan2(s.x-o.x,o.y-s.y):Math.atan2(o.x-s.x,s.y-o.y)}Pi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Ar(){this._=null}function Li(t){t.U=t.C=t.L=t.R=t.P=t.N=null}Ar.prototype={insert:function(t,i){var r,o,s;if(t){if(i.P=t,i.N=t.N,t.N&&(t.N.P=i),t.N=i,t.R){for(t=t.R;t.L;)t=t.L;t.L=i}else t.R=i;r=t}else this._?(t=po(this._),i.P=null,i.N=t,t.P=t.L=i,r=t):(i.P=i.N=null,this._=i,r=null);for(i.L=i.R=null,i.U=r,i.C=!0,t=i;r&&r.C;)o=r.U,r===o.L?(s=o.R,s&&s.C?(r.C=s.C=!1,o.C=!0,t=o):(t===r.R&&(Fn(this,r),t=r,r=t.U),r.C=!1,o.C=!0,In(this,o))):(s=o.L,s&&s.C?(r.C=s.C=!1,o.C=!0,t=o):(t===r.L&&(In(this,r),t=r,r=t.U),r.C=!1,o.C=!0,Fn(this,o))),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var i=t.U,r,o=t.L,s=t.R,c,f;if(o?s?c=po(s):c=o:c=s,i?i.L===t?i.L=c:i.R=c:this._=c,o&&s?(f=c.C,c.C=t.C,c.L=o,o.U=c,c!==s?(i=c.U,c.U=t.U,t=c.R,i.L=t,c.R=s,s.U=c):(c.U=i,i=c,t=c.R)):(f=t.C,t=c),t&&(t.U=i),!f){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===i.L){if(r=i.R,r.C&&(r.C=!1,i.C=!0,Fn(this,i),r=i.R),r.L&&r.L.C||r.R&&r.R.C){(!r.R||!r.R.C)&&(r.L.C=!1,r.C=!0,In(this,r),r=i.R),r.C=i.C,i.C=r.R.C=!1,Fn(this,i),t=this._;break}}else if(r=i.L,r.C&&(r.C=!1,i.C=!0,In(this,i),r=i.L),r.L&&r.L.C||r.R&&r.R.C){(!r.L||!r.L.C)&&(r.R.C=!1,r.C=!0,Fn(this,r),r=i.L),r.C=i.C,i.C=r.L.C=!1,In(this,i),t=this._;break}r.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};function Fn(t,i){var r=i,o=i.R,s=r.U;s?s.L===r?s.L=o:s.R=o:t._=o,o.U=s,r.U=o,r.R=o.L,r.R&&(r.R.U=r),o.L=r}function In(t,i){var r=i,o=i.L,s=r.U;s?s.L===r?s.L=o:s.R=o:t._=o,o.U=s,r.U=o,r.L=o.R,r.L&&(r.L.U=r),o.R=r}function po(t){for(;t.L;)t=t.L;return t}function Tr(t,i){var r=t.sort(vu).pop(),o,s,c;for(vn=[],on=new Array(t.length),wn=new Ar,On=new Ar;;)if(c=Sr,r&&(!c||r.y<c.y||r.y===c.y&&r.x<c.x))(r.x!==o||r.y!==s)&&(on[r.i]=new fo(r),du(r),o=r.x,s=r.y),r=t.pop();else if(c)hu(c.arc);else break;i&&(xu(i),pu(i));var f={cells:on,edges:vn};return wn=On=vn=on=null,f}function vu(t,i){return i.y-t.y||i.x-t.x}b.geom.voronoi=function(t){var i=yn,r=$n,o=i,s=r,c=Ci;if(t)return f(t);function f(h){var g=new Array(h.length),p=c[0][0],x=c[0][1],m=c[1][0],T=c[1][1];return Tr(l(h),c).cells.forEach(function(V,S){var A=V.edges,P=V.site,k=g[S]=A.length?A.map(function(L){var E=L.start();return[E.x,E.y]}):P.x>=p&&P.x<=m&&P.y>=x&&P.y<=T?[[p,T],[m,T],[m,x],[p,x]]:[];k.point=h[S]}),g}function l(h){return h.map(function(g,p){return{x:Math.round(o(g,p)/et)*et,y:Math.round(s(g,p)/et)*et,i:p}})}return f.links=function(h){return Tr(l(h)).edges.filter(function(g){return g.l&&g.r}).map(function(g){return{source:h[g.l.i],target:h[g.r.i]}})},f.triangles=function(h){var g=[];return Tr(l(h)).cells.forEach(function(p,x){for(var m=p.site,T=p.edges.sort(ho),V=-1,S=T.length,A,P=T[S-1].edge,k=P.l===m?P.r:P.l;++V<S;)A=k,P=T[V].edge,k=P.l===m?P.r:P.l,x<A.i&&x<k.i&&wu(m,A,k)<0&&g.push([h[x],h[A.i],h[k.i]])}),g},f.x=function(h){return arguments.length?(o=At(i=h),f):i},f.y=function(h){return arguments.length?(s=At(r=h),f):r},f.clipExtent=function(h){return arguments.length?(c=h??Ci,f):c===Ci?null:c},f.size=function(h){return arguments.length?f.clipExtent(h&&[[0,0],h]):c===Ci?null:c&&c[1]},f};var Ci=[[-1e6,-1e6],[1e6,1e6]];function wu(t,i,r){return(t.x-r.x)*(i.y-t.y)-(t.x-i.x)*(r.y-t.y)}b.geom.delaunay=function(t){return b.geom.voronoi().triangles(t)},b.geom.quadtree=function(t,i,r,o,s){var c=yn,f=$n,l;if(l=arguments.length)return c=Su,f=bu,l===3&&(s=r,o=i,r=i=0),h(t);function h(g){var p,x=At(c),m=At(f),T,V,S,A,P,k,L,E;if(i!=null)P=i,k=r,L=o,E=s;else if(L=E=-(P=k=1/0),T=[],V=[],A=g.length,l)for(S=0;S<A;++S)p=g[S],p.x<P&&(P=p.x),p.y<k&&(k=p.y),p.x>L&&(L=p.x),p.y>E&&(E=p.y),T.push(p.x),V.push(p.y);else for(S=0;S<A;++S){var I=+x(p=g[S],S),F=+m(p,S);I<P&&(P=I),F<k&&(k=F),I>L&&(L=I),F>E&&(E=F),T.push(I),V.push(F)}var D=L-P,O=E-k;D>O?E=k+D:L=P+O;function H(q,Z,z,Y,W,X,j,nt){if(!(isNaN(z)||isNaN(Y)))if(q.leaf){var ct=q.x,dt=q.y;if(ct!=null)if(at(ct-z)+at(dt-Y)<.01)U(q,Z,z,Y,W,X,j,nt);else{var St=q.point;q.x=q.y=q.point=null,U(q,St,ct,dt,W,X,j,nt),U(q,Z,z,Y,W,X,j,nt)}else q.x=z,q.y=Y,q.point=Z}else U(q,Z,z,Y,W,X,j,nt)}function U(q,Z,z,Y,W,X,j,nt){var ct=(W+j)*.5,dt=(X+nt)*.5,St=z>=ct,Pt=Y>=dt,Qt=Pt<<1|St;q.leaf=!1,q=q.nodes[Qt]||(q.nodes[Qt]=_o()),St?W=ct:j=ct,Pt?X=dt:nt=dt,H(q,Z,z,Y,W,X,j,nt)}var tt=_o();if(tt.add=function(q){H(tt,q,+x(q,++S),+m(q,S),P,k,L,E)},tt.visit=function(q){Nn(q,tt,P,k,L,E)},tt.find=function(q){return Au(tt,q[0],q[1],P,k,L,E)},S=-1,i==null){for(;++S<A;)H(tt,g[S],T[S],V[S],P,k,L,E);--S}else g.forEach(tt.add);return T=V=g=p=null,tt}return h.x=function(g){return arguments.length?(c=g,h):c},h.y=function(g){return arguments.length?(f=g,h):f},h.extent=function(g){return arguments.length?(g==null?i=r=o=s=null:(i=+g[0][0],r=+g[0][1],o=+g[1][0],s=+g[1][1]),h):i==null?null:[[i,r],[o,s]]},h.size=function(g){return arguments.length?(g==null?i=r=o=s=null:(i=r=0,o=+g[0],s=+g[1]),h):i==null?null:[o-i,s-r]},h};function Su(t){return t.x}function bu(t){return t.y}function _o(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Nn(t,i,r,o,s,c){if(!t(i,r,o,s,c)){var f=(r+s)*.5,l=(o+c)*.5,h=i.nodes;h[0]&&Nn(t,h[0],r,o,f,l),h[1]&&Nn(t,h[1],f,o,s,l),h[2]&&Nn(t,h[2],r,l,f,c),h[3]&&Nn(t,h[3],f,l,s,c)}}function Au(t,i,r,o,s,c,f){var l=1/0,h;return function g(p,x,m,T,V){if(!(x>c||m>f||T<o||V<s)){if(S=p.point){var S,A=i-p.x,P=r-p.y,k=A*A+P*P;if(k<l){var L=Math.sqrt(l=k);o=i-L,s=r-L,c=i+L,f=r+L,h=S}}for(var E=p.nodes,I=(x+T)*.5,F=(m+V)*.5,D=i>=I,O=r>=F,H=O<<1|D,U=H+4;H<U;++H)if(p=E[H&3])switch(H&3){case 0:g(p,x,m,I,F);break;case 1:g(p,I,m,T,F);break;case 2:g(p,x,F,I,V);break;case 3:g(p,I,F,T,V);break}}}(t,o,s,c,f),h}b.interpolateRgb=Pr;function Pr(t,i){t=b.rgb(t),i=b.rgb(i);var r=t.r,o=t.g,s=t.b,c=i.r-r,f=i.g-o,l=i.b-s;return function(h){return"#"+gn(Math.round(r+c*h))+gn(Math.round(o+f*h))+gn(Math.round(s+l*h))}}b.interpolateObject=xo;function xo(t,i){var r={},o={},s;for(s in t)s in i?r[s]=sn(t[s],i[s]):o[s]=t[s];for(s in i)s in t||(o[s]=i[s]);return function(c){for(s in r)o[s]=r[s](c);return o}}b.interpolateNumber=Oe;function Oe(t,i){return t=+t,i=+i,function(r){return t*(1-r)+i*r}}b.interpolateString=mo;function mo(t,i){var r=Lr.lastIndex=Cr.lastIndex=0,o,s,c,f=-1,l=[],h=[];for(t=t+"",i=i+"";(o=Lr.exec(t))&&(s=Cr.exec(i));)(c=s.index)>r&&(c=i.slice(r,c),l[f]?l[f]+=c:l[++f]=c),(o=o[0])===(s=s[0])?l[f]?l[f]+=s:l[++f]=s:(l[++f]=null,h.push({i:f,x:Oe(o,s)})),r=Cr.lastIndex;return r<i.length&&(c=i.slice(r),l[f]?l[f]+=c:l[++f]=c),l.length<2?h[0]?(i=h[0].x,function(g){return i(g)+""}):function(){return i}:(i=h.length,function(g){for(var p=0,x;p<i;++p)l[(x=h[p]).i]=x.x(g);return l.join("")})}var Lr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cr=new RegExp(Lr.source,"g");b.interpolate=sn;function sn(t,i){for(var r=b.interpolators.length,o;--r>=0&&!(o=b.interpolators[r](t,i)););return o}b.interpolators=[function(t,i){var r=typeof i;return(r==="string"?Kn.has(i.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(i)?Pr:mo:i instanceof Ke?Pr:Array.isArray(i)?Mi:r==="object"&&isNaN(i)?xo:Oe)(t,i)}],b.interpolateArray=Mi;function Mi(t,i){var r=[],o=[],s=t.length,c=i.length,f=Math.min(t.length,i.length),l;for(l=0;l<f;++l)r.push(sn(t[l],i[l]));for(;l<s;++l)o[l]=t[l];for(;l<c;++l)o[l]=i[l];return function(h){for(l=0;l<f;++l)o[l]=r[l](h);return o}}var yo=function(){return e},Tu=b.map({linear:yo,poly:Vu,quad:function(){return Cu},cubic:function(){return Mu},sin:function(){return ku},exp:function(){return Gu},circle:function(){return Ru},elastic:$u,back:Ou,bounce:function(){return Du}}),Pu=b.map({in:e,out:vo,"in-out":wo,"out-in":function(t){return wo(vo(t))}});b.ease=function(t){var i=t.indexOf("-"),r=i>=0?t.slice(0,i):t,o=i>=0?t.slice(i+1):"in";return r=Tu.get(r)||yo,o=Pu.get(o)||e,Lu(o(r.apply(null,M.call(arguments,1))))};function Lu(t){return function(i){return i<=0?0:i>=1?1:t(i)}}function vo(t){return function(i){return 1-t(1-i)}}function wo(t){return function(i){return .5*(i<.5?t(2*i):2-t(2-2*i))}}function Cu(t){return t*t}function Mu(t){return t*t*t}function Eu(t){if(t<=0)return 0;if(t>=1)return 1;var i=t*t,r=i*t;return 4*(t<.5?r:3*(t-i)+r-.75)}function Vu(t){return function(i){return Math.pow(i,t)}}function ku(t){return 1-Math.cos(t*$t)}function Gu(t){return Math.pow(2,10*(t-1))}function Ru(t){return 1-Math.sqrt(1-t*t)}function $u(t,i){var r;return arguments.length<2&&(i=.45),arguments.length?r=i/ue*Math.asin(1/t):(t=1,r=i/4),function(o){return 1+t*Math.pow(2,-10*o)*Math.sin((o-r)*ue/i)}}function Ou(t){return t||(t=1.70158),function(i){return i*i*((t+1)*i-t)}}function Du(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}b.interpolateHcl=Fu;function Fu(t,i){t=b.hcl(t),i=b.hcl(i);var r=t.h,o=t.c,s=t.l,c=i.h-r,f=i.c-o,l=i.l-s;return isNaN(f)&&(f=0,o=isNaN(o)?i.c:o),isNaN(c)?(c=0,r=isNaN(r)?i.h:r):c>180?c-=360:c<-180&&(c+=360),function(h){return Qi(r+c*h,o+f*h,s+l*h)+""}}b.interpolateHsl=Iu;function Iu(t,i){t=b.hsl(t),i=b.hsl(i);var r=t.h,o=t.s,s=t.l,c=i.h-r,f=i.s-o,l=i.l-s;return isNaN(f)&&(f=0,o=isNaN(o)?i.s:o),isNaN(c)?(c=0,r=isNaN(r)?i.h:r):c>180?c-=360:c<-180&&(c+=360),function(h){return Wi(r+c*h,o+f*h,s+l*h)+""}}b.interpolateLab=Nu;function Nu(t,i){t=b.lab(t),i=b.lab(i);var r=t.l,o=t.a,s=t.b,c=i.l-r,f=i.a-o,l=i.b-s;return function(h){return sa(r+c*h,o+f*h,s+l*h)+""}}b.interpolateRound=So;function So(t,i){return i-=t,function(r){return Math.round(t+i*r)}}b.transform=function(t){var i=kt.createElementNS(b.ns.prefix.svg,"g");return(b.transform=function(r){if(r!=null){i.setAttribute("transform",r);var o=i.transform.baseVal.consolidate()}return new bo(o?o.matrix:Xu)})(t)};function bo(t){var i=[t.a,t.b],r=[t.c,t.d],o=To(i),s=Ao(i,r),c=To(zu(r,i,-s))||0;i[0]*r[1]<r[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-r[0],r[1]))*Et,this.translate=[t.e,t.f],this.scale=[o,c],this.skew=c?Math.atan2(s,c)*Et:0}bo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Ao(t,i){return t[0]*i[0]+t[1]*i[1]}function To(t){var i=Math.sqrt(Ao(t,t));return i&&(t[0]/=i,t[1]/=i),i}function zu(t,i,r){return t[0]+=r*i[0],t[1]+=r*i[1],t}var Xu={a:1,b:0,c:0,d:1,e:0,f:0};b.interpolateTransform=Po;function An(t){return t.length?t.pop()+",":""}function Bu(t,i,r,o){if(t[0]!==i[0]||t[1]!==i[1]){var s=r.push("translate(",null,",",null,")");o.push({i:s-4,x:Oe(t[0],i[0])},{i:s-2,x:Oe(t[1],i[1])})}else(i[0]||i[1])&&r.push("translate("+i+")")}function Hu(t,i,r,o){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),o.push({i:r.push(An(r)+"rotate(",null,")")-2,x:Oe(t,i)})):i&&r.push(An(r)+"rotate("+i+")")}function Yu(t,i,r,o){t!==i?o.push({i:r.push(An(r)+"skewX(",null,")")-2,x:Oe(t,i)}):i&&r.push(An(r)+"skewX("+i+")")}function Uu(t,i,r,o){if(t[0]!==i[0]||t[1]!==i[1]){var s=r.push(An(r)+"scale(",null,",",null,")");o.push({i:s-4,x:Oe(t[0],i[0])},{i:s-2,x:Oe(t[1],i[1])})}else(i[0]!==1||i[1]!==1)&&r.push(An(r)+"scale("+i+")")}function Po(t,i){var r=[],o=[];return t=b.transform(t),i=b.transform(i),Bu(t.translate,i.translate,r,o),Hu(t.rotate,i.rotate,r,o),Yu(t.skew,i.skew,r,o),Uu(t.scale,i.scale,r,o),t=i=null,function(s){for(var c=-1,f=o.length,l;++c<f;)r[(l=o[c]).i]=l.x(s);return r.join("")}}function ju(t,i){return i=(i-=t=+t)||1/i,function(r){return(r-t)/i}}function Wu(t,i){return i=(i-=t=+t)||1/i,function(r){return Math.max(0,Math.min(1,(r-t)/i))}}b.layout={},b.layout.bundle=function(){return function(t){for(var i=[],r=-1,o=t.length;++r<o;)i.push(qu(t[r]));return i}};function qu(t){for(var i=t.source,r=t.target,o=Qu(i,r),s=[i];i!==o;)i=i.parent,s.push(i);for(var c=s.length;r!==o;)s.splice(c,0,r),r=r.parent;return s}function Lo(t){for(var i=[],r=t.parent;r!=null;)i.push(t),t=r,r=r.parent;return i.push(t),i}function Qu(t,i){if(t===i)return t;for(var r=Lo(t),o=Lo(i),s=r.pop(),c=o.pop(),f=null;s===c;)f=s,s=r.pop(),c=o.pop();return f}b.layout.chord=function(){var t={},i,r,o,s,c=0,f,l,h;function g(){var x={},m=[],T=b.range(s),V=[],S,A,P,k,L;for(i=[],r=[],S=0,k=-1;++k<s;){for(A=0,L=-1;++L<s;)A+=o[k][L];m.push(A),V.push(b.range(s)),S+=A}for(f&&T.sort(function(tt,q){return f(m[tt],m[q])}),l&&V.forEach(function(tt,q){tt.sort(function(Z,z){return l(o[q][Z],o[q][z])})}),S=(ue-c*s)/S,A=0,k=-1;++k<s;){for(P=A,L=-1;++L<s;){var E=T[k],I=V[E][L],F=o[E][I],D=A,O=A+=F*S;x[E+"-"+I]={index:E,subindex:I,startAngle:D,endAngle:O,value:F}}r[E]={index:E,startAngle:P,endAngle:A,value:m[E]},A+=c}for(k=-1;++k<s;)for(L=k-1;++L<s;){var H=x[k+"-"+L],U=x[L+"-"+k];(H.value||U.value)&&i.push(H.value<U.value?{source:U,target:H}:{source:H,target:U})}h&&p()}function p(){i.sort(function(x,m){return h((x.source.value+x.target.value)/2,(m.source.value+m.target.value)/2)})}return t.matrix=function(x){return arguments.length?(s=(o=x)&&o.length,i=r=null,t):o},t.padding=function(x){return arguments.length?(c=x,i=r=null,t):c},t.sortGroups=function(x){return arguments.length?(f=x,i=r=null,t):f},t.sortSubgroups=function(x){return arguments.length?(l=x,i=null,t):l},t.sortChords=function(x){return arguments.length?(h=x,i&&p(),t):h},t.chords=function(){return i||g(),i},t.groups=function(){return r||g(),r},t},b.layout.force=function(){var t={},i=b.dispatch("start","tick","end"),r,o=[1,1],s,c,f=.9,l=ec,h=nc,g=-30,p=ic,x=.1,m=.64,T=[],V=[],S,A,P;function k(E){return function(I,F,D,O){if(I.point!==E){var H=I.cx-E.x,U=I.cy-E.y,tt=O-F,q=H*H+U*U;if(tt*tt/m<q){if(q<p){var Z=I.charge/q;E.px-=H*Z,E.py-=U*Z}return!0}if(I.point&&q&&q<p){var Z=I.pointCharge/q;E.px-=H*Z,E.py-=U*Z}}return!I.charge}}t.tick=function(){if((c*=.99)<.005)return r=null,i.end({type:"end",alpha:c=0}),!0;var E=T.length,I=V.length,F,D,O,H,U,tt,q,Z,z;for(D=0;D<I;++D)O=V[D],H=O.source,U=O.target,Z=U.x-H.x,z=U.y-H.y,(tt=Z*Z+z*z)&&(tt=c*A[D]*((tt=Math.sqrt(tt))-S[D])/tt,Z*=tt,z*=tt,U.x-=Z*(q=H.weight+U.weight?H.weight/(H.weight+U.weight):.5),U.y-=z*q,H.x+=Z*(q=1-q),H.y+=z*q);if((q=c*x)&&(Z=o[0]/2,z=o[1]/2,D=-1,q))for(;++D<E;)O=T[D],O.x+=(Z-O.x)*q,O.y+=(z-O.y)*q;if(g)for(Co(F=b.geom.quadtree(T),c,P),D=-1;++D<E;)(O=T[D]).fixed||F.visit(k(O));for(D=-1;++D<E;)O=T[D],O.fixed?(O.x=O.px,O.y=O.py):(O.x-=(O.px-(O.px=O.x))*f,O.y-=(O.py-(O.py=O.y))*f);i.tick({type:"tick",alpha:c})},t.nodes=function(E){return arguments.length?(T=E,t):T},t.links=function(E){return arguments.length?(V=E,t):V},t.size=function(E){return arguments.length?(o=E,t):o},t.linkDistance=function(E){return arguments.length?(l=typeof E=="function"?E:+E,t):l},t.distance=t.linkDistance,t.linkStrength=function(E){return arguments.length?(h=typeof E=="function"?E:+E,t):h},t.friction=function(E){return arguments.length?(f=+E,t):f},t.charge=function(E){return arguments.length?(g=typeof E=="function"?E:+E,t):g},t.chargeDistance=function(E){return arguments.length?(p=E*E,t):Math.sqrt(p)},t.gravity=function(E){return arguments.length?(x=+E,t):x},t.theta=function(E){return arguments.length?(m=E*E,t):Math.sqrt(m)},t.alpha=function(E){return arguments.length?(E=+E,c?E>0?c=E:(r.c=null,r.t=NaN,r=null,i.end({type:"end",alpha:c=0})):E>0&&(i.start({type:"start",alpha:c=E}),r=ri(t.tick)),t):c},t.start=function(){var E,I=T.length,F=V.length,D=o[0],O=o[1],H,U;for(E=0;E<I;++E)(U=T[E]).index=E,U.weight=0;for(E=0;E<F;++E)U=V[E],typeof U.source=="number"&&(U.source=T[U.source]),typeof U.target=="number"&&(U.target=T[U.target]),++U.source.weight,++U.target.weight;for(E=0;E<I;++E)U=T[E],isNaN(U.x)&&(U.x=tt("x",D)),isNaN(U.y)&&(U.y=tt("y",O)),isNaN(U.px)&&(U.px=U.x),isNaN(U.py)&&(U.py=U.y);if(S=[],typeof l=="function")for(E=0;E<F;++E)S[E]=+l.call(this,V[E],E);else for(E=0;E<F;++E)S[E]=l;if(A=[],typeof h=="function")for(E=0;E<F;++E)A[E]=+h.call(this,V[E],E);else for(E=0;E<F;++E)A[E]=h;if(P=[],typeof g=="function")for(E=0;E<I;++E)P[E]=+g.call(this,T[E],E);else for(E=0;E<I;++E)P[E]=g;function tt(q,Z){if(!H){for(H=new Array(I),W=0;W<I;++W)H[W]=[];for(W=0;W<F;++W){var z=V[W];H[z.source.index].push(z.target),H[z.target.index].push(z.source)}}for(var Y=H[E],W=-1,X=Y.length,j;++W<X;)if(!isNaN(j=Y[W][q]))return j;return Math.random()*Z}return t.resume()},t.resume=function(){return t.alpha(.1)},t.stop=function(){return t.alpha(0)},t.drag=function(){if(s||(s=b.behavior.drag().origin(e).on("dragstart.force",Zu).on("drag.force",L).on("dragend.force",Ku)),!arguments.length)return s;this.on("mouseover.force",Ju).on("mouseout.force",tc).call(s)};function L(E){E.px=b.event.x,E.py=b.event.y,t.resume()}return b.rebind(t,i,"on")};function Zu(t){t.fixed|=2}function Ku(t){t.fixed&=-7}function Ju(t){t.fixed|=4,t.px=t.x,t.py=t.y}function tc(t){t.fixed&=-5}function Co(t,i,r){var o=0,s=0;if(t.charge=0,!t.leaf)for(var c=t.nodes,f=c.length,l=-1,h;++l<f;)h=c[l],h!=null&&(Co(h,i,r),t.charge+=h.charge,o+=h.charge*h.cx,s+=h.charge*h.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var g=i*r[t.point.index];t.charge+=t.pointCharge=g,o+=g*t.point.x,s+=g*t.point.y}t.cx=o/t.charge,t.cy=s/t.charge}var ec=20,nc=1,ic=1/0;b.layout.hierarchy=function(){var t=oc,i=rc,r=ac;function o(s){var c=[s],f=[],l;for(s.depth=0;(l=c.pop())!=null;)if(f.push(l),(g=i.call(o,l,l.depth))&&(h=g.length)){for(var h,g,p;--h>=0;)c.push(p=g[h]),p.parent=l,p.depth=l.depth+1;r&&(l.value=0),l.children=g}else r&&(l.value=+r.call(o,l,l.depth)||0),delete l.children;return Me(s,function(x){var m,T;t&&(m=x.children)&&m.sort(t),r&&(T=x.parent)&&(T.value+=x.value)}),f}return o.sort=function(s){return arguments.length?(t=s,o):t},o.children=function(s){return arguments.length?(i=s,o):i},o.value=function(s){return arguments.length?(r=s,o):r},o.revalue=function(s){return r&&(Xn(s,function(c){c.children&&(c.value=0)}),Me(s,function(c){var f;c.children||(c.value=+r.call(o,c,c.depth)||0),(f=c.parent)&&(f.value+=c.value)})),s},o};function zn(t,i){return b.rebind(t,i,"sort","children","value"),t.nodes=t,t.links=sc,t}function Xn(t,i){for(var r=[t];(t=r.pop())!=null;)if(i(t),(s=t.children)&&(o=s.length))for(var o,s;--o>=0;)r.push(s[o])}function Me(t,i){for(var r=[t],o=[];(t=r.pop())!=null;)if(o.push(t),(f=t.children)&&(c=f.length))for(var s=-1,c,f;++s<c;)r.push(f[s]);for(;(t=o.pop())!=null;)i(t)}function rc(t){return t.children}function ac(t){return t.value}function oc(t,i){return i.value-t.value}function sc(t){return b.merge(t.map(function(i){return(i.children||[]).map(function(r){return{source:i,target:r}})}))}b.layout.partition=function(){var t=b.layout.hierarchy(),i=[1,1];function r(c,f,l,h){var g=c.children;if(c.x=f,c.y=c.depth*h,c.dx=l,c.dy=h,g&&(x=g.length)){var p=-1,x,m,T;for(l=c.value?l/c.value:0;++p<x;)r(m=g[p],f,T=m.value*l,h),f+=T}}function o(c){var f=c.children,l=0;if(f&&(g=f.length))for(var h=-1,g;++h<g;)l=Math.max(l,o(f[h]));return 1+l}function s(c,f){var l=t.call(this,c,f);return r(l[0],0,i[0],i[1]/o(l[0])),l}return s.size=function(c){return arguments.length?(i=c,s):i},zn(s,t)},b.layout.pie=function(){var t=Number,i=Mo,r=0,o=ue,s=0;function c(f){var l=f.length,h=f.map(function(k,L){return+t.call(c,k,L)}),g=+(typeof r=="function"?r.apply(this,arguments):r),p=(typeof o=="function"?o.apply(this,arguments):o)-g,x=Math.min(Math.abs(p)/l,+(typeof s=="function"?s.apply(this,arguments):s)),m=x*(p<0?-1:1),T=b.sum(h),V=T?(p-l*m)/T:0,S=b.range(l),A=[],P;return i!=null&&S.sort(i===Mo?function(k,L){return h[L]-h[k]}:function(k,L){return i(f[k],f[L])}),S.forEach(function(k){A[k]={data:f[k],value:P=h[k],startAngle:g,endAngle:g+=P*V+m,padAngle:x}}),A}return c.value=function(f){return arguments.length?(t=f,c):t},c.sort=function(f){return arguments.length?(i=f,c):i},c.startAngle=function(f){return arguments.length?(r=f,c):r},c.endAngle=function(f){return arguments.length?(o=f,c):o},c.padAngle=function(f){return arguments.length?(s=f,c):s},c};var Mo={};b.layout.stack=function(){var t=e,i=Mr,r=Er,o=lc,s=uc,c=cc;function f(l,h){if(!(V=l.length))return l;var g=l.map(function(k,L){return t.call(f,k,L)}),p=g.map(function(k){return k.map(function(L,E){return[s.call(f,L,E),c.call(f,L,E)]})}),x=i.call(f,p,h);g=b.permute(g,x),p=b.permute(p,x);var m=r.call(f,p,h),T=g[0].length,V,S,A,P;for(A=0;A<T;++A)for(o.call(f,g[0][A],P=m[A],p[0][A][1]),S=1;S<V;++S)o.call(f,g[S][A],P+=p[S-1][A][1],p[S][A][1]);return l}return f.values=function(l){return arguments.length?(t=l,f):t},f.order=function(l){return arguments.length?(i=typeof l=="function"?l:fc.get(l)||Mr,f):i},f.offset=function(l){return arguments.length?(r=typeof l=="function"?l:hc.get(l)||Er,f):r},f.x=function(l){return arguments.length?(s=l,f):s},f.y=function(l){return arguments.length?(c=l,f):c},f.out=function(l){return arguments.length?(o=l,f):o},f};function uc(t){return t.x}function cc(t){return t.y}function lc(t,i,r){t.y0=i,t.y=r}var fc=b.map({"inside-out":function(t){var i=t.length,r,o,s=t.map(dc),c=t.map(gc),f=b.range(i).sort(function(x,m){return s[x]-s[m]}),l=0,h=0,g=[],p=[];for(r=0;r<i;++r)o=f[r],l<h?(l+=c[o],g.push(o)):(h+=c[o],p.push(o));return p.reverse().concat(g)},reverse:function(t){return b.range(t.length).reverse()},default:Mr}),hc=b.map({silhouette:function(t){var i=t.length,r=t[0].length,o=[],s=0,c,f,l,h=[];for(f=0;f<r;++f){for(c=0,l=0;c<i;c++)l+=t[c][f][1];l>s&&(s=l),o.push(l)}for(f=0;f<r;++f)h[f]=(s-o[f])/2;return h},wiggle:function(t){var i=t.length,r=t[0],o=r.length,s,c,f,l,h,g,p,x,m,T=[];for(T[0]=x=m=0,c=1;c<o;++c){for(s=0,l=0;s<i;++s)l+=t[s][c][1];for(s=0,h=0,p=r[c][0]-r[c-1][0];s<i;++s){for(f=0,g=(t[s][c][1]-t[s][c-1][1])/(2*p);f<s;++f)g+=(t[f][c][1]-t[f][c-1][1])/p;h+=g*t[s][c][1]}T[c]=x-=l?h/l*p:0,x<m&&(m=x)}for(c=0;c<o;++c)T[c]-=m;return T},expand:function(t){var i=t.length,r=t[0].length,o=1/i,s,c,f,l=[];for(c=0;c<r;++c){for(s=0,f=0;s<i;s++)f+=t[s][c][1];if(f)for(s=0;s<i;s++)t[s][c][1]/=f;else for(s=0;s<i;s++)t[s][c][1]=o}for(c=0;c<r;++c)l[c]=0;return l},zero:Er});function Mr(t){return b.range(t.length)}function Er(t){for(var i=-1,r=t[0].length,o=[];++i<r;)o[i]=0;return o}function dc(t){for(var i=1,r=0,o=t[0][1],s,c=t.length;i<c;++i)(s=t[i][1])>o&&(r=i,o=s);return r}function gc(t){return t.reduce(pc,0)}function pc(t,i){return t+i[1]}b.layout.histogram=function(){var t=!0,i=Number,r=xc,o=_c;function s(c,m){for(var l=[],h=c.map(i,this),g=r.call(this,h,m),p=o.call(this,g,h,m),x,m=-1,T=h.length,V=p.length-1,S=t?1:1/T,A;++m<V;)x=l[m]=[],x.dx=p[m+1]-(x.x=p[m]),x.y=0;if(V>0)for(m=-1;++m<T;)A=h[m],A>=g[0]&&A<=g[1]&&(x=l[b.bisect(p,A,1,V)-1],x.y+=S,x.push(c[m]));return l}return s.value=function(c){return arguments.length?(i=c,s):i},s.range=function(c){return arguments.length?(r=At(c),s):r},s.bins=function(c){return arguments.length?(o=typeof c=="number"?function(f){return Eo(f,c)}:At(c),s):o},s.frequency=function(c){return arguments.length?(t=!!c,s):t},s};function _c(t,i){return Eo(t,Math.ceil(Math.log(i.length)/Math.LN2+1))}function Eo(t,i){for(var r=-1,o=+t[0],s=(t[1]-o)/i,c=[];++r<=i;)c[r]=s*r+o;return c}function xc(t){return[b.min(t),b.max(t)]}b.layout.pack=function(){var t=b.layout.hierarchy().sort(mc),i=0,r=[1,1],o;function s(c,f){var l=t.call(this,c,f),h=l[0],g=r[0],p=r[1],x=o==null?Math.sqrt:typeof o=="function"?o:function(){return o};if(h.x=h.y=0,Me(h,function(T){T.r=+x(T.value)}),Me(h,Go),i){var m=i*(o?1:Math.max(2*h.r/g,2*h.r/p))/2;Me(h,function(T){T.r+=m}),Me(h,Go),Me(h,function(T){T.r-=m})}return Ro(h,g/2,p/2,o?1:1/Math.max(2*h.r/g,2*h.r/p)),l}return s.size=function(c){return arguments.length?(r=c,s):r},s.radius=function(c){return arguments.length?(o=c==null||typeof c=="function"?c:+c,s):o},s.padding=function(c){return arguments.length?(i=+c,s):i},zn(s,t)};function mc(t,i){return t.value-i.value}function Vr(t,i){var r=t._pack_next;t._pack_next=i,i._pack_prev=t,i._pack_next=r,r._pack_prev=i}function Vo(t,i){t._pack_next=i,i._pack_prev=t}function ko(t,i){var r=i.x-t.x,o=i.y-t.y,s=t.r+i.r;return .999*s*s>r*r+o*o}function Go(t){if(!(i=t.children)||!(m=i.length))return;var i,r=1/0,o=-1/0,s=1/0,c=-1/0,f,l,h,g,p,x,m;function T(E){r=Math.min(E.x-E.r,r),o=Math.max(E.x+E.r,o),s=Math.min(E.y-E.r,s),c=Math.max(E.y+E.r,c)}if(i.forEach(yc),f=i[0],f.x=-f.r,f.y=0,T(f),m>1&&(l=i[1],l.x=l.r,l.y=0,T(l),m>2))for(h=i[2],$o(f,l,h),T(h),Vr(f,h),f._pack_prev=h,Vr(h,l),l=f._pack_next,g=3;g<m;g++){$o(f,l,h=i[g]);var V=0,S=1,A=1;for(p=l._pack_next;p!==l;p=p._pack_next,S++)if(ko(p,h)){V=1;break}if(V==1)for(x=f._pack_prev;x!==p._pack_prev&&!ko(x,h);x=x._pack_prev,A++);V?(S<A||S==A&&l.r<f.r?Vo(f,l=p):Vo(f=x,l),g--):(Vr(f,h),l=h,T(h))}var P=(r+o)/2,k=(s+c)/2,L=0;for(g=0;g<m;g++)h=i[g],h.x-=P,h.y-=k,L=Math.max(L,h.r+Math.sqrt(h.x*h.x+h.y*h.y));t.r=L,i.forEach(vc)}function yc(t){t._pack_next=t._pack_prev=t}function vc(t){delete t._pack_next,delete t._pack_prev}function Ro(t,i,r,o){var s=t.children;if(t.x=i+=o*t.x,t.y=r+=o*t.y,t.r*=o,s)for(var c=-1,f=s.length;++c<f;)Ro(s[c],i,r,o)}function $o(t,i,r){var o=t.r+r.r,s=i.x-t.x,c=i.y-t.y;if(o&&(s||c)){var f=i.r+r.r,l=s*s+c*c;f*=f,o*=o;var h=.5+(o-f)/(2*l),g=Math.sqrt(Math.max(0,2*f*(o+l)-(o-=l)*o-f*f))/(2*l);r.x=t.x+h*s+g*c,r.y=t.y+h*c-g*s}else r.x=t.x+o,r.y=t.y}b.layout.tree=function(){var t=b.layout.hierarchy().sort(null).value(null),i=Oo,r=[1,1],o=null;function s(p,x){var m=t.call(this,p,x),T=m[0],V=c(T);if(Me(V,f),V.parent.m=-V.z,Xn(V,l),o)Xn(T,g);else{var S=T,A=T,P=T;Xn(T,function(I){I.x<S.x&&(S=I),I.x>A.x&&(A=I),I.depth>P.depth&&(P=I)});var k=i(S,A)/2-S.x,L=r[0]/(A.x+i(A,S)/2+k),E=r[1]/(P.depth||1);Xn(T,function(I){I.x=(I.x+k)*L,I.y=I.depth*E})}return m}function c(p){for(var x={A:null,children:[p]},m=[x],T;(T=m.pop())!=null;)for(var V=T.children,S,A=0,P=V.length;A<P;++A)m.push((V[A]=S={_:V[A],parent:T,children:(S=V[A].children)&&S.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:A}).a=S);return x.children[0]}function f(p){var x=p.children,m=p.parent.children,T=p.i?m[p.i-1]:null;if(x.length){Sc(p);var V=(x[0].z+x[x.length-1].z)/2;T?(p.z=T.z+i(p._,T._),p.m=p.z-V):p.z=V}else T&&(p.z=T.z+i(p._,T._));p.parent.A=h(p,T,p.parent.A||m[0])}function l(p){p._.x=p.z+p.parent.m,p.m+=p.parent.m}function h(p,x,m){if(x){for(var T=p,V=p,S=x,A=T.parent.children[0],P=T.m,k=V.m,L=S.m,E=A.m,I;S=Gr(S),T=kr(T),S&&T;)A=kr(A),V=Gr(V),V.a=p,I=S.z+L-T.z-P+i(S._,T._),I>0&&(wc(bc(S,p,m),p,I),P+=I,k+=I),L+=S.m,P+=T.m,E+=A.m,k+=V.m;S&&!Gr(V)&&(V.t=S,V.m+=L-k),T&&!kr(A)&&(A.t=T,A.m+=P-E,m=p)}return m}function g(p){p.x*=r[0],p.y=p.depth*r[1]}return s.separation=function(p){return arguments.length?(i=p,s):i},s.size=function(p){return arguments.length?(o=(r=p)==null?g:null,s):o?null:r},s.nodeSize=function(p){return arguments.length?(o=(r=p)==null?null:g,s):o?r:null},zn(s,t)};function Oo(t,i){return t.parent==i.parent?1:2}function kr(t){var i=t.children;return i.length?i[0]:t.t}function Gr(t){var i=t.children,r;return(r=i.length)?i[r-1]:t.t}function wc(t,i,r){var o=r/(i.i-t.i);i.c-=o,i.s+=r,t.c+=o,i.z+=r,i.m+=r}function Sc(t){for(var i=0,r=0,o=t.children,s=o.length,c;--s>=0;)c=o[s],c.z+=i,c.m+=i,i+=c.s+(r+=c.c)}function bc(t,i,r){return t.a.parent===i.parent?t.a:r}b.layout.cluster=function(){var t=b.layout.hierarchy().sort(null).value(null),i=Oo,r=[1,1],o=!1;function s(c,f){var l=t.call(this,c,f),h=l[0],g,p=0;Me(h,function(S){var A=S.children;A&&A.length?(S.x=Tc(A),S.y=Ac(A)):(S.x=g?p+=i(S,g):0,S.y=0,g=S)});var x=Do(h),m=Fo(h),T=x.x-i(x,m)/2,V=m.x+i(m,x)/2;return Me(h,o?function(S){S.x=(S.x-h.x)*r[0],S.y=(h.y-S.y)*r[1]}:function(S){S.x=(S.x-T)/(V-T)*r[0],S.y=(1-(h.y?S.y/h.y:1))*r[1]}),l}return s.separation=function(c){return arguments.length?(i=c,s):i},s.size=function(c){return arguments.length?(o=(r=c)==null,s):o?null:r},s.nodeSize=function(c){return arguments.length?(o=(r=c)!=null,s):o?r:null},zn(s,t)};function Ac(t){return 1+b.max(t,function(i){return i.y})}function Tc(t){return t.reduce(function(i,r){return i+r.x},0)/t.length}function Do(t){var i=t.children;return i&&i.length?Do(i[0]):t}function Fo(t){var i=t.children,r;return i&&(r=i.length)?Fo(i[r-1]):t}b.layout.treemap=function(){var t=b.layout.hierarchy(),i=Math.round,r=[1,1],o=null,s=Rr,c=!1,f,l="squarify",h=.5*(1+Math.sqrt(5));function g(S,A){for(var P=-1,k=S.length,L,E;++P<k;)E=(L=S[P]).value*(A<0?0:A),L.area=isNaN(E)||E<=0?0:E}function p(S){var A=S.children;if(A&&A.length){var P=s(S),k=[],L=A.slice(),E,I=1/0,F,D=l==="slice"?P.dx:l==="dice"?P.dy:l==="slice-dice"?S.depth&1?P.dy:P.dx:Math.min(P.dx,P.dy),O;for(g(L,P.dx*P.dy/S.value),k.area=0;(O=L.length)>0;)k.push(E=L[O-1]),k.area+=E.area,l!=="squarify"||(F=m(k,D))<=I?(L.pop(),I=F):(k.area-=k.pop().area,T(k,D,P,!1),D=Math.min(P.dx,P.dy),k.length=k.area=0,I=1/0);k.length&&(T(k,D,P,!0),k.length=k.area=0),A.forEach(p)}}function x(S){var A=S.children;if(A&&A.length){var P=s(S),k=A.slice(),L,E=[];for(g(k,P.dx*P.dy/S.value),E.area=0;L=k.pop();)E.push(L),E.area+=L.area,L.z!=null&&(T(E,L.z?P.dx:P.dy,P,!k.length),E.length=E.area=0);A.forEach(x)}}function m(S,A){for(var P=S.area,k,L=0,E=1/0,I=-1,F=S.length;++I<F;)(k=S[I].area)&&(k<E&&(E=k),k>L&&(L=k));return P*=P,A*=A,P?Math.max(A*L*h/P,P/(A*E*h)):1/0}function T(S,A,P,k){var L=-1,E=S.length,I=P.x,F=P.y,D=A?i(S.area/A):0,O;if(A==P.dx){for((k||D>P.dy)&&(D=P.dy);++L<E;)O=S[L],O.x=I,O.y=F,O.dy=D,I+=O.dx=Math.min(P.x+P.dx-I,D?i(O.area/D):0);O.z=!0,O.dx+=P.x+P.dx-I,P.y+=D,P.dy-=D}else{for((k||D>P.dx)&&(D=P.dx);++L<E;)O=S[L],O.x=I,O.y=F,O.dx=D,F+=O.dy=Math.min(P.y+P.dy-F,D?i(O.area/D):0);O.z=!1,O.dy+=P.y+P.dy-F,P.x+=D,P.dx-=D}}function V(S){var A=f||t(S),P=A[0];return P.x=P.y=0,P.value?(P.dx=r[0],P.dy=r[1]):P.dx=P.dy=0,f&&t.revalue(P),g([P],P.dx*P.dy/P.value),(f?x:p)(P),c&&(f=A),A}return V.size=function(S){return arguments.length?(r=S,V):r},V.padding=function(S){if(!arguments.length)return o;function A(L){var E=S.call(V,L,L.depth);return E==null?Rr(L):Io(L,typeof E=="number"?[E,E,E,E]:E)}function P(L){return Io(L,S)}var k;return s=(o=S)==null?Rr:(k=typeof S)=="function"?A:(k==="number"&&(S=[S,S,S,S]),P),V},V.round=function(S){return arguments.length?(i=S?Math.round:Number,V):i!=Number},V.sticky=function(S){return arguments.length?(c=S,f=null,V):c},V.ratio=function(S){return arguments.length?(h=S,V):h},V.mode=function(S){return arguments.length?(l=S+"",V):l},zn(V,t)};function Rr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Io(t,i){var r=t.x+i[3],o=t.y+i[0],s=t.dx-i[1]-i[3],c=t.dy-i[0]-i[2];return s<0&&(r+=s/2,s=0),c<0&&(o+=c/2,c=0),{x:r,y:o,dx:s,dy:c}}b.random={normal:function(t,i){var r=arguments.length;return r<2&&(i=1),r<1&&(t=0),function(){var o,s,c;do o=Math.random()*2-1,s=Math.random()*2-1,c=o*o+s*s;while(!c||c>1);return t+i*o*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var t=b.random.normal.apply(b,arguments);return function(){return Math.exp(t())}},bates:function(t){var i=b.random.irwinHall(t);return function(){return i()/t}},irwinHall:function(t){return function(){for(var i=0,r=0;r<t;r++)i+=Math.random();return i}}},b.scale={};function Tn(t){var i=t[0],r=t[t.length-1];return i<r?[i,r]:[r,i]}function Ei(t){return t.rangeExtent?t.rangeExtent():Tn(t.range())}function Pc(t,i,r,o){var s=r(t[0],t[1]),c=o(i[0],i[1]);return function(f){return c(s(f))}}function Vi(t,i){var r=0,o=t.length-1,s=t[r],c=t[o],f;return c<s&&(f=r,r=o,o=f,f=s,s=c,c=f),t[r]=i.floor(s),t[o]=i.ceil(c),t}function No(t){return t?{floor:function(i){return Math.floor(i/t)*t},ceil:function(i){return Math.ceil(i/t)*t}}:Lc}var Lc={floor:e,ceil:e};function Cc(t,i,r,o){var s=[],c=[],f=0,l=Math.min(t.length,i.length)-1;for(t[l]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++f<=l;)s.push(r(t[f-1],t[f])),c.push(o(i[f-1],i[f]));return function(h){var g=b.bisect(t,h,1,l)-1;return c[g](s[g](h))}}b.scale.linear=function(){return zo([0,1],[0,1],sn,!1)};function zo(t,i,r,o){var s,c;function f(){var h=Math.min(t.length,i.length)>2?Cc:Pc,g=o?Wu:ju;return s=h(t,i,g,r),c=h(i,t,g,sn),l}function l(h){return s(h)}return l.invert=function(h){return c(h)},l.domain=function(h){return arguments.length?(t=h.map(Number),f()):t},l.range=function(h){return arguments.length?(i=h,f()):i},l.rangeRound=function(h){return l.range(h).interpolate(So)},l.clamp=function(h){return arguments.length?(o=h,f()):o},l.interpolate=function(h){return arguments.length?(r=h,f()):r},l.ticks=function(h){return Or(t,h)},l.tickFormat=function(h,g){return Dr(t,h,g)},l.nice=function(h){return Xo(t,h),f()},l.copy=function(){return zo(t,i,r,o)},f()}function $r(t,i){return b.rebind(t,i,"range","rangeRound","interpolate","clamp")}function Xo(t,i){return Vi(t,No(Pn(t,i)[2])),Vi(t,No(Pn(t,i)[2])),t}function Pn(t,i){i==null&&(i=10);var r=Tn(t),o=r[1]-r[0],s=Math.pow(10,Math.floor(Math.log(o/i)/Math.LN10)),c=i/o*s;return c<=.15?s*=10:c<=.35?s*=5:c<=.75&&(s*=2),r[0]=Math.ceil(r[0]/s)*s,r[1]=Math.floor(r[1]/s)*s+s*.5,r[2]=s,r}function Or(t,i){return b.range.apply(b,Pn(t,i))}function Dr(t,i,r){var o=Pn(t,i);if(r){var s=_a.exec(r);if(s.shift(),s[8]==="s"){var c=b.formatPrefix(Math.max(at(o[0]),at(o[1])));return s[7]||(s[7]="."+ki(c.scale(o[2]))),s[8]="f",r=b.format(s.join("")),function(f){return r(c.scale(f))+c.symbol}}s[7]||(s[7]="."+Ec(s[8],o)),r=s.join("")}else r=",."+ki(o[2])+"f";return b.format(r)}var Mc={s:1,g:1,p:1,r:1,e:1};function ki(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ec(t,i){var r=ki(i[2]);return t in Mc?Math.abs(r-ki(Math.max(at(i[0]),at(i[1]))))+ +(t!=="e"):r-(t==="%")*2}b.scale.log=function(){return Bo(b.scale.linear().domain([0,1]),10,!0,[1,10])};function Bo(t,i,r,o){function s(l){return(r?Math.log(l<0?0:l):-Math.log(l>0?0:-l))/Math.log(i)}function c(l){return r?Math.pow(i,l):-Math.pow(i,-l)}function f(l){return t(s(l))}return f.invert=function(l){return c(t.invert(l))},f.domain=function(l){return arguments.length?(r=l[0]>=0,t.domain((o=l.map(Number)).map(s)),f):o},f.base=function(l){return arguments.length?(i=+l,t.domain(o.map(s)),f):i},f.nice=function(){var l=Vi(o.map(s),r?Math:Vc);return t.domain(l),o=l.map(c),f},f.ticks=function(){var l=Tn(o),h=[],g=l[0],p=l[1],x=Math.floor(s(g)),m=Math.ceil(s(p)),T=i%1?2:i;if(isFinite(m-x)){if(r){for(;x<m;x++)for(var V=1;V<T;V++)h.push(c(x)*V);h.push(c(x))}else for(h.push(c(x));x++<m;)for(var V=T-1;V>0;V--)h.push(c(x)*V);for(x=0;h[x]<g;x++);for(m=h.length;h[m-1]>p;m--);h=h.slice(x,m)}return h},f.tickFormat=function(l,h){if(!arguments.length)return Ho;arguments.length<2?h=Ho:typeof h!="function"&&(h=b.format(h));var g=Math.max(1,i*l/f.ticks().length);return function(p){var x=p/c(Math.round(s(p)));return x*i<i-.5&&(x*=i),x<=g?h(p):""}},f.copy=function(){return Bo(t.copy(),i,r,o)},$r(f,t)}var Ho=b.format(".0e"),Vc={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};b.scale.pow=function(){return Yo(b.scale.linear(),1,[0,1])};function Yo(t,i,r){var o=Gi(i),s=Gi(1/i);function c(f){return t(o(f))}return c.invert=function(f){return s(t.invert(f))},c.domain=function(f){return arguments.length?(t.domain((r=f.map(Number)).map(o)),c):r},c.ticks=function(f){return Or(r,f)},c.tickFormat=function(f,l){return Dr(r,f,l)},c.nice=function(f){return c.domain(Xo(r,f))},c.exponent=function(f){return arguments.length?(o=Gi(i=f),s=Gi(1/i),t.domain(r.map(o)),c):i},c.copy=function(){return Yo(t.copy(),i,r)},$r(c,t)}function Gi(t){return function(i){return i<0?-Math.pow(-i,t):Math.pow(i,t)}}b.scale.sqrt=function(){return b.scale.pow().exponent(.5)},b.scale.ordinal=function(){return Uo([],{t:"range",a:[[]]})};function Uo(t,i){var r,o,s;function c(l){return o[((r.get(l)||(i.t==="range"?r.set(l,t.push(l)):NaN))-1)%o.length]}function f(l,h){return b.range(t.length).map(function(g){return l+h*g})}return c.domain=function(l){if(!arguments.length)return t;t=[],r=new fe;for(var h=-1,g=l.length,p;++h<g;)r.has(p=l[h])||r.set(p,t.push(p));return c[i.t].apply(c,i.a)},c.range=function(l){return arguments.length?(o=l,s=0,i={t:"range",a:arguments},c):o},c.rangePoints=function(l,h){arguments.length<2&&(h=0);var g=l[0],p=l[1],x=t.length<2?(g=(g+p)/2,0):(p-g)/(t.length-1+h);return o=f(g+x*h/2,x),s=0,i={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(l,h){arguments.length<2&&(h=0);var g=l[0],p=l[1],x=t.length<2?(g=p=Math.round((g+p)/2),0):(p-g)/(t.length-1+h)|0;return o=f(g+Math.round(x*h/2+(p-g-(t.length-1+h)*x)/2),x),s=0,i={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(l,h,g){arguments.length<2&&(h=0),arguments.length<3&&(g=h);var p=l[1]<l[0],x=l[p-0],m=l[1-p],T=(m-x)/(t.length-h+2*g);return o=f(x+T*g,T),p&&o.reverse(),s=T*(1-h),i={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(l,h,g){arguments.length<2&&(h=0),arguments.length<3&&(g=h);var p=l[1]<l[0],x=l[p-0],m=l[1-p],T=Math.floor((m-x)/(t.length-h+2*g));return o=f(x+Math.round((m-x-(t.length-h)*T)/2),T),p&&o.reverse(),s=Math.round(T*(1-h)),i={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return s},c.rangeExtent=function(){return Tn(i.a[0])},c.copy=function(){return Uo(t,i)},c.domain(t)}b.scale.category10=function(){return b.scale.ordinal().range(kc)},b.scale.category20=function(){return b.scale.ordinal().range(Gc)},b.scale.category20b=function(){return b.scale.ordinal().range(Rc)},b.scale.category20c=function(){return b.scale.ordinal().range($c)};var kc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Qn),Gc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Qn),Rc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Qn),$c=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Qn);b.scale.quantile=function(){return jo([],[])};function jo(t,i){var r;function o(){var c=0,f=i.length;for(r=[];++c<f;)r[c-1]=b.quantile(t,c/f);return s}function s(c){if(!isNaN(c=+c))return i[b.bisect(r,c)]}return s.domain=function(c){return arguments.length?(t=c.map(le).filter(Jt).sort(Gt),o()):t},s.range=function(c){return arguments.length?(i=c,o()):i},s.quantiles=function(){return r},s.invertExtent=function(c){return c=i.indexOf(c),c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},s.copy=function(){return jo(t,i)},o()}b.scale.quantize=function(){return Wo(0,1,[0,1])};function Wo(t,i,r){var o,s;function c(l){return r[Math.max(0,Math.min(s,Math.floor(o*(l-t))))]}function f(){return o=r.length/(i-t),s=r.length-1,c}return c.domain=function(l){return arguments.length?(t=+l[0],i=+l[l.length-1],f()):[t,i]},c.range=function(l){return arguments.length?(r=l,f()):r},c.invertExtent=function(l){return l=r.indexOf(l),l=l<0?NaN:l/o+t,[l,l+1/o]},c.copy=function(){return Wo(t,i,r)},f()}b.scale.threshold=function(){return qo([.5],[0,1])};function qo(t,i){function r(o){if(o<=o)return i[b.bisect(t,o)]}return r.domain=function(o){return arguments.length?(t=o,r):t},r.range=function(o){return arguments.length?(i=o,r):i},r.invertExtent=function(o){return o=i.indexOf(o),[t[o-1],t[o]]},r.copy=function(){return qo(t,i)},r}b.scale.identity=function(){return Qo([0,1])};function Qo(t){function i(r){return+r}return i.invert=i,i.domain=i.range=function(r){return arguments.length?(t=r.map(i),i):t},i.ticks=function(r){return Or(t,r)},i.tickFormat=function(r,o){return Dr(t,r,o)},i.copy=function(){return Qo(t)},i}b.svg={};function Oc(){return 0}b.svg.arc=function(){var t=Dc,i=Fc,r=Oc,o=Ri,s=Zo,c=Ko,f=Ic;function l(){var g=Math.max(0,+t.apply(this,arguments)),p=Math.max(0,+i.apply(this,arguments)),x=s.apply(this,arguments)-$t,m=c.apply(this,arguments)-$t,T=Math.abs(m-x),V=x>m?0:1;if(p<g&&(S=p,p=g,g=S),T>=vs)return h(p,V)+(g?h(g,1-V):"")+"Z";var S,A,P,k,L=0,E=0,I,F,D,O,H,U,tt,q,Z=[];if((k=(+f.apply(this,arguments)||0)/2)&&(P=o===Ri?Math.sqrt(g*g+p*p):+o.apply(this,arguments),V||(E*=-1),p&&(E=ze(P/p*Math.sin(k))),g&&(L=ze(P/g*Math.sin(k)))),p){I=p*Math.cos(x+E),F=p*Math.sin(x+E),D=p*Math.cos(m-E),O=p*Math.sin(m-E);var z=Math.abs(m-x-2*E)<=ft?0:1;if(E&&$i(I,F,D,O)===V^z){var Y=(x+m)/2;I=p*Math.cos(Y),F=p*Math.sin(Y),D=O=null}}else I=F=0;if(g){H=g*Math.cos(m-L),U=g*Math.sin(m-L),tt=g*Math.cos(x+L),q=g*Math.sin(x+L);var W=Math.abs(x-m+2*L)<=ft?0:1;if(L&&$i(H,U,tt,q)===1-V^W){var X=(x+m)/2;H=g*Math.cos(X),U=g*Math.sin(X),tt=q=null}}else H=U=0;if(T>et&&(S=Math.min(Math.abs(p-g)/2,+r.apply(this,arguments)))>.001){A=g<p^V?0:1;var j=S,nt=S;if(T<ft){var ct=tt==null?[H,U]:D==null?[I,F]:wr([I,F],[tt,q],[D,O],[H,U]),dt=I-ct[0],St=F-ct[1],Pt=D-ct[0],Qt=O-ct[1],ee=1/Math.sin(Math.acos((dt*Pt+St*Qt)/(Math.sqrt(dt*dt+St*St)*Math.sqrt(Pt*Pt+Qt*Qt)))/2),Zt=Math.sqrt(ct[0]*ct[0]+ct[1]*ct[1]);nt=Math.min(S,(g-Zt)/(ee-1)),j=Math.min(S,(p-Zt)/(ee+1))}if(D!=null){var ae=Oi(tt==null?[H,U]:[tt,q],[I,F],p,j,V),Wt=Oi([D,O],[H,U],p,j,V);S===j?Z.push("M",ae[0],"A",j,",",j," 0 0,",A," ",ae[1],"A",p,",",p," 0 ",1-V^$i(ae[1][0],ae[1][1],Wt[1][0],Wt[1][1]),",",V," ",Wt[1],"A",j,",",j," 0 0,",A," ",Wt[0]):Z.push("M",ae[0],"A",j,",",j," 0 1,",A," ",Wt[0])}else Z.push("M",I,",",F);if(tt!=null){var oe=Oi([I,F],[tt,q],g,-nt,V),ln=Oi([H,U],D==null?[I,F]:[D,O],g,-nt,V);S===nt?Z.push("L",ln[0],"A",nt,",",nt," 0 0,",A," ",ln[1],"A",g,",",g," 0 ",V^$i(ln[1][0],ln[1][1],oe[1][0],oe[1][1]),",",1-V," ",oe[1],"A",nt,",",nt," 0 0,",A," ",oe[0]):Z.push("L",ln[0],"A",nt,",",nt," 0 0,",A," ",oe[0])}else Z.push("L",H,",",U)}else Z.push("M",I,",",F),D!=null&&Z.push("A",p,",",p," 0 ",z,",",V," ",D,",",O),Z.push("L",H,",",U),tt!=null&&Z.push("A",g,",",g," 0 ",W,",",1-V," ",tt,",",q);return Z.push("Z"),Z.join("")}function h(g,p){return"M0,"+g+"A"+g+","+g+" 0 1,"+p+" 0,"+-g+"A"+g+","+g+" 0 1,"+p+" 0,"+g}return l.innerRadius=function(g){return arguments.length?(t=At(g),l):t},l.outerRadius=function(g){return arguments.length?(i=At(g),l):i},l.cornerRadius=function(g){return arguments.length?(r=At(g),l):r},l.padRadius=function(g){return arguments.length?(o=g==Ri?Ri:At(g),l):o},l.startAngle=function(g){return arguments.length?(s=At(g),l):s},l.endAngle=function(g){return arguments.length?(c=At(g),l):c},l.padAngle=function(g){return arguments.length?(f=At(g),l):f},l.centroid=function(){var g=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,p=(+s.apply(this,arguments)+ +c.apply(this,arguments))/2-$t;return[Math.cos(p)*g,Math.sin(p)*g]},l};var Ri="auto";function Dc(t){return t.innerRadius}function Fc(t){return t.outerRadius}function Zo(t){return t.startAngle}function Ko(t){return t.endAngle}function Ic(t){return t&&t.padAngle}function $i(t,i,r,o){return(t-r)*i-(i-o)*t>0?0:1}function Oi(t,i,r,o,s){var c=t[0]-i[0],f=t[1]-i[1],l=(s?o:-o)/Math.sqrt(c*c+f*f),h=l*f,g=-l*c,p=t[0]+h,x=t[1]+g,m=i[0]+h,T=i[1]+g,V=(p+m)/2,S=(x+T)/2,A=m-p,P=T-x,k=A*A+P*P,L=r-o,E=p*T-m*x,I=(P<0?-1:1)*Math.sqrt(Math.max(0,L*L*k-E*E)),F=(E*P-A*I)/k,D=(-E*A-P*I)/k,O=(E*P+A*I)/k,H=(-E*A+P*I)/k,U=F-V,tt=D-S,q=O-V,Z=H-S;return U*U+tt*tt>q*q+Z*Z&&(F=O,D=H),[[F-h,D-g],[F*r/L,D*r/L]]}function Jo(t){var i=yn,r=$n,o=kn,s=ve,c=s.key,f=.7;function l(h){var g=[],p=[],x=-1,m=h.length,T,V=At(i),S=At(r);function A(){g.push("M",s(t(p),f))}for(;++x<m;)o.call(this,T=h[x],x)?p.push([+V.call(this,T,x),+S.call(this,T,x)]):p.length&&(A(),p=[]);return p.length&&A(),g.length?g.join(""):null}return l.x=function(h){return arguments.length?(i=h,l):i},l.y=function(h){return arguments.length?(r=h,l):r},l.defined=function(h){return arguments.length?(o=h,l):o},l.interpolate=function(h){return arguments.length?(typeof h=="function"?c=s=h:c=(s=Fr.get(h)||ve).key,l):c},l.tension=function(h){return arguments.length?(f=h,l):f},l}b.svg.line=function(){return Jo(e)};var Fr=b.map({linear:ve,"linear-closed":ts,step:Nc,"step-before":Ir,"step-after":Nr,basis:es,"basis-open":Hc,"basis-closed":Yc,bundle:Uc,cardinal:Bc,"cardinal-open":zc,"cardinal-closed":Xc,monotone:qc});Fr.forEach(function(t,i){i.key=t,i.closed=/-closed$/.test(t)});function ve(t){return t.length>1?t.join("L"):t+"Z"}function ts(t){return t.join("L")+"Z"}function Nc(t){for(var i=0,r=t.length,o=t[0],s=[o[0],",",o[1]];++i<r;)s.push("H",(o[0]+(o=t[i])[0])/2,"V",o[1]);return r>1&&s.push("H",o[0]),s.join("")}function Ir(t){for(var i=0,r=t.length,o=t[0],s=[o[0],",",o[1]];++i<r;)s.push("V",(o=t[i])[1],"H",o[0]);return s.join("")}function Nr(t){for(var i=0,r=t.length,o=t[0],s=[o[0],",",o[1]];++i<r;)s.push("H",(o=t[i])[0],"V",o[1]);return s.join("")}function zc(t,i){return t.length<4?ve(t):t[1]+Di(t.slice(1,-1),zr(t,i))}function Xc(t,i){return t.length<3?ts(t):t[0]+Di((t.push(t[0]),t),zr([t[t.length-2]].concat(t,[t[1]]),i))}function Bc(t,i){return t.length<3?ve(t):t[0]+Di(t,zr(t,i))}function Di(t,i){if(i.length<1||t.length!=i.length&&t.length!=i.length+2)return ve(t);var r=t.length!=i.length,o="",s=t[0],c=t[1],f=i[0],l=f,h=1;if(r&&(o+="Q"+(c[0]-f[0]*2/3)+","+(c[1]-f[1]*2/3)+","+c[0]+","+c[1],s=t[1],h=2),i.length>1){l=i[1],c=t[h],h++,o+="C"+(s[0]+f[0])+","+(s[1]+f[1])+","+(c[0]-l[0])+","+(c[1]-l[1])+","+c[0]+","+c[1];for(var g=2;g<i.length;g++,h++)c=t[h],l=i[g],o+="S"+(c[0]-l[0])+","+(c[1]-l[1])+","+c[0]+","+c[1]}if(r){var p=t[h];o+="Q"+(c[0]+l[0]*2/3)+","+(c[1]+l[1]*2/3)+","+p[0]+","+p[1]}return o}function zr(t,i){for(var r=[],o=(1-i)/2,s,c=t[0],f=t[1],l=1,h=t.length;++l<h;)s=c,c=f,f=t[l],r.push([o*(f[0]-s[0]),o*(f[1]-s[1])]);return r}function es(t){if(t.length<3)return ve(t);var i=1,r=t.length,o=t[0],s=o[0],c=o[1],f=[s,s,s,(o=t[1])[0]],l=[c,c,c,o[1]],h=[s,",",c,"L",he(je,f),",",he(je,l)];for(t.push(t[r-1]);++i<=r;)o=t[i],f.shift(),f.push(o[0]),l.shift(),l.push(o[1]),Xr(h,f,l);return t.pop(),h.push("L",o),h.join("")}function Hc(t){if(t.length<4)return ve(t);for(var i=[],r=-1,o=t.length,s,c=[0],f=[0];++r<3;)s=t[r],c.push(s[0]),f.push(s[1]);for(i.push(he(je,c)+","+he(je,f)),--r;++r<o;)s=t[r],c.shift(),c.push(s[0]),f.shift(),f.push(s[1]),Xr(i,c,f);return i.join("")}function Yc(t){for(var i,r=-1,o=t.length,s=o+4,c,f=[],l=[];++r<4;)c=t[r%o],f.push(c[0]),l.push(c[1]);for(i=[he(je,f),",",he(je,l)],--r;++r<s;)c=t[r%o],f.shift(),f.push(c[0]),l.shift(),l.push(c[1]),Xr(i,f,l);return i.join("")}function Uc(t,i){var r=t.length-1;if(r)for(var o=t[0][0],s=t[0][1],c=t[r][0]-o,f=t[r][1]-s,l=-1,h,g;++l<=r;)h=t[l],g=l/r,h[0]=i*h[0]+(1-i)*(o+g*c),h[1]=i*h[1]+(1-i)*(s+g*f);return es(t)}function he(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]}var ns=[0,2/3,1/3,0],is=[0,1/3,2/3,0],je=[0,1/6,2/3,1/6];function Xr(t,i,r){t.push("C",he(ns,i),",",he(ns,r),",",he(is,i),",",he(is,r),",",he(je,i),",",he(je,r))}function Br(t,i){return(i[1]-t[1])/(i[0]-t[0])}function jc(t){for(var i=0,r=t.length-1,o=[],s=t[0],c=t[1],f=o[0]=Br(s,c);++i<r;)o[i]=(f+(f=Br(s=c,c=t[i+1])))/2;return o[i]=f,o}function Wc(t){for(var i=[],r,o,s,c,f=jc(t),l=-1,h=t.length-1;++l<h;)r=Br(t[l],t[l+1]),at(r)<et?f[l]=f[l+1]=0:(o=f[l]/r,s=f[l+1]/r,c=o*o+s*s,c>9&&(c=r*3/Math.sqrt(c),f[l]=c*o,f[l+1]=c*s));for(l=-1;++l<=h;)c=(t[Math.min(h,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+f[l]*f[l])),i.push([c||0,f[l]*c||0]);return i}function qc(t){return t.length<3?ve(t):t[0]+Di(t,Wc(t))}b.svg.line.radial=function(){var t=Jo(rs);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t};function rs(t){for(var i,r=-1,o=t.length,s,c;++r<o;)i=t[r],s=i[0],c=i[1]-$t,i[0]=s*Math.cos(c),i[1]=s*Math.sin(c);return t}function as(t){var i=yn,r=yn,o=0,s=$n,c=kn,f=ve,l=f.key,h=f,g="L",p=.7;function x(m){var T=[],V=[],S=[],A=-1,P=m.length,k,L=At(i),E=At(o),I=i===r?function(){return D}:At(r),F=o===s?function(){return O}:At(s),D,O;function H(){T.push("M",f(t(S),p),g,h(t(V.reverse()),p),"Z")}for(;++A<P;)c.call(this,k=m[A],A)?(V.push([D=+L.call(this,k,A),O=+E.call(this,k,A)]),S.push([+I.call(this,k,A),+F.call(this,k,A)])):V.length&&(H(),V=[],S=[]);return V.length&&H(),T.length?T.join(""):null}return x.x=function(m){return arguments.length?(i=r=m,x):r},x.x0=function(m){return arguments.length?(i=m,x):i},x.x1=function(m){return arguments.length?(r=m,x):r},x.y=function(m){return arguments.length?(o=s=m,x):s},x.y0=function(m){return arguments.length?(o=m,x):o},x.y1=function(m){return arguments.length?(s=m,x):s},x.defined=function(m){return arguments.length?(c=m,x):c},x.interpolate=function(m){return arguments.length?(typeof m=="function"?l=f=m:l=(f=Fr.get(m)||ve).key,h=f.reverse||f,g=f.closed?"M":"L",x):l},x.tension=function(m){return arguments.length?(p=m,x):p},x}Ir.reverse=Nr,Nr.reverse=Ir,b.svg.area=function(){return as(e)},b.svg.area.radial=function(){var t=as(rs);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},b.svg.chord=function(){var t=_r,i=xr,r=Qc,o=Zo,s=Ko;function c(p,x){var m=f(this,t,p,x),T=f(this,i,p,x);return"M"+m.p0+h(m.r,m.p1,m.a1-m.a0)+(l(m,T)?g(m.r,m.p1,m.r,m.p0):g(m.r,m.p1,T.r,T.p0)+h(T.r,T.p1,T.a1-T.a0)+g(T.r,T.p1,m.r,m.p0))+"Z"}function f(p,x,m,T){var V=x.call(p,m,T),S=r.call(p,V,T),A=o.call(p,V,T)-$t,P=s.call(p,V,T)-$t;return{r:S,a0:A,a1:P,p0:[S*Math.cos(A),S*Math.sin(A)],p1:[S*Math.cos(P),S*Math.sin(P)]}}function l(p,x){return p.a0==x.a0&&p.a1==x.a1}function h(p,x,m){return"A"+p+","+p+" 0 "+ +(m>ft)+",1 "+x}function g(p,x,m,T){return"Q 0,0 "+T}return c.radius=function(p){return arguments.length?(r=At(p),c):r},c.source=function(p){return arguments.length?(t=At(p),c):t},c.target=function(p){return arguments.length?(i=At(p),c):i},c.startAngle=function(p){return arguments.length?(o=At(p),c):o},c.endAngle=function(p){return arguments.length?(s=At(p),c):s},c};function Qc(t){return t.radius}b.svg.diagonal=function(){var t=_r,i=xr,r=os;function o(s,c){var f=t.call(this,s,c),l=i.call(this,s,c),h=(f.y+l.y)/2,g=[f,{x:f.x,y:h},{x:l.x,y:h},l];return g=g.map(r),"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}return o.source=function(s){return arguments.length?(t=At(s),o):t},o.target=function(s){return arguments.length?(i=At(s),o):i},o.projection=function(s){return arguments.length?(r=s,o):r},o};function os(t){return[t.x,t.y]}b.svg.diagonal.radial=function(){var t=b.svg.diagonal(),i=os,r=t.projection;return t.projection=function(o){return arguments.length?r(Zc(i=o)):i},t};function Zc(t){return function(){var i=t.apply(this,arguments),r=i[0],o=i[1]-$t;return[r*Math.cos(o),r*Math.sin(o)]}}b.svg.symbol=function(){var t=Jc,i=Kc;function r(o,s){return(us.get(t.call(this,o,s))||ss)(i.call(this,o,s))}return r.type=function(o){return arguments.length?(t=At(o),r):t},r.size=function(o){return arguments.length?(i=At(o),r):i},r};function Kc(){return 64}function Jc(){return"circle"}function ss(t){var i=Math.sqrt(t/ft);return"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z"}var us=b.map({circle:ss,cross:function(t){var i=Math.sqrt(t/5)/2;return"M"+-3*i+","+-i+"H"+-i+"V"+-3*i+"H"+i+"V"+-i+"H"+3*i+"V"+i+"H"+i+"V"+3*i+"H"+-i+"V"+i+"H"+-3*i+"Z"},diamond:function(t){var i=Math.sqrt(t/(2*cs)),r=i*cs;return"M0,"+-i+"L"+r+",0 0,"+i+" "+-r+",0Z"},square:function(t){var i=Math.sqrt(t)/2;return"M"+-i+","+-i+"L"+i+","+-i+" "+i+","+i+" "+-i+","+i+"Z"},"triangle-down":function(t){var i=Math.sqrt(t/Fi),r=i*Fi/2;return"M0,"+r+"L"+i+","+-r+" "+-i+","+-r+"Z"},"triangle-up":function(t){var i=Math.sqrt(t/Fi),r=i*Fi/2;return"M0,"+-r+"L"+i+","+r+" "+-i+","+r+"Z"}});b.svg.symbolTypes=us.keys();var Fi=Math.sqrt(3),cs=Math.tan(30*ht);J.transition=function(t){for(var i=un||++fs,r=Yr(t),o=[],s,c,f=Ni||{time:Date.now(),ease:Eu,delay:0,duration:250},l=-1,h=this.length;++l<h;){o.push(s=[]);for(var g=this[l],p=-1,x=g.length;++p<x;)(c=g[p])&&zi(c,p,r,i,f),s.push(c)}return Bn(o,r,i)},J.interrupt=function(t){return this.each(t==null?Ii:ls(Yr(t)))};var Ii=ls(Yr());function ls(t){return function(){var i,r,o;(i=this[t])&&(o=i[r=i.active])&&(o.timer.c=null,o.timer.t=NaN,--i.count?delete i[r]:delete this[t],i.active+=.5,o.event&&o.event.interrupt.call(this,this.__data__,o.index))}}function Bn(t,i,r){return $(t,Ft),t.namespace=i,t.id=r,t}var Ft=[],fs=0,un,Ni;Ft.call=J.call,Ft.empty=J.empty,Ft.node=J.node,Ft.size=J.size,b.transition=function(t,i){return t&&t.transition?un?t.transition(i):t:b.selection().transition(t)},b.transition.prototype=Ft,Ft.select=function(t){var i=this.id,r=this.namespace,o=[],s,c,f;t=gt(t);for(var l=-1,h=this.length;++l<h;){o.push(s=[]);for(var g=this[l],p=-1,x=g.length;++p<x;)(f=g[p])&&(c=t.call(f,f.__data__,p,l))?("__data__"in f&&(c.__data__=f.__data__),zi(c,p,r,i,f[r][i]),s.push(c)):s.push(null)}return Bn(o,r,i)},Ft.selectAll=function(t){var i=this.id,r=this.namespace,o=[],s,c,f,l,h;t=yt(t);for(var g=-1,p=this.length;++g<p;)for(var x=this[g],m=-1,T=x.length;++m<T;)if(f=x[m]){h=f[r][i],c=t.call(f,f.__data__,m,g),o.push(s=[]);for(var V=-1,S=c.length;++V<S;)(l=c[V])&&zi(l,V,r,i,h),s.push(l)}return Bn(o,r,i)},Ft.filter=function(t){var i=[],r,o,s;typeof t!="function"&&(t=Ht(t));for(var c=0,f=this.length;c<f;c++){i.push(r=[]);for(var o=this[c],l=0,h=o.length;l<h;l++)(s=o[l])&&t.call(s,s.__data__,l,c)&&r.push(s)}return Bn(i,this.namespace,this.id)},Ft.tween=function(t,i){var r=this.id,o=this.namespace;return arguments.length<2?this.node()[o][r].tween.get(t):Nt(this,i==null?function(s){s[o][r].tween.remove(t)}:function(s){s[o][r].tween.set(t,i)})};function Hr(t,i,r,o){var s=t.id,c=t.namespace;return Nt(t,typeof r=="function"?function(f,l,h){f[c][s].tween.set(i,o(r.call(f,f.__data__,l,h)))}:(r=o(r),function(f){f[c][s].tween.set(i,r)}))}Ft.attr=function(t,i){if(arguments.length<2){for(i in t)this.attr(i,t[i]);return this}var r=t=="transform"?Po:sn,o=b.ns.qualify(t);function s(){this.removeAttribute(o)}function c(){this.removeAttributeNS(o.space,o.local)}function f(h){return h==null?s:(h+="",function(){var g=this.getAttribute(o),p;return g!==h&&(p=r(g,h),function(x){this.setAttribute(o,p(x))})})}function l(h){return h==null?c:(h+="",function(){var g=this.getAttributeNS(o.space,o.local),p;return g!==h&&(p=r(g,h),function(x){this.setAttributeNS(o.space,o.local,p(x))})})}return Hr(this,"attr."+t,i,o.local?l:f)},Ft.attrTween=function(t,i){var r=b.ns.qualify(t);function o(c,f){var l=i.call(this,c,f,this.getAttribute(r));return l&&function(h){this.setAttribute(r,l(h))}}function s(c,f){var l=i.call(this,c,f,this.getAttributeNS(r.space,r.local));return l&&function(h){this.setAttributeNS(r.space,r.local,l(h))}}return this.tween("attr."+t,r.local?s:o)},Ft.style=function(t,i,r){var o=arguments.length;if(o<3){if(typeof t!="string"){o<2&&(i="");for(r in t)this.style(r,t[r],i);return this}r=""}function s(){this.style.removeProperty(t)}function c(f){return f==null?s:(f+="",function(){var l=be(this).getComputedStyle(this,null).getPropertyValue(t),h;return l!==f&&(h=sn(l,f),function(g){this.style.setProperty(t,h(g),r)})})}return Hr(this,"style."+t,i,c)},Ft.styleTween=function(t,i,r){arguments.length<3&&(r="");function o(s,c){var f=i.call(this,s,c,be(this).getComputedStyle(this,null).getPropertyValue(t));return f&&function(l){this.style.setProperty(t,f(l),r)}}return this.tween("style."+t,o)},Ft.text=function(t){return Hr(this,"text",t,tl)};function tl(t){return t==null&&(t=""),function(){this.textContent=t}}Ft.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var i;this[t].count<2&&(i=this.parentNode)&&i.removeChild(this)})},Ft.ease=function(t){var i=this.id,r=this.namespace;return arguments.length<1?this.node()[r][i].ease:(typeof t!="function"&&(t=b.ease.apply(b,arguments)),Nt(this,function(o){o[r][i].ease=t}))},Ft.delay=function(t){var i=this.id,r=this.namespace;return arguments.length<1?this.node()[r][i].delay:Nt(this,typeof t=="function"?function(o,s,c){o[r][i].delay=+t.call(o,o.__data__,s,c)}:(t=+t,function(o){o[r][i].delay=t}))},Ft.duration=function(t){var i=this.id,r=this.namespace;return arguments.length<1?this.node()[r][i].duration:Nt(this,typeof t=="function"?function(o,s,c){o[r][i].duration=Math.max(1,t.call(o,o.__data__,s,c))}:(t=Math.max(1,t),function(o){o[r][i].duration=t}))},Ft.each=function(t,i){var r=this.id,o=this.namespace;if(arguments.length<2){var s=Ni,c=un;try{un=r,Nt(this,function(f,l,h){Ni=f[o][r],t.call(f,f.__data__,l,h)})}finally{Ni=s,un=c}}else Nt(this,function(f){var l=f[o][r];(l.event||(l.event=b.dispatch("start","end","interrupt"))).on(t,i)});return this},Ft.transition=function(){for(var t=this.id,i=++fs,r=this.namespace,o=[],s,c,f,l,h=0,g=this.length;h<g;h++){o.push(s=[]);for(var c=this[h],p=0,x=c.length;p<x;p++)(f=c[p])&&(l=f[r][t],zi(f,p,r,i,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration})),s.push(f)}return Bn(o,r,i)};function Yr(t){return t==null?"__transition__":"__transition_"+t+"__"}function zi(t,i,r,o,s){var c=t[r]||(t[r]={active:0,count:0}),f=c[o],l,h,g,p,x;function m(S){var A=f.delay;if(h.t=A+l,A<=S)return T(S-A);h.c=T}function T(S){var A=c.active,P=c[A];P&&(P.timer.c=null,P.timer.t=NaN,--c.count,delete c[A],P.event&&P.event.interrupt.call(t,t.__data__,P.index));for(var k in c)if(+k<o){var L=c[k];L.timer.c=null,L.timer.t=NaN,--c.count,delete c[k]}h.c=V,ri(function(){return h.c&&V(S||1)&&(h.c=null,h.t=NaN),1},0,l),c.active=o,f.event&&f.event.start.call(t,t.__data__,i),x=[],f.tween.forEach(function(E,I){(I=I.call(t,t.__data__,i))&&x.push(I)}),p=f.ease,g=f.duration}function V(S){for(var A=S/g,P=p(A),k=x.length;k>0;)x[--k].call(t,P);if(A>=1)return f.event&&f.event.end.call(t,t.__data__,i),--c.count?delete c[o]:delete t[r],1}f||(l=s.time,h=ri(m,0,l),f=c[o]={tween:new fe,time:l,timer:h,delay:s.delay,duration:s.duration,ease:s.ease,index:i},s=null,++c.count)}b.svg.axis=function(){var t=b.scale.linear(),i=hs,r=6,o=6,s=3,c=[10],f=null,l;function h(g){g.each(function(){var p=b.select(this),x=this.__chart__||t,m=this.__chart__=t.copy(),T=f??(m.ticks?m.ticks.apply(m,c):m.domain()),V=l??(m.tickFormat?m.tickFormat.apply(m,c):e),S=p.selectAll(".tick").data(T,m),A=S.enter().insert("g",".domain").attr("class","tick").style("opacity",et),P=b.transition(S.exit()).style("opacity",et).remove(),k=b.transition(S.order()).style("opacity",1),L=Math.max(r,0)+s,E,I=Ei(m),F=p.selectAll(".domain").data([0]),D=(F.enter().append("path").attr("class","domain"),b.transition(F));A.append("line"),A.append("text");var O=A.select("line"),H=k.select("line"),U=S.select("text").text(V),tt=A.select("text"),q=k.select("text"),Z=i==="top"||i==="left"?-1:1,z,Y,W,X;if(i==="bottom"||i==="top"?(E=nl,z="x",W="y",Y="x2",X="y2",U.attr("dy",Z<0?"0em":".71em").style("text-anchor","middle"),D.attr("d","M"+I[0]+","+Z*o+"V0H"+I[1]+"V"+Z*o)):(E=il,z="y",W="x",Y="y2",X="x2",U.attr("dy",".32em").style("text-anchor",Z<0?"end":"start"),D.attr("d","M"+Z*o+","+I[0]+"H0V"+I[1]+"H"+Z*o)),O.attr(X,Z*r),tt.attr(W,Z*L),H.attr(Y,0).attr(X,Z*r),q.attr(z,0).attr(W,Z*L),m.rangeBand){var j=m,nt=j.rangeBand()/2;x=m=function(ct){return j(ct)+nt}}else x.rangeBand?x=m:P.call(E,m,x);A.call(E,x,m),k.call(E,m,m)})}return h.scale=function(g){return arguments.length?(t=g,h):t},h.orient=function(g){return arguments.length?(i=g in el?g+"":hs,h):i},h.ticks=function(){return arguments.length?(c=Ct(arguments),h):c},h.tickValues=function(g){return arguments.length?(f=g,h):f},h.tickFormat=function(g){return arguments.length?(l=g,h):l},h.tickSize=function(g){var p=arguments.length;return p?(r=+g,o=+arguments[p-1],h):r},h.innerTickSize=function(g){return arguments.length?(r=+g,h):r},h.outerTickSize=function(g){return arguments.length?(o=+g,h):o},h.tickPadding=function(g){return arguments.length?(s=+g,h):s},h.tickSubdivide=function(){return arguments.length&&h},h};var hs="bottom",el={top:1,right:1,bottom:1,left:1};function nl(t,i,r){t.attr("transform",function(o){var s=i(o);return"translate("+(isFinite(s)?s:r(o))+",0)"})}function il(t,i,r){t.attr("transform",function(o){var s=i(o);return"translate(0,"+(isFinite(s)?s:r(o))+")"})}b.svg.brush=function(){var t=C(p,"brushstart","brush","brushend"),i=null,r=null,o=[0,0],s=[0,0],c,f,l=!0,h=!0,g=Ur[0];function p(S){S.each(function(){var A=b.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",V).on("touchstart.brush",V),P=A.selectAll(".background").data([0]);P.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),A.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var k=A.selectAll(".resize").data(g,e);k.exit().remove(),k.enter().append("g").attr("class",function(F){return"resize "+F}).style("cursor",function(F){return rl[F]}).append("rect").attr("x",function(F){return/[ew]$/.test(F)?-3:null}).attr("y",function(F){return/^[ns]/.test(F)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),k.style("display",p.empty()?"none":null);var L=b.transition(A),E=b.transition(P),I;i&&(I=Ei(i),E.attr("x",I[0]).attr("width",I[1]-I[0]),m(L)),r&&(I=Ei(r),E.attr("y",I[0]).attr("height",I[1]-I[0]),T(L)),x(L)})}p.event=function(S){S.each(function(){var A=t.of(this,arguments),P={x:o,y:s,i:c,j:f},k=this.__chart__||P;this.__chart__=P,un?b.select(this).transition().each("start.brush",function(){c=k.i,f=k.j,o=k.x,s=k.y,A({type:"brushstart"})}).tween("brush:brush",function(){var L=Mi(o,P.x),E=Mi(s,P.y);return c=f=null,function(I){o=P.x=L(I),s=P.y=E(I),A({type:"brush",mode:"resize"})}}).each("end.brush",function(){c=P.i,f=P.j,A({type:"brush",mode:"resize"}),A({type:"brushend"})}):(A({type:"brushstart"}),A({type:"brush",mode:"resize"}),A({type:"brushend"}))})};function x(S){S.selectAll(".resize").attr("transform",function(A){return"translate("+o[+/e$/.test(A)]+","+s[+/^s/.test(A)]+")"})}function m(S){S.select(".extent").attr("x",o[0]),S.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function T(S){S.select(".extent").attr("y",s[0]),S.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function V(){var S=this,A=b.select(b.event.target),P=t.of(S,arguments),k=b.select(S),L=A.datum(),E=!/^(n|s)$/.test(L)&&i,I=!/^(e|w)$/.test(L)&&r,F=A.classed("extent"),D=Ne(S),O,H=b.mouse(S),U,tt=b.select(be(S)).on("keydown.brush",z).on("keyup.brush",Y);if(b.event.changedTouches?tt.on("touchmove.brush",W).on("touchend.brush",j):tt.on("mousemove.brush",W).on("mouseup.brush",j),k.interrupt().selectAll("*").interrupt(),F)H[0]=o[0]-H[0],H[1]=s[0]-H[1];else if(L){var q=+/w$/.test(L),Z=+/^n/.test(L);U=[o[1-q]-H[0],s[1-Z]-H[1]],H[0]=o[q],H[1]=s[Z]}else b.event.altKey&&(O=H.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),b.select("body").style("cursor",A.style("cursor")),P({type:"brushstart"}),W();function z(){b.event.keyCode==32&&(F||(O=null,H[0]-=o[1],H[1]-=s[1],F=2),y())}function Y(){b.event.keyCode==32&&F==2&&(H[0]+=o[1],H[1]+=s[1],F=0,y())}function W(){var nt=b.mouse(S),ct=!1;U&&(nt[0]+=U[0],nt[1]+=U[1]),F||(b.event.altKey?(O||(O=[(o[0]+o[1])/2,(s[0]+s[1])/2]),H[0]=o[+(nt[0]<O[0])],H[1]=s[+(nt[1]<O[1])]):O=null),E&&X(nt,i,0)&&(m(k),ct=!0),I&&X(nt,r,1)&&(T(k),ct=!0),ct&&(x(k),P({type:"brush",mode:F?"move":"resize"}))}function X(nt,ct,dt){var St=Ei(ct),Pt=St[0],Qt=St[1],ee=H[dt],Zt=dt?s:o,ae=Zt[1]-Zt[0],Wt,oe;if(F&&(Pt-=ee,Qt-=ae+ee),Wt=(dt?h:l)?Math.max(Pt,Math.min(Qt,nt[dt])):nt[dt],F?oe=(Wt+=ee)+ae:(O&&(ee=Math.max(Pt,Math.min(Qt,2*O[dt]-Wt))),ee<Wt?(oe=Wt,Wt=ee):oe=ee),Zt[0]!=Wt||Zt[1]!=oe)return dt?f=null:c=null,Zt[0]=Wt,Zt[1]=oe,!0}function j(){W(),k.style("pointer-events","all").selectAll(".resize").style("display",p.empty()?"none":null),b.select("body").style("cursor",null),tt.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),P({type:"brushend"})}}return p.x=function(S){return arguments.length?(i=S,g=Ur[!i<<1|!r],p):i},p.y=function(S){return arguments.length?(r=S,g=Ur[!i<<1|!r],p):r},p.clamp=function(S){return arguments.length?(i&&r?(l=!!S[0],h=!!S[1]):i?l=!!S:r&&(h=!!S),p):i&&r?[l,h]:i?l:r?h:null},p.extent=function(S){var A,P,k,L,E;return arguments.length?(i&&(A=S[0],P=S[1],r&&(A=A[0],P=P[0]),c=[A,P],i.invert&&(A=i(A),P=i(P)),P<A&&(E=A,A=P,P=E),(A!=o[0]||P!=o[1])&&(o=[A,P])),r&&(k=S[0],L=S[1],i&&(k=k[1],L=L[1]),f=[k,L],r.invert&&(k=r(k),L=r(L)),L<k&&(E=k,k=L,L=E),(k!=s[0]||L!=s[1])&&(s=[k,L])),p):(i&&(c?(A=c[0],P=c[1]):(A=o[0],P=o[1],i.invert&&(A=i.invert(A),P=i.invert(P)),P<A&&(E=A,A=P,P=E))),r&&(f?(k=f[0],L=f[1]):(k=s[0],L=s[1],r.invert&&(k=r.invert(k),L=r.invert(L)),L<k&&(E=k,k=L,L=E))),i&&r?[[A,k],[P,L]]:i?[A,P]:r&&[k,L])},p.clear=function(){return p.empty()||(o=[0,0],s=[0,0],c=f=null),p},p.empty=function(){return!!i&&o[0]==o[1]||!!r&&s[0]==s[1]},b.rebind(p,t,"on")};var rl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ur=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],jr=rt.format=wa.timeFormat,ds=jr.utc,gs=ds("%Y-%m-%dT%H:%M:%S.%LZ");jr.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Wr:gs;function Wr(t){return t.toISOString()}Wr.parse=function(t){var i=new Date(t);return isNaN(i)?null:i},Wr.toString=gs.toString,rt.second=Je(function(t){return new jt(Math.floor(t/1e3)*1e3)},function(t,i){t.setTime(t.getTime()+Math.floor(i)*1e3)},function(t){return t.getSeconds()}),rt.seconds=rt.second.range,rt.seconds.utc=rt.second.utc.range,rt.minute=Je(function(t){return new jt(Math.floor(t/6e4)*6e4)},function(t,i){t.setTime(t.getTime()+Math.floor(i)*6e4)},function(t){return t.getMinutes()}),rt.minutes=rt.minute.range,rt.minutes.utc=rt.minute.utc.range,rt.hour=Je(function(t){var i=t.getTimezoneOffset()/60;return new jt((Math.floor(t/36e5-i)+i)*36e5)},function(t,i){t.setTime(t.getTime()+Math.floor(i)*36e5)},function(t){return t.getHours()}),rt.hours=rt.hour.range,rt.hours.utc=rt.hour.utc.range,rt.month=Je(function(t){return t=rt.day(t),t.setDate(1),t},function(t,i){t.setMonth(t.getMonth()+i)},function(t){return t.getMonth()}),rt.months=rt.month.range,rt.months.utc=rt.month.utc.range;function qr(t,i,r){function o(c){return t(c)}o.invert=function(c){return cn(t.invert(c))},o.domain=function(c){return arguments.length?(t.domain(c),o):t.domain().map(cn)};function s(c,f){var l=c[1]-c[0],h=l/f,g=b.bisect(Xi,h);return g==Xi.length?[i.year,Pn(c.map(function(p){return p/31536e6}),f)[2]]:g?i[h/Xi[g-1]<Xi[g]/h?g-1:g]:[ol,Pn(c,f)[2]]}return o.nice=function(c,f){var l=o.domain(),h=Tn(l),g=c==null?s(h,10):typeof c=="number"&&s(h,c);g&&(c=g[0],f=g[1]);function p(x){return!isNaN(x)&&!c.range(x,cn(+x+1),f).length}return o.domain(Vi(l,f>1?{floor:function(x){for(;p(x=c.floor(x));)x=cn(x-1);return x},ceil:function(x){for(;p(x=c.ceil(x));)x=cn(+x+1);return x}}:c))},o.ticks=function(c,f){var l=Tn(o.domain()),h=c==null?s(l,10):typeof c=="number"?s(l,c):!c.range&&[{range:c},f];return h&&(c=h[0],f=h[1]),c.range(l[0],cn(+l[1]+1),f<1?1:f)},o.tickFormat=function(){return r},o.copy=function(){return qr(t.copy(),i,r)},$r(o,t)}function cn(t){return new Date(t)}var Xi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Qr=[[rt.second,1],[rt.second,5],[rt.second,15],[rt.second,30],[rt.minute,1],[rt.minute,5],[rt.minute,15],[rt.minute,30],[rt.hour,1],[rt.hour,3],[rt.hour,6],[rt.hour,12],[rt.day,1],[rt.day,2],[rt.week,1],[rt.month,1],[rt.month,3],[rt.year,1]],al=jr.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&t.getDate()!=1}],["%b %d",function(t){return t.getDate()!=1}],["%B",function(t){return t.getMonth()}],["%Y",kn]]),ol={range:function(t,i,r){return b.range(Math.ceil(t/r)*r,+i,r).map(cn)},floor:e,ceil:e};Qr.year=rt.year,rt.scale=function(){return qr(b.scale.linear(),Qr,al)};var ps=Qr.map(function(t){return[t[0].utc,t[1]]}),sl=ds.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&t.getUTCDate()!=1}],["%b %d",function(t){return t.getUTCDate()!=1}],["%B",function(t){return t.getUTCMonth()}],["%Y",kn]]);ps.year=rt.year.utc,rt.scale.utc=function(){return qr(b.scale.linear(),ps,sl)},b.text=ir(function(t){return t.responseText}),b.json=function(t,i){return Jn(t,"application/json",ul,i)};function ul(t){return JSON.parse(t.responseText)}b.html=function(t,i){return Jn(t,"text/html",cl,i)};function cl(t){var i=kt.createRange();return i.selectNode(kt.body),i.createContextualFragment(t.responseText)}b.xml=ir(function(t){return t.responseXML}),Se.exports?Se.exports=b:this.d3=b})()}(Zr)),Zr.exports}/* @license C3.js v0.4.24 | (c) C3 Team and other contributors | http://c3js.org/ */(function(Se,b){(function(M,Ct){Se.exports=Ct()})(hl,function(){var M={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},De=function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},be=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:e},mt=function(n){return n||n===0},Kt=function(n){return typeof n=="function"},Hn=function(n){return Array.isArray(n)},Xt=function(n){return typeof n=="string"},ne=function(n){return typeof n>"u"},Gt=function(n){return typeof n<"u"},le=function(n){return Math.ceil(n/10)*10},Jt=function(n){return Math.ceil(n)+.5},Ae=function(n){return n[1]-n[0]},hn=function(n){return typeof n>"u"||n===null||Xt(n)&&n.length===0||(typeof n>"u"?"undefined":Ct(n))==="object"&&Object.keys(n).length===0},qt=function(n){return!w.isEmpty(n)},at=function(n,a,u){return Gt(n[a])?n[a]:u},Yn=function(n,a){var u=!1;return Object.keys(n).forEach(function(d){n[d]===a&&(u=!0)}),u},qe=function(n){return typeof n=="string"?n.replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},fe=function(n){var a=n.getBoundingClientRect(),u=[n.pathSegList.getItem(0),n.pathSegList.getItem(1)],d=u[0].x,_=Math.min(u[0].y,u[1].y);return{x:d,y:_,width:a.width,height:a.height}},pt,Mt;function Fe(e,n){var a=this;a.component=e,a.params=n||{},a.d3=e.d3,a.scale=a.d3.scale.linear(),a.range,a.orient="bottom",a.innerTickSize=6,a.outerTickSize=this.params.withOuterTick?6:0,a.tickPadding=3,a.tickValues=null,a.tickFormat,a.tickArguments,a.tickOffset=0,a.tickCulling=!0,a.tickCentered,a.tickTextCharSize,a.tickTextRotate=a.params.tickTextRotate,a.tickLength,a.axis=a.generateAxis()}Mt=Fe.prototype,Mt.axisX=function(e,n,a){e.attr("transform",function(u){return"translate("+Math.ceil(n(u)+a)+", 0)"})},Mt.axisY=function(e,n){e.attr("transform",function(a){return"translate(0,"+Math.ceil(n(a))+")"})},Mt.scaleExtent=function(e){var n=e[0],a=e[e.length-1];return n<a?[n,a]:[a,n]},Mt.generateTicks=function(e){var n=this,a,u,d=[];if(e.ticks)return e.ticks.apply(e,n.tickArguments);for(u=e.domain(),a=Math.ceil(u[0]);a<u[1];a++)d.push(a);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d},Mt.copyScale=function(){var e=this,n=e.scale.copy(),a;return e.params.isCategory&&(a=e.scale.domain(),n.domain([a[0],a[1]-1])),n},Mt.textFormatted=function(e){var n=this,a=n.tickFormat?n.tickFormat(e):e;return typeof a<"u"?a:""},Mt.updateRange=function(){var e=this;return e.range=e.scale.rangeExtent?e.scale.rangeExtent():e.scaleExtent(e.scale.range()),e.range},Mt.updateTickTextCharSize=function(e){var n=this;if(n.tickTextCharSize)return n.tickTextCharSize;var a={h:11.5,w:5.5};return e.select("text").text(function(u){return n.textFormatted(u)}).each(function(u){var d=this.getBoundingClientRect(),_=n.textFormatted(u),v=d.height,y=_?d.width/_.length:void 0;v&&y&&(a.h=v,a.w=y)}).text(""),n.tickTextCharSize=a,a},Mt.transitionise=function(e){return this.params.withoutTransition?e:this.d3.transition(e)},Mt.isVertical=function(){return this.orient==="left"||this.orient==="right"},Mt.tspanData=function(e,n,a,u){var d=this,_=d.params.tickMultiline?d.splitTickText(e,a,u):[].concat(d.textFormatted(e));return d.params.tickMultiline&&d.params.tickMultilineMax>0&&(_=d.ellipsify(_,d.params.tickMultilineMax)),_.map(function(v){return{index:n,splitted:v,length:_.length}})},Mt.splitTickText=function(e,n,a){var u=this,d=u.textFormatted(e),_=u.params.tickWidth,v,y,G,C=[];if(Object.prototype.toString.call(d)==="[object Array]")return d;(!_||_<=0)&&(_=u.isVertical()?95:u.params.isCategory?Math.ceil(a(n[1])-a(n[0]))-12:110);function R($,N){y=void 0;for(var B=1;B<N.length;B++)if(N.charAt(B)===" "&&(y=B),v=N.substr(0,B+1),G=u.tickTextCharSize.w*v.length,_<G)return R($.concat(N.substr(0,y||B)),N.slice(y?y+1:B));return $.concat(N)}return R(C,d+"")},Mt.ellipsify=function(e,n){if(e.length<=n)return e;for(var a=e.slice(0,n),u=3,d=n-1;d>=0;d--){var _=a[d].length;if(a[d]=a[d].substr(0,_-u).padEnd(_,"."),u-=_,u<=0)break}return a},Mt.updateTickLength=function(){var e=this;e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding},Mt.lineY2=function(e){var n=this,a=n.scale(e)+(n.tickCentered?0:n.tickOffset);return n.range[0]<a&&a<n.range[1]?n.innerTickSize:0},Mt.textY=function(){var e=this,n=e.tickTextRotate;return n?11.5-2.5*(n/15)*(n>0?1:-1):e.tickLength},Mt.textTransform=function(){var e=this,n=e.tickTextRotate;return n?"rotate("+n+")":""},Mt.textTextAnchor=function(){var e=this,n=e.tickTextRotate;return n?n>0?"start":"end":"middle"},Mt.tspanDx=function(){var e=this,n=e.tickTextRotate;return n?8*Math.sin(Math.PI*(n/180)):0},Mt.tspanDy=function(e,n){var a=this,u=a.tickTextCharSize.h;return n===0&&(a.isVertical()?u=-((e.length-1)*(a.tickTextCharSize.h/2)-3):u=".71em"),u},Mt.generateAxis=function(){var e=this,n=e.d3,a=e.params;function u(d){d.each(function(){var _=u.g=n.select(this),v=this.__chart__||e.scale,y=this.__chart__=e.copyScale(),G=e.tickValues?e.tickValues:e.generateTicks(y),C=_.selectAll(".tick").data(G,y),R=C.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),$=C.exit().remove(),N=e.transitionise(C).style("opacity",1),B,Q,K;a.isCategory?(e.tickOffset=Math.ceil((y(1)-y(0))/2),Q=e.tickCentered?0:e.tickOffset,K=e.tickCentered?e.tickOffset:0):e.tickOffset=Q=0,R.append("line"),R.append("text"),e.updateRange(),e.updateTickLength(),e.updateTickTextCharSize(_.select(".tick"));var J=N.select("line"),gt=N.select("text"),yt=C.select("text").selectAll("tspan").data(function(it,st){return e.tspanData(it,st,G,y)});yt.enter().append("tspan"),yt.exit().remove(),yt.text(function(it){return it.splitted});var vt=_.selectAll(".domain").data([0]),xt=(vt.enter().append("path").attr("class","domain"),e.transitionise(vt));switch(e.orient){case"bottom":{B=e.axisX,J.attr("x1",Q).attr("x2",Q).attr("y2",function(it,st){return e.lineY2(it,st)}),gt.attr("x",0).attr("y",function(it,st){return e.textY(it,st)}).attr("transform",function(it,st){return e.textTransform(it,st)}).style("text-anchor",function(it,st){return e.textTextAnchor(it,st)}),yt.attr("x",0).attr("dy",function(it,st){return e.tspanDy(it,st)}).attr("dx",function(it,st){return e.tspanDx(it,st)}),xt.attr("d","M"+e.range[0]+","+e.outerTickSize+"V0H"+e.range[1]+"V"+e.outerTickSize);break}case"top":{B=e.axisX,J.attr("x1",Q).attr("x2",Q).attr("y2",function(it,st){return-1*e.lineY2(it,st)}),gt.attr("x",0).attr("y",function(it,st){return-1*e.textY(it,st)-(a.isCategory?2:e.tickLength-2)}).attr("transform",function(it,st){return e.textTransform(it,st)}).style("text-anchor",function(it,st){return e.textTextAnchor(it,st)}),yt.attr("x",0).attr("dy",function(it,st){return e.tspanDy(it,st)}).attr("dx",function(it,st){return e.tspanDx(it,st)}),xt.attr("d","M"+e.range[0]+","+-e.outerTickSize+"V0H"+e.range[1]+"V"+-e.outerTickSize);break}case"left":{B=e.axisY,J.attr("x2",-e.innerTickSize).attr("y1",K).attr("y2",K),gt.attr("x",-e.tickLength).attr("y",e.tickOffset).style("text-anchor","end"),yt.attr("x",-e.tickLength).attr("dy",function(it,st){return e.tspanDy(it,st)}),xt.attr("d","M"+-e.outerTickSize+","+e.range[0]+"H0V"+e.range[1]+"H"+-e.outerTickSize);break}case"right":{B=e.axisY,J.attr("x2",e.innerTickSize).attr("y1",K).attr("y2",K),gt.attr("x",e.tickLength).attr("y",e.tickOffset).style("text-anchor","start"),yt.attr("x",e.tickLength).attr("dy",function(it,st){return e.tspanDy(it,st)}),xt.attr("d","M"+e.outerTickSize+","+e.range[0]+"H0V"+e.range[1]+"H"+e.outerTickSize);break}}if(y.rangeBand){var wt=y,bt=wt.rangeBand()/2;v=y=function(st){return wt(st)+bt}}else v.rangeBand?v=y:$.call(B,y,e.tickOffset);R.call(B,v,e.tickOffset),N.call(B,y,e.tickOffset)})}return u.scale=function(d){return arguments.length?(e.scale=d,u):e.scale},u.orient=function(d){return arguments.length?(e.orient=d in{top:1,right:1,bottom:1,left:1}?d+"":"bottom",u):e.orient},u.tickFormat=function(d){return arguments.length?(e.tickFormat=d,u):e.tickFormat},u.tickCentered=function(d){return arguments.length?(e.tickCentered=d,u):e.tickCentered},u.tickOffset=function(){return e.tickOffset},u.tickInterval=function(){var d,_;return a.isCategory?d=e.tickOffset*2:(_=u.g.select("path.domain").node().getTotalLength()-e.outerTickSize*2,d=_/u.g.selectAll("line").size()),d===1/0?0:d},u.ticks=function(){return arguments.length?(e.tickArguments=arguments,u):e.tickArguments},u.tickCulling=function(d){return arguments.length?(e.tickCulling=d,u):e.tickCulling},u.tickValues=function(d){if(typeof d=="function")e.tickValues=function(){return d(e.scale.domain())};else{if(!arguments.length)return e.tickValues;e.tickValues=d}return u},u};var Qe=function(e){De(n,e);function n(a){kt(this,n);var u={fn:pt,internal:{fn:Mt}},d=be(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,a,"axis",u));return d.d3=a.d3,d.internal=Fe,d}return n}(Un);pt=Qe.prototype,pt.init=function(){var n=this.owner,a=n.config,u=n.main;n.axes.x=u.append("g").attr("class",M.axis+" "+M.axisX).attr("clip-path",a.axis_x_inner?"":n.clipPathForXAxis).attr("transform",n.getTranslate("x")).style("visibility",a.axis_x_show?"visible":"hidden"),n.axes.x.append("text").attr("class",M.axisXLabel).attr("transform",a.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),n.axes.y=u.append("g").attr("class",M.axis+" "+M.axisY).attr("clip-path",a.axis_y_inner?"":n.clipPathForYAxis).attr("transform",n.getTranslate("y")).style("visibility",a.axis_y_show?"visible":"hidden"),n.axes.y.append("text").attr("class",M.axisYLabel).attr("transform",a.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),n.axes.y2=u.append("g").attr("class",M.axis+" "+M.axisY2).attr("transform",n.getTranslate("y2")).style("visibility",a.axis_y2_show?"visible":"hidden"),n.axes.y2.append("text").attr("class",M.axisY2Label).attr("transform",a.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},pt.getXAxis=function(n,a,u,d,_,v,y){var G=this.owner,C=G.config,R={isCategory:G.isCategorized(),withOuterTick:_,tickMultiline:C.axis_x_tick_multiline,tickMultilineMax:C.axis_x_tick_multiline?Number(C.axis_x_tick_multilineMax):0,tickWidth:C.axis_x_tick_width,tickTextRotate:y?0:C.axis_x_tick_rotate,withoutTransition:v},$=new this.internal(this,R).axis.scale(n).orient(a);return G.isTimeSeries()&&d&&typeof d!="function"&&(d=d.map(function(N){return G.parseDate(N)})),$.tickFormat(u).tickValues(d),G.isCategorized()&&($.tickCentered(C.axis_x_tick_centered),hn(C.axis_x_tick_culling)&&(C.axis_x_tick_culling=!1)),$},pt.updateXAxisTickValues=function(n,a){var u=this.owner,d=u.config,_;return(d.axis_x_tick_fit||d.axis_x_tick_count)&&(_=this.generateTickValues(u.mapTargetsToUniqueXs(n),d.axis_x_tick_count,u.isTimeSeries())),a?a.tickValues(_):(u.xAxis.tickValues(_),u.subXAxis.tickValues(_)),_},pt.getYAxis=function(n,a,u,d,_,v,y){var G=this.owner,C=G.config,R={withOuterTick:_,withoutTransition:v,tickTextRotate:y?0:C.axis_y_tick_rotate},$=new this.internal(this,R).axis.scale(n).orient(a).tickFormat(u);return G.isTimeSeriesY()?$.ticks(G.d3.time[C.axis_y_tick_time_value],C.axis_y_tick_time_interval):$.tickValues(d),$},pt.getId=function(n){var a=this.owner.config;return n in a.data_axes?a.data_axes[n]:"y"},pt.getXAxisTickFormat=function(){var n=this.owner,a=n.config,u=n.isTimeSeries()?n.defaultAxisTimeFormat:n.isCategorized()?n.categoryName:function(d){return d<0?d.toFixed(0):d};return a.axis_x_tick_format&&(Kt(a.axis_x_tick_format)?u=a.axis_x_tick_format:n.isTimeSeries()&&(u=function(_){return _?n.axisTimeFormat(a.axis_x_tick_format)(_):""})),Kt(u)?function(d){return u.call(n,d)}:u},pt.getTickValues=function(n,a){return n||(a?a.tickValues():void 0)},pt.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},pt.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},pt.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},pt.getLabelOptionByAxisId=function(n){var a=this.owner,u=a.config,d;return n==="y"?d=u.axis_y_label:n==="y2"?d=u.axis_y2_label:n==="x"&&(d=u.axis_x_label),d},pt.getLabelText=function(n){var a=this.getLabelOptionByAxisId(n);return Xt(a)?a:a?a.text:null},pt.setLabelText=function(n,a){var u=this.owner,d=u.config,_=this.getLabelOptionByAxisId(n);Xt(_)?n==="y"?d.axis_y_label=a:n==="y2"?d.axis_y2_label=a:n==="x"&&(d.axis_x_label=a):_&&(_.text=a)},pt.getLabelPosition=function(n,a){var u=this.getLabelOptionByAxisId(n),d=u&&(typeof u>"u"?"undefined":Ct(u))==="object"&&u.position?u.position:a;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},pt.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},pt.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},pt.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},pt.getLabelPositionById=function(n){return n==="y2"?this.getY2AxisLabelPosition():n==="y"?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},pt.textForXAxisLabel=function(){return this.getLabelText("x")},pt.textForYAxisLabel=function(){return this.getLabelText("y")},pt.textForY2AxisLabel=function(){return this.getLabelText("y2")},pt.xForAxisLabel=function(n,a){var u=this.owner;return n?a.isLeft?0:a.isCenter?u.width/2:u.width:a.isBottom?-u.height:a.isMiddle?-u.height/2:0},pt.dxForAxisLabel=function(n,a){return n?a.isLeft?"0.5em":a.isRight?"-0.5em":"0":a.isTop?"-0.5em":a.isBottom?"0.5em":"0"},pt.textAnchorForAxisLabel=function(n,a){return n?a.isLeft?"start":a.isCenter?"middle":"end":a.isBottom?"start":a.isMiddle?"middle":"end"},pt.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},pt.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},pt.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},pt.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},pt.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},pt.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},pt.dyForXAxisLabel=function(){var n=this.owner,a=n.config,u=this.getXAxisLabelPosition();return a.axis_rotated?u.isInner?"1.2em":-25-(n.config.axis_x_inner?0:this.getMaxTickWidth("x")):u.isInner?"-0.5em":a.axis_x_height?a.axis_x_height-10:"3em"},pt.dyForYAxisLabel=function(){var n=this.owner,a=this.getYAxisLabelPosition();return n.config.axis_rotated?a.isInner?"-0.5em":"3em":a.isInner?"1.2em":-10-(n.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},pt.dyForY2AxisLabel=function(){var n=this.owner,a=this.getY2AxisLabelPosition();return n.config.axis_rotated?a.isInner?"1.2em":"-2.2em":a.isInner?"-0.5em":15+(n.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},pt.textAnchorForXAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(!n.config.axis_rotated,this.getXAxisLabelPosition())},pt.textAnchorForYAxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getYAxisLabelPosition())},pt.textAnchorForY2AxisLabel=function(){var n=this.owner;return this.textAnchorForAxisLabel(n.config.axis_rotated,this.getY2AxisLabelPosition())},pt.getMaxTickWidth=function(n,a){var u=this.owner,d=u.config,_=0,v,y,G,C,R;return a&&u.currentMaxTickWidths[n]||(u.svg&&(v=u.filterTargetsToShow(u.data.targets),n==="y"?(y=u.y.copy().domain(u.getYDomain(v,"y")),G=this.getYAxis(y,u.yOrient,d.axis_y_tick_format,u.yAxisTickValues,!1,!0,!0)):n==="y2"?(y=u.y2.copy().domain(u.getYDomain(v,"y2")),G=this.getYAxis(y,u.y2Orient,d.axis_y2_tick_format,u.y2AxisTickValues,!1,!0,!0)):(y=u.x.copy().domain(u.getXDomain(v)),G=this.getXAxis(y,u.xOrient,u.xAxisTickFormat,u.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(v,G)),C=u.d3.select("body").append("div").classed("c3",!0),R=C.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),R.append("g").call(G).each(function(){u.d3.select(this).selectAll("text").each(function(){var $=this.getBoundingClientRect();_<$.width&&(_=$.width)}),C.remove()})),u.currentMaxTickWidths[n]=_<=0?u.currentMaxTickWidths[n]:_),u.currentMaxTickWidths[n]},pt.updateLabels=function(n){var a=this.owner,u=a.main.select("."+M.axisX+" ."+M.axisXLabel),d=a.main.select("."+M.axisY+" ."+M.axisYLabel),_=a.main.select("."+M.axisY2+" ."+M.axisY2Label);(n?u.transition():u).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(n?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(n?_.transition():_).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},pt.getPadding=function(n,a,u,d){var _=typeof n=="number"?n:n[a];return mt(_)?n.unit==="ratio"?n[a]*d:this.convertPixelsToAxisPadding(_,d):u},pt.convertPixelsToAxisPadding=function(n,a){var u=this.owner,d=u.config.axis_rotated?u.width:u.height;return a*(n/d)},pt.generateTickValues=function(n,a,u){var d=n,_,v,y,G,C,R,$;if(a){if(_=Kt(a)?a():a,_===1)d=[n[0]];else if(_===2)d=[n[0],n[n.length-1]];else if(_>2){for(G=_-2,v=n[0],y=n[n.length-1],C=(y-v)/(G+1),d=[v],R=0;R<G;R++)$=+v+C*(R+1),d.push(u?new Date($):$);d.push(y)}}return u||(d=d.sort(function(N,B){return N-B})),d},pt.generateTransitions=function(n){var a=this.owner,u=a.axes;return{axisX:n?u.x.transition().duration(n):u.x,axisY:n?u.y.transition().duration(n):u.y,axisY2:n?u.y2.transition().duration(n):u.y2,axisSubX:n?u.subx.transition().duration(n):u.subx}},pt.redraw=function(n,a){var u=this.owner;u.axes.x.style("opacity",a?0:1),u.axes.y.style("opacity",a?0:1),u.axes.y2.style("opacity",a?0:1),u.axes.subx.style("opacity",a?0:1),n.axisX.call(u.xAxis),n.axisY.call(u.yAxis),n.axisY2.call(u.y2Axis),n.axisSubX.call(u.subXAxis)};var Ve={version:"0.4.24"},ut,w;function Un(e,n,a){this.owner=e,Ve.chart.internal[n]=a}function Cn(e){var n=this.internal=new dn(this);n.loadConfig(e),n.beforeInit(e),n.init(),n.afterInit(e),function a(u,d,_){Object.keys(u).forEach(function(v){d[v]=u[v].bind(_),Object.keys(u[v]).length>0&&a(u[v],d[v],_)})}(ut,this,this)}function dn(e){var n=this;n.d3=window.d3?window.d3:typeof gl<"u"?pl():void 0,n.api=e,n.config=n.getDefaultConfig(),n.data={},n.cache={},n.axes={}}return Ve.generate=function(e){return new Cn(e)},Ve.chart={fn:Cn.prototype,internal:{fn:dn.prototype}},ut=Ve.chart.fn,w=Ve.chart.internal.fn,w.beforeInit=function(){},w.afterInit=function(){},w.init=function(){var e=this,n=e.config;if(e.initParams(),n.data_url)e.convertUrlToData(n.data_url,n.data_mimeType,n.data_headers,n.data_keys,e.initWithData);else if(n.data_json)e.initWithData(e.convertJsonToData(n.data_json,n.data_keys));else if(n.data_rows)e.initWithData(e.convertRowsToData(n.data_rows));else if(n.data_columns)e.initWithData(e.convertColumnsToData(n.data_columns));else throw Error("url or json or rows or columns is required.")},w.initParams=function(){var e=this,n=e.d3,a=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=a.data_xLocaltime?n.time.format:n.time.format.utc,e.axisTimeFormat=a.axis_x_localtime?n.time.format:n.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(u){return u.getMilliseconds()}],[":%S",function(u){return u.getSeconds()}],["%I:%M",function(u){return u.getMinutes()}],["%I %p",function(u){return u.getHours()}],["%-m/%-d",function(u){return u.getDay()&&u.getDate()!==1}],["%-m/%-d",function(u){return u.getDate()!==1}],["%-m/%-d",function(u){return u.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=a.axis_rotated?a.axis_x_inner?"right":"left":a.axis_x_inner?"top":"bottom",e.yOrient=a.axis_rotated?a.axis_y_inner?"top":"bottom":a.axis_y_inner?"right":"left",e.y2Orient=a.axis_rotated?a.axis_y2_inner?"bottom":"top":a.axis_y2_inner?"left":"right",e.subXOrient=a.axis_rotated?"left":"bottom",e.isLegendRight=a.legend_position==="right",e.isLegendInset=a.legend_position==="inset",e.isLegendTop=a.legend_inset_anchor==="top-left"||a.legend_inset_anchor==="top-right",e.isLegendLeft=a.legend_inset_anchor==="top-left"||a.legend_inset_anchor==="bottom-left",e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=a.axis_rotated&&!a.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=n.selectAll([])},w.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},w.initWithData=function(e){var n=this,a=n.d3,u=n.config,d,_,v=!0;n.axis=new Qe(n),n.initPie&&n.initPie(),n.initBrush&&n.initBrush(),n.initZoom&&n.initZoom(),u.bindto?typeof u.bindto.node=="function"?n.selectChart=u.bindto:n.selectChart=a.select(u.bindto):n.selectChart=a.selectAll([]),n.selectChart.empty()&&(n.selectChart=a.select(document.createElement("div")).style("opacity",0),n.observeInserted(n.selectChart),v=!1),n.selectChart.html("").classed("c3",!0),n.data.xs={},n.data.targets=n.convertDataToTargets(e),u.data_filter&&(n.data.targets=n.data.targets.filter(u.data_filter)),u.data_hide&&n.addHiddenTargetIds(u.data_hide===!0?n.mapToIds(n.data.targets):u.data_hide),u.legend_hide&&n.addHiddenLegendIds(u.legend_hide===!0?n.mapToIds(n.data.targets):u.legend_hide),n.updateSizes(),n.updateScales(),n.x.domain(a.extent(n.getXDomain(n.data.targets))),n.y.domain(n.getYDomain(n.data.targets,"y")),n.y2.domain(n.getYDomain(n.data.targets,"y2")),n.subX.domain(n.x.domain()),n.subY.domain(n.y.domain()),n.subY2.domain(n.y2.domain()),n.orgXDomain=n.x.domain(),n.brush&&n.brush.scale(n.subX),u.zoom_enabled&&n.zoom.scale(n.x),n.svg=n.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return u.onmouseover.call(n)}).on("mouseleave",function(){return u.onmouseout.call(n)}),n.config.svg_classname&&n.svg.attr("class",n.config.svg_classname),d=n.svg.append("defs"),n.clipChart=n.appendClip(d,n.clipId),n.clipXAxis=n.appendClip(d,n.clipIdForXAxis),n.clipYAxis=n.appendClip(d,n.clipIdForYAxis),n.clipGrid=n.appendClip(d,n.clipIdForGrid),n.clipSubchart=n.appendClip(d,n.clipIdForSubchart),n.updateSvgSize(),_=n.main=n.svg.append("g").attr("transform",n.getTranslate("main")),n.initSubchart&&n.initSubchart(),n.initTooltip&&n.initTooltip(),n.initLegend&&n.initLegend(),n.initTitle&&n.initTitle(),_.append("text").attr("class",M.text+" "+M.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),n.initRegion(),n.initGrid(),_.append("g").attr("clip-path",n.clipPath).attr("class",M.chart),u.grid_lines_front&&n.initGridLines(),n.initEventRect(),n.initChartElements(),_.insert("rect",u.zoom_privileged?null:"g."+M.regions).attr("class",M.zoomRect).attr("width",n.width).attr("height",n.height).style("opacity",0).on("dblclick.zoom",null),u.axis_x_extent&&n.brush.extent(n.getDefaultExtent()),n.axis.init(),n.updateTargets(n.data.targets),v&&(n.updateDimension(),n.config.oninit.call(n),n.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),n.bindResize(),n.api.element=n.selectChart.node()},w.smoothLines=function(e,n){var a=this;n==="grid"&&e.each(function(){var u=a.d3.select(this),d=u.attr("x1"),_=u.attr("x2"),v=u.attr("y1"),y=u.attr("y2");u.attr({x1:Math.ceil(d),x2:Math.ceil(_),y1:Math.ceil(v),y2:Math.ceil(y)})})},w.updateSizes=function(){var e=this,n=e.config,a=e.legend?e.getLegendHeight():0,u=e.legend?e.getLegendWidth():0,d=e.isLegendRight||e.isLegendInset?0:a,_=e.hasArcType(),v=n.axis_rotated||_?0:e.getHorizontalAxisHeight("x"),y=n.subchart_show&&!_?n.subchart_size_height+v:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=n.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:_?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+d+e.getCurrentPaddingBottom(),left:y+(_?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:_?0:e.getCurrentPaddingRight(),bottom:v+y+d+e.getCurrentPaddingBottom(),left:_?0:e.getCurrentPaddingLeft()},e.margin2=n.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+d,left:e.rotated_padding_left}:{top:e.currentHeight-y-d,right:NaN,bottom:v+d,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(a,u),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=n.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=n.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?u+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!n.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&_&&(e.margin3.left=e.arcWidth/2+e.radiusExpanded*1.1)},w.updateTargets=function(e){var n=this;n.updateTargetsForText(e),n.updateTargetsForBar(e),n.updateTargetsForLine(e),n.hasArcType()&&n.updateTargetsForArc&&n.updateTargetsForArc(e),n.updateTargetsForSubchart&&n.updateTargetsForSubchart(e),n.showTargets()},w.showTargets=function(){var e=this;e.svg.selectAll("."+M.target).filter(function(n){return e.isTargetToShow(n.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},w.redraw=function(e,n){var a=this,u=a.main,d=a.d3,_=a.config,v=a.getShapeIndices(a.isAreaType),y=a.getShapeIndices(a.isBarType),G=a.getShapeIndices(a.isLineType),C,R,$,N,B,Q,K,J,gt,yt,vt,xt,wt,bt=a.hasArcType(),it,st,Vt,_t,Lt,Tt,It,ie,Ut,Ht,Dt=a.filterTargetsToShow(a.data.targets),Nt,zt,ot,lt,Rt=a.xv.bind(a),Te,ke;if(e=e||{},C=at(e,"withY",!0),R=at(e,"withSubchart",!0),$=at(e,"withTransition",!0),Q=at(e,"withTransform",!1),K=at(e,"withUpdateXDomain",!1),J=at(e,"withUpdateOrgXDomain",!1),gt=at(e,"withTrimXDomain",!0),wt=at(e,"withUpdateXAxis",K),yt=at(e,"withLegend",!1),vt=at(e,"withEventRect",!0),xt=at(e,"withDimension",!0),N=at(e,"withTransitionForExit",$),B=at(e,"withTransitionForAxis",$),Tt=$?_.transition_duration:0,It=N?Tt:0,ie=B?Tt:0,n=n||a.axis.generateTransitions(ie),yt&&_.legend_show?a.updateLegend(a.mapToIds(a.data.targets),e,n):xt&&a.updateDimension(!0),a.isCategorized()&&Dt.length===0&&a.x.domain([0,a.axes.x.selectAll(".tick").size()]),Dt.length?(a.updateXDomain(Dt,K,J,gt),_.axis_x_tick_values||(Nt=a.axis.updateXAxisTickValues(Dt))):(a.xAxis.tickValues([]),a.subXAxis.tickValues([])),_.zoom_rescale&&!e.flow&&(lt=a.x.orgDomain()),a.y.domain(a.getYDomain(Dt,"y",lt)),a.y2.domain(a.getYDomain(Dt,"y2",lt)),!_.axis_y_tick_values&&_.axis_y_tick_count&&a.yAxis.tickValues(a.axis.generateTickValues(a.y.domain(),_.axis_y_tick_count)),!_.axis_y2_tick_values&&_.axis_y2_tick_count&&a.y2Axis.tickValues(a.axis.generateTickValues(a.y2.domain(),_.axis_y2_tick_count)),a.axis.redraw(n,bt),a.axis.updateLabels($),(K||wt)&&Dt.length)if(_.axis_x_tick_culling&&Nt){for(zt=1;zt<Nt.length;zt++)if(Nt.length/zt<_.axis_x_tick_culling_max){ot=zt;break}a.svg.selectAll("."+M.axisX+" .tick text").each(function(pe){var Bt=Nt.indexOf(pe);Bt>=0&&d.select(this).style("display",Bt%ot?"none":"block")})}else a.svg.selectAll("."+M.axisX+" .tick text").style("display","block");it=a.generateDrawArea?a.generateDrawArea(v,!1):void 0,st=a.generateDrawBar?a.generateDrawBar(y):void 0,Vt=a.generateDrawLine?a.generateDrawLine(G,!1):void 0,_t=a.generateXYForText(v,y,G,!0),Lt=a.generateXYForText(v,y,G,!1),C&&(a.subY.domain(a.getYDomain(Dt,"y")),a.subY2.domain(a.getYDomain(Dt,"y2"))),a.updateXgridFocus(),u.select("text."+M.text+"."+M.empty).attr("x",a.width/2).attr("y",a.height/2).text(_.data_empty_label_text).transition().style("opacity",Dt.length?0:1),a.updateGrid(Tt),a.updateRegion(Tt),a.updateBar(It),a.updateLine(It),a.updateArea(It),a.updateCircle(),a.hasDataLabel()&&a.updateText(It),a.redrawTitle&&a.redrawTitle(),a.redrawArc&&a.redrawArc(Tt,It,Q),a.redrawSubchart&&a.redrawSubchart(R,n,Tt,It,v,y,G),u.selectAll("."+M.selectedCircles).filter(a.isBarType.bind(a)).selectAll("circle").remove(),_.interaction_enabled&&!e.flow&&vt&&(a.redrawEventRect(),a.updateZoom&&a.updateZoom()),a.updateCircleY(),Te=(a.config.axis_rotated?a.circleY:a.circleX).bind(a),ke=(a.config.axis_rotated?a.circleX:a.circleY).bind(a),e.flow&&(Ht=a.generateFlow({targets:Dt,flow:e.flow,duration:e.flow.duration,drawBar:st,drawLine:Vt,drawArea:it,cx:Te,cy:ke,xv:Rt,xForText:_t,yForText:Lt})),(Tt||Ht)&&a.isTabVisible()?d.transition().duration(Tt).each(function(){var pe=[];[a.redrawBar(st,!0),a.redrawLine(Vt,!0),a.redrawArea(it,!0),a.redrawCircle(Te,ke,!0),a.redrawText(_t,Lt,e.flow,!0),a.redrawRegion(!0),a.redrawGrid(!0)].forEach(function(Bt){Bt.forEach(function(Ie){pe.push(Ie)})}),Ut=a.generateWait(),pe.forEach(function(Bt){Ut.add(Bt)})}).call(Ut,function(){Ht&&Ht(),_.onrendered&&_.onrendered.call(a)}):(a.redrawBar(st),a.redrawLine(Vt),a.redrawArea(it),a.redrawCircle(Te,ke),a.redrawText(_t,Lt,e.flow),a.redrawRegion(),a.redrawGrid(),_.onrendered&&_.onrendered.call(a)),a.mapToIds(a.data.targets).forEach(function(pe){a.withoutFadeIn[pe]=!0})},w.updateAndRedraw=function(e){var n=this,a=n.config,u;e=e||{},e.withTransition=at(e,"withTransition",!0),e.withTransform=at(e,"withTransform",!1),e.withLegend=at(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=at(e,"withTransitionForTransform",e.withTransition),n.updateSizes(),e.withLegend&&a.legend_show||(u=n.axis.generateTransitions(e.withTransitionForAxis?a.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,u)),n.redraw(e,u)},w.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},w.isTimeSeries=function(){return this.config.axis_x_type==="timeseries"},w.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},w.isCustomX=function(){var e=this,n=e.config;return!e.isTimeSeries()&&(n.data_x||qt(n.data_xs))},w.isTimeSeriesY=function(){return this.config.axis_y_type==="timeseries"},w.getTranslate=function(e){var n=this,a=n.config,u,d;return e==="main"?(u=Jt(n.margin.left),d=Jt(n.margin.top)):e==="context"?(u=Jt(n.margin2.left),d=Jt(n.margin2.top)):e==="legend"?(u=n.margin3.left,d=n.margin3.top):e==="x"?(u=0,d=a.axis_rotated?0:n.height):e==="y"?(u=0,d=a.axis_rotated?n.height:0):e==="y2"?(u=a.axis_rotated?0:n.width,d=a.axis_rotated?1:0):e==="subx"?(u=0,d=a.axis_rotated?0:n.height2):e==="arc"&&(u=n.arcWidth/2,d=n.arcHeight/2-(n.hasType("gauge")?6:0)),"translate("+u+","+d+")"},w.initialOpacity=function(e){return e.value!==null&&this.withoutFadeIn[e.id]?1:0},w.initialOpacityForCircle=function(e){return e.value!==null&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},w.opacityForCircle=function(e){var n=Kt(this.config.point_show)?this.config.point_show(e):this.config.point_show,a=n?1:0;return mt(e.value)?this.isScatterType(e)?.5:a:0},w.opacityForText=function(){return this.hasDataLabel()?1:0},w.xx=function(e){return e?this.x(e.x):null},w.xv=function(e){var n=this,a=e.value;return n.isTimeSeries()?a=n.parseDate(e.value):n.isCategorized()&&typeof e.value=="string"&&(a=n.config.axis_x_categories.indexOf(e.value)),Math.ceil(n.x(a))},w.yv=function(e){var n=this,a=e.axis&&e.axis==="y2"?n.y2:n.y;return Math.ceil(a(e.value))},w.subxx=function(e){return e?this.subX(e.x):null},w.transformMain=function(e,n){var a=this,u,d,_;n&&n.axisX?u=n.axisX:(u=a.main.select("."+M.axisX),e&&(u=u.transition())),n&&n.axisY?d=n.axisY:(d=a.main.select("."+M.axisY),e&&(d=d.transition())),n&&n.axisY2?_=n.axisY2:(_=a.main.select("."+M.axisY2),e&&(_=_.transition())),(e?a.main.transition():a.main).attr("transform",a.getTranslate("main")),u.attr("transform",a.getTranslate("x")),d.attr("transform",a.getTranslate("y")),_.attr("transform",a.getTranslate("y2")),a.main.select("."+M.chartArcs).attr("transform",a.getTranslate("arc"))},w.transformAll=function(e,n){var a=this;a.transformMain(e,n),a.config.subchart_show&&a.transformContext(e,n),a.legend&&a.transformLegend(e)},w.updateSvgSize=function(){var e=this,n=e.svg.select(".c3-brush .background");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight),e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height),e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",n.size()?n.attr("height"):0),e.svg.select("."+M.zoomRect).attr("width",e.width).attr("height",e.height),e.selectChart.style("max-height",e.currentHeight+"px")},w.updateDimension=function(e){var n=this;e||(n.config.axis_rotated?(n.axes.x.call(n.xAxis),n.axes.subx.call(n.subXAxis)):(n.axes.y.call(n.yAxis),n.axes.y2.call(n.y2Axis))),n.updateSizes(),n.updateScales(),n.updateSvgSize(),n.transformAll(!1)},w.observeInserted=function(e){var n=this,a;if(typeof MutationObserver>"u"){window.console.error("MutationObserver not defined.");return}a=new MutationObserver(function(u){u.forEach(function(d){d.type==="childList"&&d.previousSibling&&(a.disconnect(),n.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})}),a.observe(e.node(),{attributes:!0,childList:!0,characterData:!0})},w.bindResize=function(){var e=this,n=e.config;if(e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){n.onresize.call(e)}),n.resize_auto&&e.resizeFunction.add(function(){e.resizeTimeout!==void 0&&window.clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){delete e.resizeTimeout,e.api.flush()},100)}),e.resizeFunction.add(function(){n.onresized.call(e)}),e.resizeIfElementDisplayed=function(){e.api==null||!e.api.element.offsetParent||e.resizeFunction()},window.attachEvent)window.attachEvent("onresize",e.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",e.resizeIfElementDisplayed,!1);else{var a=window.onresize;a?(!a.add||!a.remove)&&(a=e.generateResize(),a.add(window.onresize)):a=e.generateResize(),a.add(e.resizeFunction),window.onresize=function(){e.api.element.offsetParent&&a()}}},w.generateResize=function(){var e=[];function n(){e.forEach(function(a){a()})}return n.add=function(a){e.push(a)},n.remove=function(a){for(var u=0;u<e.length;u++)if(e[u]===a){e.splice(u,1);break}},n},w.endall=function(e,n){var a=0;e.each(function(){++a}).each("end",function(){--a||n.apply(this,arguments)})},w.generateWait=function(){var e=[],n=function(u,d){var _=setInterval(function(){var v=0;e.forEach(function(y){if(y.empty()){v+=1;return}try{y.transition()}catch{v+=1}}),v===e.length&&(clearInterval(_),d&&d())},10)};return n.add=function(a){e.push(a)},n},w.parseDate=function(e){var n=this,a;return e instanceof Date?a=e:typeof e=="string"?a=n.dataTimeFormat(n.config.data_xFormat).parse(e):(typeof e>"u"?"undefined":Ct(e))==="object"?a=new Date(+e):typeof e=="number"&&!isNaN(e)&&(a=new Date(+e)),(!a||isNaN(+a))&&window.console.error("Failed to parse x '"+e+"' to Date object"),a},w.isTabVisible=function(){var e;return typeof document.hidden<"u"?e="hidden":typeof document.mozHidden<"u"?e="mozHidden":typeof document.msHidden<"u"?e="msHidden":typeof document.webkitHidden<"u"&&(e="webkitHidden"),!document[e]},w.isValue=mt,w.isFunction=Kt,w.isString=Xt,w.isUndefined=ne,w.isDefined=Gt,w.ceil10=le,w.asHalfPixel=Jt,w.diffDomain=Ae,w.isEmpty=hn,w.notEmpty=qt,w.notEmpty=qt,w.getOption=at,w.hasValue=Yn,w.sanitise=qe,w.getPathBox=fe,w.CLASS=M,Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=Array.prototype.slice.call(arguments,1),a=this,u=function(){},d=function(){return a.apply(this instanceof u?this:e,n.concat(Array.prototype.slice.call(arguments)))};return u.prototype=this.prototype,d.prototype=new u,d}),function(){"SVGPathSeg"in window||(window.SVGPathSeg=function(e,n,a){this.pathSegType=e,this.pathSegTypeAsLetter=n,this._owningPathSegList=a},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",e)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(e,n,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",e),this._x=n,this._y=a},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(e,n,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",e),this._x=n,this._y=a},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(e,n,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",e),this._x=n,this._y=a},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(e,n,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",e),this._x=n,this._y=a},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(e,n,a,u,d,_,v){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",e),this._x=n,this._y=a,this._x1=u,this._y1=d,this._x2=_,this._y2=v},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(n){this._x1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(n){this._y1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(n){this._x2=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(n){this._y2=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(e,n,a,u,d,_,v){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",e),this._x=n,this._y=a,this._x1=u,this._y1=d,this._x2=_,this._y2=v},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(n){this._x1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(n){this._y1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(n){this._x2=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(n){this._y2=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(e,n,a,u,d){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",e),this._x=n,this._y=a,this._x1=u,this._y1=d},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(n){this._x1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(n){this._y1=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(e,n,a,u,d){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",e),this._x=n,this._y=a,this._x1=u,this._y1=d},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(n){this._x1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(n){this._y1=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(e,n,a,u,d,_,v,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",e),this._x=n,this._y=a,this._r1=u,this._r2=d,this._angle=_,this._largeArcFlag=v,this._sweepFlag=y},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(n){this._r1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(n){this._r2=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(n){this._angle=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(n){this._largeArcFlag=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(n){this._sweepFlag=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(e,n,a,u,d,_,v,y){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",e),this._x=n,this._y=a,this._r1=u,this._r2=d,this._angle=_,this._largeArcFlag=v,this._sweepFlag=y},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(n){this._r1=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(n){this._r2=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(n){this._angle=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(n){this._largeArcFlag=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(n){this._sweepFlag=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",e),this._x=n},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",e),this._x=n},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",e),this._y=n},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",e),this._y=n},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(e,n,a,u,d){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",e),this._x=n,this._y=a,this._x2=u,this._y2=d},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(n){this._x2=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(n){this._y2=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(e,n,a,u,d){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",e),this._x=n,this._y=a,this._x2=u,this._y2=d},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(n){this._x2=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(n){this._y2=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,n,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",e),this._x=n,this._y=a},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(e,n,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",e),this._x=n,this._y=a},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(n){this._x=n,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(n){this._y=n,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,n){return new window.SVGPathSegMovetoAbs(void 0,e,n)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,n){return new window.SVGPathSegMovetoRel(void 0,e,n)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,n){return new window.SVGPathSegLinetoAbs(void 0,e,n)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,n){return new window.SVGPathSegLinetoRel(void 0,e,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,n,a,u,d,_){return new window.SVGPathSegCurvetoCubicAbs(void 0,e,n,a,u,d,_)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,n,a,u,d,_){return new window.SVGPathSegCurvetoCubicRel(void 0,e,n,a,u,d,_)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,n,a,u){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,e,n,a,u)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,n,a,u){return new window.SVGPathSegCurvetoQuadraticRel(void 0,e,n,a,u)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,n,a,u,d,_,v){return new window.SVGPathSegArcAbs(void 0,e,n,a,u,d,_,v)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(e,n,a,u,d,_,v){return new window.SVGPathSegArcRel(void 0,e,n,a,u,d,_,v)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new window.SVGPathSegLinetoHorizontalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new window.SVGPathSegLinetoHorizontalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new window.SVGPathSegLinetoVerticalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new window.SVGPathSegLinetoVerticalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,n,a,u){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,e,n,a,u)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,n,a,u){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,e,n,a,u)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,n){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,e,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,n){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,e,n)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(e){if(e===void 0||!isFinite(e))throw"Invalid arguments.";var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",this.getAttribute("d"));var a=n.pathSegList.numberOfItems-1;if(a<=0)return 0;do{if(n.pathSegList.removeItem(a),e>n.getTotalLength())break;a--}while(a>0);return a})),"SVGPathSegList"in window||(window.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(e){if(this._pathElement){var n=!1;e.forEach(function(a){a.attributeName=="d"&&(n=!0)}),n&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(e){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||e<0||e>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},window.SVGPathSegList.prototype.insertItemBefore=function(e,n){return this._checkPathSynchronizedToList(),n>this.numberOfItems&&(n=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(n,0,e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.replaceItem=function(e,n){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(n),this._list[n]=e,e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.removeItem=function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var n=this._list[e];return this._list.splice(e,1),this._writeListToPath(),n},window.SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList._pathSegArrayAsString=function(e){var n="",a=!0;return e.forEach(function(u){a?(a=!1,n+=u._asPathString()):n+=" "+u._asPathString()}),n},window.SVGPathSegList.prototype._parsePath=function(e){if(!e||e.length==0)return[];var n=this,a=function(){this.pathSegList=[]};a.prototype.appendSegment=function(y){this.pathSegList.push(y)};var u=function(G){this._string=G,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};u.prototype._isCurrentSpace=function(){var y=this._string[this._currentIndex];return y<=" "&&(y==" "||y==`
`||y=="	"||y=="\r"||y=="\f")},u.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},u.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string.charAt(this._currentIndex)!=","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)==","&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},u.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},u.prototype.peekSegmentType=function(){var y=this._string[this._currentIndex];return this._pathSegTypeFromChar(y)},u.prototype._pathSegTypeFromChar=function(y){switch(y){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},u.prototype._nextCommandHelper=function(y,G){return(y=="+"||y=="-"||y=="."||y>="0"&&y<="9")&&G!=window.SVGPathSeg.PATHSEG_CLOSEPATH?G==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:G==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:G:window.SVGPathSeg.PATHSEG_UNKNOWN},u.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var y=this.peekSegmentType();return y==window.SVGPathSeg.PATHSEG_MOVETO_ABS||y==window.SVGPathSeg.PATHSEG_MOVETO_REL},u.prototype._parseNumber=function(){var y=0,G=0,C=1,R=0,$=1,N=1,B=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,$=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&this._string.charAt(this._currentIndex)!=".")){for(var Q=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=Q)for(var K=this._currentIndex-1,J=1;K>=Q;)G+=J*(this._string.charAt(K--)-"0"),J*=10;if(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="."){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)C*=10,R+=(this._string.charAt(this._currentIndex)-"0")/C,this._currentIndex+=1}if(this._currentIndex!=B&&this._currentIndex+1<this._endIndex&&(this._string.charAt(this._currentIndex)=="e"||this._string.charAt(this._currentIndex)=="E")&&this._string.charAt(this._currentIndex+1)!="x"&&this._string.charAt(this._currentIndex+1)!="m"){if(this._currentIndex++,this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,N=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)y*=10,y+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var gt=G+R;if(gt*=$,y&&(gt*=Math.pow(10,N*y)),B!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),gt}},u.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var y=!1,G=this._string.charAt(this._currentIndex++);if(G=="0")y=!1;else if(G=="1")y=!0;else return;return this._skipOptionalSpacesOrDelimiter(),y}},u.prototype.parseSegment=function(){var y=this._string[this._currentIndex],G=this._pathSegTypeFromChar(y);if(G==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN||(G=this._nextCommandHelper(y,this._previousCommand),G==window.SVGPathSeg.PATHSEG_UNKNOWN))return null}else this._currentIndex++;switch(this._previousCommand=G,G){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(n);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var C={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(n,C.x,C.y,C.x1,C.y1,C.x2,C.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var C={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(n,C.x,C.y,C.x1,C.y1,C.x2,C.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var C={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(n,C.x,C.y,C.x2,C.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var C={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(n,C.x,C.y,C.x2,C.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var C={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(n,C.x,C.y,C.x1,C.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var C={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(n,C.x,C.y,C.x1,C.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:var C={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(n,C.x,C.y,C.x1,C.y1,C.arcAngle,C.arcLarge,C.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var C={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(n,C.x,C.y,C.x1,C.y1,C.arcAngle,C.arcLarge,C.arcSweep);default:throw"Unknown path seg type."}};var d=new a,_=new u(e);if(!_.initialCommandIsMoveTo())return[];for(;_.hasMoreData();){var v=_.parseSegment();if(!v)return[];d.appendSegment(v)}return d.pathSegList})}(),String.prototype.padEnd||(String.prototype.padEnd=function(n,a){return n=n>>0,a=String(typeof a<"u"?a:" "),this.length>n?String(this):(n=n-this.length,n>a.length&&(a+=a.repeat(n/a.length)),String(this)+a.slice(0,n))}),ut.axis=function(){},ut.axis.labels=function(e){var n=this.internal;arguments.length&&(Object.keys(e).forEach(function(a){n.axis.setLabelText(a,e[a])}),n.axis.updateLabels())},ut.axis.max=function(e){var n=this.internal,a=n.config;if(arguments.length)(typeof e>"u"?"undefined":Ct(e))==="object"?(mt(e.x)&&(a.axis_x_max=e.x),mt(e.y)&&(a.axis_y_max=e.y),mt(e.y2)&&(a.axis_y2_max=e.y2)):a.axis_y_max=a.axis_y2_max=e,n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:a.axis_x_max,y:a.axis_y_max,y2:a.axis_y2_max}},ut.axis.min=function(e){var n=this.internal,a=n.config;if(arguments.length)(typeof e>"u"?"undefined":Ct(e))==="object"?(mt(e.x)&&(a.axis_x_min=e.x),mt(e.y)&&(a.axis_y_min=e.y),mt(e.y2)&&(a.axis_y2_min=e.y2)):a.axis_y_min=a.axis_y2_min=e,n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:a.axis_x_min,y:a.axis_y_min,y2:a.axis_y2_min}},ut.axis.range=function(e){if(arguments.length)Gt(e.max)&&this.axis.max(e.max),Gt(e.min)&&this.axis.min(e.min);else return{max:this.axis.max(),min:this.axis.min()}},ut.category=function(e,n){var a=this.internal,u=a.config;return arguments.length>1&&(u.axis_x_categories[e]=n,a.redraw()),u.axis_x_categories[e]},ut.categories=function(e){var n=this.internal,a=n.config;return arguments.length&&(a.axis_x_categories=e,n.redraw()),a.axis_x_categories},ut.resize=function(e){var n=this.internal,a=n.config;a.size_width=e?e.width:null,a.size_height=e?e.height:null,this.flush()},ut.flush=function(){var e=this.internal;e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},ut.destroy=function(){var e=this.internal;if(window.clearInterval(e.intervalForObserveInserted),e.resizeTimeout!==void 0&&window.clearTimeout(e.resizeTimeout),window.detachEvent)window.detachEvent("onresize",e.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",e.resizeIfElementDisplayed);else{var n=window.onresize;n&&n.add&&n.remove&&n.remove(e.resizeFunction)}return e.resizeFunction.remove(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(a){e[a]=null}),null},ut.color=function(e){var n=this.internal;return n.color(e)},ut.data=function(e){var n=this.internal.data.targets;return typeof e>"u"?n:n.filter(function(a){return[].concat(e).indexOf(a.id)>=0})},ut.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},ut.data.values=function(e){var n,a=null;return e&&(n=this.data(e),a=n[0]?n[0].values.map(function(u){return u.value}):null),a},ut.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},ut.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},ut.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},ut.flow=function(e){var n=this.internal,a,u,d=[],_=n.getMaxDataCount(),v,y,G,C=0,R=0,$,N;if(e.json)u=n.convertJsonToData(e.json,e.keys);else if(e.rows)u=n.convertRowsToData(e.rows);else if(e.columns)u=n.convertColumnsToData(e.columns);else return;a=n.convertDataToTargets(u,!0),n.data.targets.forEach(function(B){var Q=!1,K,J;for(K=0;K<a.length;K++)if(B.id===a[K].id){for(Q=!0,B.values[B.values.length-1]&&(R=B.values[B.values.length-1].index+1),C=a[K].values.length,J=0;J<C;J++)a[K].values[J].index=R+J,n.isTimeSeries()||(a[K].values[J].x=R+J);B.values=B.values.concat(a[K].values),a.splice(K,1);break}Q||d.push(B.id)}),n.data.targets.forEach(function(B){var Q,K;for(Q=0;Q<d.length;Q++)if(B.id===d[Q])for(R=B.values[B.values.length-1].index+1,K=0;K<C;K++)B.values.push({id:B.id,index:R+K,x:n.isTimeSeries()?n.getOtherTargetX(R+K):R+K,value:null})}),n.data.targets.length&&a.forEach(function(B){var Q,K=[];for(Q=n.data.targets[0].values[0].index;Q<R;Q++)K.push({id:B.id,index:Q,x:n.isTimeSeries()?n.getOtherTargetX(Q):Q,value:null});B.values.forEach(function(J){J.index+=R,n.isTimeSeries()||(J.x+=R)}),B.values=K.concat(B.values)}),n.data.targets=n.data.targets.concat(a),n.getMaxDataCount(),y=n.data.targets[0],G=y.values[0],Gt(e.to)?(C=0,N=n.isTimeSeries()?n.parseDate(e.to):e.to,y.values.forEach(function(B){B.x<N&&C++})):Gt(e.length)&&(C=e.length),_?_===1&&n.isTimeSeries()&&($=(y.values[y.values.length-1].x-G.x)/2,v=[new Date(+G.x-$),new Date(+G.x+$)],n.updateXDomain(null,!0,!0,!1,v)):(n.isTimeSeries()?y.values.length>1?$=y.values[y.values.length-1].x-G.x:$=G.x-n.getXDomain(n.data.targets)[0]:$=1,v=[G.x-$,G.x],n.updateXDomain(null,!0,!0,!1,v)),n.updateTargets(n.data.targets),n.redraw({flow:{index:G.index,length:C,duration:mt(e.duration)?e.duration:n.config.transition_duration,done:e.done,orgDataCount:_},withLegend:!0,withTransition:_>1,withTrimXDomain:!1,withUpdateXAxis:!0})},w.generateFlow=function(e){var n=this,a=n.config,u=n.d3;return function(){var d=e.targets,_=e.flow,v=e.drawBar,y=e.drawLine,G=e.drawArea,C=e.cx,R=e.cy,$=e.xv,N=e.xForText,B=e.yForText,Q=e.duration,K,J=1,gt,yt=_.index,vt=_.length,xt=n.getValueOnIndex(n.data.targets[0].values,yt),wt=n.getValueOnIndex(n.data.targets[0].values,yt+vt),bt=n.x.domain(),it,st=_.duration||Q,Vt=_.done||function(){},_t=n.generateWait(),Lt=n.xgrid||u.selectAll([]),Tt=n.xgridLines||u.selectAll([]),It=n.mainRegion||u.selectAll([]),ie=n.mainText||u.selectAll([]),Ut=n.mainBar||u.selectAll([]),Ht=n.mainLine||u.selectAll([]),Dt=n.mainArea||u.selectAll([]),Nt=n.mainCircle||u.selectAll([]);n.flowing=!0,n.data.targets.forEach(function(zt){zt.values.splice(0,vt)}),it=n.updateXDomain(d,!0,!0),n.updateXGrid&&n.updateXGrid(!0),_.orgDataCount?_.orgDataCount===1||(xt&&xt.x)===(wt&&wt.x)||n.isTimeSeries()?K=n.x(bt[0])-n.x(it[0]):K=n.x(xt.x)-n.x(wt.x):n.data.targets[0].values.length!==1?K=n.x(bt[0])-n.x(it[0]):n.isTimeSeries()?(xt=n.getValueOnIndex(n.data.targets[0].values,0),wt=n.getValueOnIndex(n.data.targets[0].values,n.data.targets[0].values.length-1),K=n.x(xt.x)-n.x(wt.x)):K=Ae(it)/2,J=Ae(bt)/Ae(it),gt="translate("+K+",0) scale("+J+",1)",n.hideXGridFocus(),u.transition().ease("linear").duration(st).each(function(){_t.add(n.axes.x.transition().call(n.xAxis)),_t.add(Ut.transition().attr("transform",gt)),_t.add(Ht.transition().attr("transform",gt)),_t.add(Dt.transition().attr("transform",gt)),_t.add(Nt.transition().attr("transform",gt)),_t.add(ie.transition().attr("transform",gt)),_t.add(It.filter(n.isRegionOnX).transition().attr("transform",gt)),_t.add(Lt.transition().attr("transform",gt)),_t.add(Tt.transition().attr("transform",gt))}).call(_t,function(){var zt,ot=[],lt=[],Rt=[];if(vt){for(zt=0;zt<vt;zt++)ot.push("."+M.shape+"-"+(yt+zt)),lt.push("."+M.text+"-"+(yt+zt)),Rt.push("."+M.eventRect+"-"+(yt+zt));n.svg.selectAll("."+M.shapes).selectAll(ot).remove(),n.svg.selectAll("."+M.texts).selectAll(lt).remove(),n.svg.selectAll("."+M.eventRects).selectAll(Rt).remove(),n.svg.select("."+M.xgrid).remove()}Lt.attr("transform",null).attr(n.xgridAttr),Tt.attr("transform",null),Tt.select("line").attr("x1",a.axis_rotated?0:$).attr("x2",a.axis_rotated?n.width:$),Tt.select("text").attr("x",a.axis_rotated?n.width:0).attr("y",$),Ut.attr("transform",null).attr("d",v),Ht.attr("transform",null).attr("d",y),Dt.attr("transform",null).attr("d",G),Nt.attr("transform",null).attr("cx",C).attr("cy",R),ie.attr("transform",null).attr("x",N).attr("y",B).style("fill-opacity",n.opacityForText.bind(n)),It.attr("transform",null),It.select("rect").filter(n.isRegionOnX).attr("x",n.regionX.bind(n)).attr("width",n.regionWidth.bind(n)),a.interaction_enabled&&n.redrawEventRect(),Vt(),n.flowing=!1})}},ut.focus=function(e){var n=this.internal,a;e=n.mapToTargetIds(e),a=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),a.classed(M.focused,!0).classed(M.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(u){return e.indexOf(u)<0})},ut.defocus=function(e){var n=this.internal,a;e=n.mapToTargetIds(e),a=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),a.classed(M.focused,!1).classed(M.defocused,!0),n.hasArcType()&&n.unexpandArc(e),n.toggleFocusLegend(e,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(u){return e.indexOf(u)<0}),n.defocusedTargetIds=e},ut.revert=function(e){var n=this.internal,a;e=n.mapToTargetIds(e),a=n.svg.selectAll(n.selectorTargets(e)),a.classed(M.focused,!1).classed(M.defocused,!1),n.hasArcType()&&n.unexpandArc(e),n.config.legend_show&&(n.showLegend(e.filter(n.isLegendToShow.bind(n))),n.legend.selectAll(n.selectorLegends(e)).filter(function(){return n.d3.select(this).classed(M.legendItemFocused)}).classed(M.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]},ut.xgrids=function(e){var n=this.internal,a=n.config;return e&&(a.grid_x_lines=e,n.redrawWithoutRescale()),a.grid_x_lines},ut.xgrids.add=function(e){var n=this.internal;return this.xgrids(n.config.grid_x_lines.concat(e||[]))},ut.xgrids.remove=function(e){var n=this.internal;n.removeGridLines(e,!0)},ut.ygrids=function(e){var n=this.internal,a=n.config;return e&&(a.grid_y_lines=e,n.redrawWithoutRescale()),a.grid_y_lines},ut.ygrids.add=function(e){var n=this.internal;return this.ygrids(n.config.grid_y_lines.concat(e||[]))},ut.ygrids.remove=function(e){var n=this.internal;n.removeGridLines(e,!1)},ut.groups=function(e){var n=this.internal,a=n.config;return ne(e)||(a.data_groups=e,n.redraw()),a.data_groups},ut.legend=function(){},ut.legend.show=function(e){var n=this.internal;n.showLegend(n.mapToTargetIds(e)),n.updateAndRedraw({withLegend:!0})},ut.legend.hide=function(e){var n=this.internal;n.hideLegend(n.mapToTargetIds(e)),n.updateAndRedraw({withLegend:!0})},ut.load=function(e){var n=this.internal,a=n.config;if(e.xs&&n.addXs(e.xs),"names"in e&&ut.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(u){a.data_classes[u]=e.classes[u]}),"categories"in e&&n.isCategorized()&&(a.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(u){a.data_axes[u]=e.axes[u]}),"colors"in e&&Object.keys(e.colors).forEach(function(u){a.data_colors[u]=e.colors[u]}),"cacheIds"in e&&n.hasCaches(e.cacheIds)){n.load(n.getCaches(e.cacheIds),e.done);return}"unload"in e?n.unload(n.mapToTargetIds(typeof e.unload=="boolean"&&e.unload?null:e.unload),function(){n.loadFromArgs(e)}):n.loadFromArgs(e)},ut.unload=function(e){var n=this.internal;e=e||{},e instanceof Array?e={ids:e}:typeof e=="string"&&(e={ids:[e]}),n.unload(n.mapToTargetIds(e.ids),function(){n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},ut.regions=function(e){var n=this.internal,a=n.config;return e&&(a.regions=e,n.redrawWithoutRescale()),a.regions},ut.regions.add=function(e){var n=this.internal,a=n.config;return e&&(a.regions=a.regions.concat(e),n.redrawWithoutRescale()),a.regions},ut.regions.remove=function(e){var n=this.internal,a=n.config,u,d,_;return e=e||{},u=n.getOption(e,"duration",a.transition_duration),d=n.getOption(e,"classes",[M.region]),_=n.main.select("."+M.regions).selectAll(d.map(function(v){return"."+v})),(u?_.transition().duration(u):_).style("opacity",0).remove(),a.regions=a.regions.filter(function(v){var y=!1;return v.class?(v.class.split(" ").forEach(function(G){d.indexOf(G)>=0&&(y=!0)}),!y):!0}),a.regions},ut.selected=function(e){var n=this.internal,a=n.d3;return a.merge(n.main.selectAll("."+M.shapes+n.getTargetSelectorSuffix(e)).selectAll("."+M.shape).filter(function(){return a.select(this).classed(M.SELECTED)}).map(function(u){return u.map(function(d){var _=d.__data__;return _.data?_.data:_})}))},ut.select=function(e,n,a){var u=this.internal,d=u.d3,_=u.config;_.data_selection_enabled&&u.main.selectAll("."+M.shapes).selectAll("."+M.shape).each(function(v,y){var G=d.select(this),C=v.data?v.data.id:v.id,R=u.getToggle(this,v).bind(u),$=_.data_selection_grouped||!e||e.indexOf(C)>=0,N=!n||n.indexOf(y)>=0,B=G.classed(M.SELECTED);G.classed(M.line)||G.classed(M.area)||($&&N?_.data_selection_isselectable(v)&&!B&&R(!0,G.classed(M.SELECTED,!0),v,y):Gt(a)&&a&&B&&R(!1,G.classed(M.SELECTED,!1),v,y))})},ut.unselect=function(e,n){var a=this.internal,u=a.d3,d=a.config;d.data_selection_enabled&&a.main.selectAll("."+M.shapes).selectAll("."+M.shape).each(function(_,v){var y=u.select(this),G=_.data?_.data.id:_.id,C=a.getToggle(this,_).bind(a),R=d.data_selection_grouped||!e||e.indexOf(G)>=0,$=!n||n.indexOf(v)>=0,N=y.classed(M.SELECTED);y.classed(M.line)||y.classed(M.area)||R&&$&&d.data_selection_isselectable(_)&&N&&C(!1,y.classed(M.SELECTED,!1),_,v)})},ut.show=function(e,n){var a=this.internal,u;e=a.mapToTargetIds(e),n=n||{},a.removeHiddenTargetIds(e),u=a.svg.selectAll(a.selectorTargets(e)),u.transition().style("opacity",1,"important").call(a.endall,function(){u.style("opacity",null).style("opacity",1)}),n.withLegend&&a.showLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},ut.hide=function(e,n){var a=this.internal,u;e=a.mapToTargetIds(e),n=n||{},a.addHiddenTargetIds(e),u=a.svg.selectAll(a.selectorTargets(e)),u.transition().style("opacity",0,"important").call(a.endall,function(){u.style("opacity",null).style("opacity",0)}),n.withLegend&&a.hideLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},ut.toggle=function(e,n){var a=this,u=this.internal;u.mapToTargetIds(e).forEach(function(d){u.isTargetToShow(d)?a.hide(d,n):a.show(d,n)})},ut.tooltip=function(){},ut.tooltip.show=function(e){var n=this.internal,a,u;e.mouse&&(u=e.mouse),e.data?n.isMultipleX()?(u=[n.x(e.data.x),n.getYScale(e.data.id)(e.data.value)],a=null):a=mt(e.data.index)?e.data.index:n.getIndexByX(e.data.x):typeof e.x<"u"?a=n.getIndexByX(e.x):typeof e.index<"u"&&(a=e.index),n.dispatchEvent("mouseover",a,u),n.dispatchEvent("mousemove",a,u),n.config.tooltip_onshow.call(n,e.data)},ut.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},ut.transform=function(e,n){var a=this.internal,u=["pie","donut"].indexOf(e)>=0?{withTransform:!0}:null;a.transformTo(n,e,u)},w.transformTo=function(e,n,a){var u=this,d=!u.hasArcType(),_=a||{withTransitionForAxis:d};_.withTransitionForTransform=!1,u.transiting=!1,u.setTargetType(e,n),u.updateTargets(u.data.targets),u.updateAndRedraw(_)},ut.x=function(e){var n=this.internal;return arguments.length&&(n.updateTargetX(n.data.targets,e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),n.data.xs},ut.xs=function(e){var n=this.internal;return arguments.length&&(n.updateTargetXs(n.data.targets,e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),n.data.xs},ut.zoom=function(e){var n=this.internal;return e&&(n.isTimeSeries()&&(e=e.map(function(a){return n.parseDate(a)})),n.brush.extent(e),n.redraw({withUpdateXDomain:!0,withY:n.config.zoom_rescale}),n.config.zoom_onzoom.call(this,n.x.orgDomain())),n.brush.extent()},ut.zoom.enable=function(e){var n=this.internal;n.config.zoom_enabled=e,n.updateAndRedraw()},ut.unzoom=function(){var e=this.internal;e.brush.clear().update(),e.redraw({withUpdateXDomain:!0})},ut.zoom.max=function(e){var n=this.internal,a=n.config,u=n.d3;if(e===0||e)a.zoom_x_max=u.max([n.orgXDomain[1],e]);else return a.zoom_x_max},ut.zoom.min=function(e){var n=this.internal,a=n.config,u=n.d3;if(e===0||e)a.zoom_x_min=u.min([n.orgXDomain[0],e]);else return a.zoom_x_min},ut.zoom.range=function(e){if(arguments.length)Gt(e.max)&&this.domain.max(e.max),Gt(e.min)&&this.domain.min(e.min);else return{max:this.domain.max(),min:this.domain.min()}},w.initPie=function(){var e=this,n=e.d3;e.pie=n.layout.pie().value(function(a){return a.values.reduce(function(u,d){return u+d.value},0)}),e.pie.sort(e.getOrderFunction()||null)},w.updateRadius=function(){var e=this,n=e.config,a=n.gauge_width||n.donut_width,u=e.filterTargetsToShow(e.data.targets).length*e.config.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(e.hasType("gauge")?.85:1),e.radius=e.radiusExpanded*.95,e.innerRadiusRatio=a?(e.radius-a)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0,e.gaugeArcWidth=a||(u<=e.radius-e.innerRadius?e.radius-e.innerRadius:u<=e.radius?u:e.radius)},w.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(.98)},w.updateAngle=function(e){var n=this,a=n.config,u=!1,d=0,_,v,y,G;return a?(n.pie(n.filterTargetsToShow(n.data.targets)).forEach(function(C){!u&&C.data.id===e.data.id&&(u=!0,e=C,e.index=d),d++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),n.isGaugeType(e.data)&&(_=a.gauge_min,v=a.gauge_max,y=Math.PI*(a.gauge_fullCircle?2:1)/(v-_),G=e.value<_?0:e.value<v?e.value-_:v-_,e.startAngle=a.gauge_startingAngle,e.endAngle=e.startAngle+y*G),u?e:null):null},w.getSvgArc=function(){var e=this,n=e.hasType("gauge"),a=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,u=e.d3.svg.arc().outerRadius(function(_){return n?e.radius-a*_.index:e.radius}).innerRadius(function(_){return n?e.radius-a*(_.index+1):e.innerRadius}),d=function(v,y){var G;return y?u(v):(G=e.updateAngle(v),G?u(G):"M 0 0")};return d.centroid=u.centroid,d},w.getSvgArcExpanded=function(e){e=e||1;var n=this,a=n.hasType("gauge"),u=n.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,d=Math.min(n.radiusExpanded*e-n.radius,u*.8-(1-e)*100),_=n.d3.svg.arc().outerRadius(function(v){return a?n.radius-u*v.index+d:n.radiusExpanded*e}).innerRadius(function(v){return a?n.radius-u*(v.index+1):n.innerRadius});return function(v){var y=n.updateAngle(v);return y?_(y):"M 0 0"}},w.getArc=function(e,n,a){return a||this.isArcType(e.data)?this.svgArc(e,n):"M 0 0"},w.transformForArcLabel=function(e){var n=this,a=n.config,u=n.updateAngle(e),d,_,v,y,G,C="",R=n.hasType("gauge");if(u&&!R)d=this.svgArc.centroid(u),_=isNaN(d[0])?0:d[0],v=isNaN(d[1])?0:d[1],y=Math.sqrt(_*_+v*v),n.hasType("donut")&&a.donut_label_ratio?G=Kt(a.donut_label_ratio)?a.donut_label_ratio(e,n.radius,y):a.donut_label_ratio:n.hasType("pie")&&a.pie_label_ratio?G=Kt(a.pie_label_ratio)?a.pie_label_ratio(e,n.radius,y):a.pie_label_ratio:G=n.radius&&y?(36/n.radius>.375?1.175-36/n.radius:.8)*n.radius/y:0,C="translate("+_*G+","+v*G+")";else if(u&&R&&n.filterTargetsToShow(n.data.targets).length>1){var $=Math.sin(u.endAngle-Math.PI/2);_=Math.cos(u.endAngle-Math.PI/2)*(n.radiusExpanded+25),v=$*(n.radiusExpanded+15-Math.abs($*10))+3,C="translate("+_+","+v+")"}return C},w.getArcRatio=function(e){var n=this,a=n.config,u=Math.PI*(n.hasType("gauge")&&!a.gauge_fullCircle?1:2);return e?(e.endAngle-e.startAngle)/u:null},w.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})},w.textForArcLabel=function(e){var n=this,a,u,d,_,v;return!n.shouldShowArcLabel()||(a=n.updateAngle(e),u=a?a.value:null,d=n.getArcRatio(a),_=e.data.id,!n.hasType("gauge")&&!n.meetsArcLabelThreshold(d))?"":(v=n.getArcLabelFormat(),v?v(u,d,_):n.defaultArcValueFormat(u,d))},w.textForGaugeMinMax=function(e,n){var a=this,u=a.getGaugeLabelExtents();return u?u(e,n):e},w.expandArc=function(e){var n=this,a;if(n.transiting){a=window.setInterval(function(){n.transiting||(window.clearInterval(a),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(e))},10);return}e=n.mapToTargetIds(e),n.svg.selectAll(n.selectorTargets(e,"."+M.chartArc)).each(function(u){n.shouldExpand(u.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(u.data.id)).attr("d",n.svgArcExpanded).transition().duration(n.expandDuration(u.data.id)*2).attr("d",n.svgArcExpandedSub).each(function(d){n.isDonutType(d.data)})})},w.unexpandArc=function(e){var n=this;n.transiting||(e=n.mapToTargetIds(e),n.svg.selectAll(n.selectorTargets(e,"."+M.chartArc)).selectAll("path").transition().duration(function(a){return n.expandDuration(a.data.id)}).attr("d",n.svgArc),n.svg.selectAll("."+M.arc))},w.expandDuration=function(e){var n=this,a=n.config;return n.isDonutType(e)?a.donut_expand_duration:n.isGaugeType(e)?a.gauge_expand_duration:n.isPieType(e)?a.pie_expand_duration:50},w.shouldExpand=function(e){var n=this,a=n.config;return n.isDonutType(e)&&a.donut_expand||n.isGaugeType(e)&&a.gauge_expand||n.isPieType(e)&&a.pie_expand},w.shouldShowArcLabel=function(){var e=this,n=e.config,a=!0;return e.hasType("donut")?a=n.donut_label_show:e.hasType("pie")&&(a=n.pie_label_show),a},w.meetsArcLabelThreshold=function(e){var n=this,a=n.config,u=n.hasType("donut")?a.donut_label_threshold:a.pie_label_threshold;return e>=u},w.getArcLabelFormat=function(){var e=this,n=e.config,a=n.pie_label_format;return e.hasType("gauge")?a=n.gauge_label_format:e.hasType("donut")&&(a=n.donut_label_format),a},w.getGaugeLabelExtents=function(){var e=this,n=e.config;return n.gauge_label_extents},w.getArcTitle=function(){var e=this;return e.hasType("donut")?e.config.donut_title:""},w.updateTargetsForArc=function(e){var n=this,a=n.main,u,d,_=n.classChartArc.bind(n),v=n.classArcs.bind(n),y=n.classFocus.bind(n);u=a.select("."+M.chartArcs).selectAll("."+M.chartArc).data(n.pie(e)).attr("class",function(G){return _(G)+y(G.data)}),d=u.enter().append("g").attr("class",_),d.append("g").attr("class",v),d.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},w.initArc=function(){var e=this;e.arcs=e.main.select("."+M.chart).append("g").attr("class",M.chartArcs).attr("transform",e.getTranslate("arc")),e.arcs.append("text").attr("class",M.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())},w.redrawArc=function(e,n,a){var u=this,d=u.d3,_=u.config,v=u.main,y,G,C,R=u.hasType("gauge");if(y=v.selectAll("."+M.arcs).selectAll("."+M.arc).data(u.arcData.bind(u)),y.enter().append("path").attr("class",u.classArc.bind(u)).style("fill",function(N){return u.color(N.data)}).style("cursor",function(N){return _.interaction_enabled&&_.data_selection_isselectable(N)?"pointer":null}).each(function(N){u.isGaugeType(N.data)&&(N.startAngle=N.endAngle=_.gauge_startingAngle),this._current=N}),R&&(C=v.selectAll("."+M.arcs).selectAll("."+M.arcLabelLine).data(u.arcData.bind(u)),C.enter().append("rect").attr("class",function(N){return M.arcLabelLine+" "+M.target+" "+M.target+"-"+N.data.id}),u.filterTargetsToShow(u.data.targets).length===1?C.style("display","none"):C.style("fill",function(N){return _.color_pattern.length>0?u.levelColor(N.data.values[0].value):u.color(N.data)}).style("display",_.gauge_labelLine_show?"":"none").each(function(N){var B=0,Q=2,K=0,J=0,gt="";if(u.hiddenTargetIds.indexOf(N.data.id)<0){var yt=u.updateAngle(N),vt=u.gaugeArcWidth/u.filterTargetsToShow(u.data.targets).length*(yt.index+1),xt=yt.endAngle-Math.PI/2,wt=u.radius-vt,bt=xt-(wt===0?0:1/wt);B=u.radiusExpanded-u.radius+vt,K=Math.cos(bt)*wt,J=Math.sin(bt)*wt,gt="rotate("+xt*180/Math.PI+", "+K+", "+J+")"}d.select(this).attr({x:K,y:J,width:B,height:Q,transform:gt}).style("stroke-dasharray","0, "+(B+Q)+", 0")})),y.attr("transform",function(N){return!u.isGaugeType(N.data)&&a?"scale(0)":""}).on("mouseover",_.interaction_enabled?function(N){var B,Q;u.transiting||(B=u.updateAngle(N),B&&(Q=u.convertToArcData(B),u.expandArc(B.data.id),u.api.focus(B.data.id),u.toggleFocusLegend(B.data.id,!0),u.config.data_onmouseover(Q,this)))}:null).on("mousemove",_.interaction_enabled?function(N){var B=u.updateAngle(N),Q,K;B&&(Q=u.convertToArcData(B),K=[Q],u.showTooltip(K,this))}:null).on("mouseout",_.interaction_enabled?function(N){var B,Q;u.transiting||(B=u.updateAngle(N),B&&(Q=u.convertToArcData(B),u.unexpandArc(B.data.id),u.api.revert(),u.revertLegend(),u.hideTooltip(),u.config.data_onmouseout(Q,this)))}:null).on("click",_.interaction_enabled?function(N,B){var Q=u.updateAngle(N),K;Q&&(K=u.convertToArcData(Q),u.toggleShape&&u.toggleShape(this,K,B),u.config.data_onclick.call(u.api,K,this))}:null).each(function(){u.transiting=!0}).transition().duration(e).attrTween("d",function(N){var B=u.updateAngle(N),Q;return B?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),Q=d.interpolate(this._current,B),this._current=Q(0),function(K){var J=Q(K);return J.data=N.data,u.getArc(J,!0)}):function(){return"M 0 0"}}).attr("transform",a?"scale(1)":"").style("fill",function(N){return u.levelColor?u.levelColor(N.data.values[0].value):u.color(N.data.id)}).call(u.endall,function(){u.transiting=!1}),y.exit().transition().duration(n).style("opacity",0).remove(),v.selectAll("."+M.chartArc).select("text").style("opacity",0).attr("class",function(N){return u.isGaugeType(N.data)?M.gaugeValue:""}).text(u.textForArcLabel.bind(u)).attr("transform",u.transformForArcLabel.bind(u)).style("font-size",function(N){return u.isGaugeType(N.data)&&u.filterTargetsToShow(u.data.targets).length===1?Math.round(u.radius/5)+"px":""}).transition().duration(e).style("opacity",function(N){return u.isTargetToShow(N.data.id)&&u.isArcType(N.data)?1:0}),v.select("."+M.chartArcsTitle).style("opacity",u.hasType("donut")||R?1:0),R){var $=0;G=u.arcs.select("g."+M.chartArcsBackground).selectAll("path."+M.chartArcsBackground).data(u.data.targets),G.enter().append("path"),G.attr("class",function(N,B){return M.chartArcsBackground+" "+M.chartArcsBackground+"-"+B}).attr("d",function(N){if(u.hiddenTargetIds.indexOf(N.id)>=0)return"M 0 0";var B={data:[{value:_.gauge_max}],startAngle:_.gauge_startingAngle,endAngle:-1*_.gauge_startingAngle*(_.gauge_fullCircle?Math.PI:1),index:$++};return u.getArc(B,!0,!0)}),G.exit().remove(),u.arcs.select("."+M.chartArcsGaugeUnit).attr("dy",".75em").text(_.gauge_label_show?_.gauge_units:""),u.arcs.select("."+M.chartArcsGaugeMin).attr("dx",-1*(u.innerRadius+(u.radius-u.innerRadius)/(_.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(_.gauge_label_show?u.textForGaugeMinMax(_.gauge_min,!1):""),u.arcs.select("."+M.chartArcsGaugeMax).attr("dx",u.innerRadius+(u.radius-u.innerRadius)/(_.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(_.gauge_label_show?u.textForGaugeMinMax(_.gauge_max,!0):"")}},w.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("g").attr("class",M.chartArcsBackground),e.append("text").attr("class",M.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",M.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",M.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},w.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},w.hasCaches=function(e){for(var n=0;n<e.length;n++)if(!(e[n]in this.cache))return!1;return!0},w.addCache=function(e,n){this.cache[e]=this.cloneTarget(n)},w.getCaches=function(e){var n=[],a;for(a=0;a<e.length;a++)e[a]in this.cache&&n.push(this.cloneTarget(this.cache[e[a]]));return n},w.categoryName=function(e){var n=this.config;return e<n.axis_x_categories.length?n.axis_x_categories[e]:e},w.generateClass=function(e,n){return" "+e+" "+e+this.getTargetSelectorSuffix(n)},w.classText=function(e){return this.generateClass(M.text,e.index)},w.classTexts=function(e){return this.generateClass(M.texts,e.id)},w.classShape=function(e){return this.generateClass(M.shape,e.index)},w.classShapes=function(e){return this.generateClass(M.shapes,e.id)},w.classLine=function(e){return this.classShape(e)+this.generateClass(M.line,e.id)},w.classLines=function(e){return this.classShapes(e)+this.generateClass(M.lines,e.id)},w.classCircle=function(e){return this.classShape(e)+this.generateClass(M.circle,e.index)},w.classCircles=function(e){return this.classShapes(e)+this.generateClass(M.circles,e.id)},w.classBar=function(e){return this.classShape(e)+this.generateClass(M.bar,e.index)},w.classBars=function(e){return this.classShapes(e)+this.generateClass(M.bars,e.id)},w.classArc=function(e){return this.classShape(e.data)+this.generateClass(M.arc,e.data.id)},w.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(M.arcs,e.data.id)},w.classArea=function(e){return this.classShape(e)+this.generateClass(M.area,e.id)},w.classAreas=function(e){return this.classShapes(e)+this.generateClass(M.areas,e.id)},w.classRegion=function(e,n){return this.generateClass(M.region,n)+" "+("class"in e?e.class:"")},w.classEvent=function(e){return this.generateClass(M.eventRect,e.index)},w.classTarget=function(e){var n=this,a=n.config.data_classes[e],u="";return a&&(u=" "+M.target+"-"+a),n.generateClass(M.target,e)+u},w.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},w.classFocused=function(e){return" "+(this.focusedTargetIds.indexOf(e.id)>=0?M.focused:"")},w.classDefocused=function(e){return" "+(this.defocusedTargetIds.indexOf(e.id)>=0?M.defocused:"")},w.classChartText=function(e){return M.chartText+this.classTarget(e.id)},w.classChartLine=function(e){return M.chartLine+this.classTarget(e.id)},w.classChartBar=function(e){return M.chartBar+this.classTarget(e.id)},w.classChartArc=function(e){return M.chartArc+this.classTarget(e.data.id)},w.getTargetSelectorSuffix=function(e){return e||e===0?("-"+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},w.selectorTarget=function(e,n){return(n||"")+"."+M.target+this.getTargetSelectorSuffix(e)},w.selectorTargets=function(e,n){var a=this;return e=e||[],e.length?e.map(function(u){return a.selectorTarget(u,n)}):null},w.selectorLegend=function(e){return"."+M.legendItem+this.getTargetSelectorSuffix(e)},w.selectorLegends=function(e){var n=this;return e&&e.length?e.map(function(a){return n.selectorLegend(a)}):null},w.getClipPath=function(e){var n=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(n?"":document.URL.split("#")[0])+"#"+e+")"},w.appendClip=function(e,n){return e.append("clipPath").attr("id",n).append("rect")},w.getAxisClipX=function(e){var n=Math.max(30,this.margin.left);return e?-(1+n):-(n-1)},w.getAxisClipY=function(e){return e?-20:-this.margin.top},w.getXAxisClipX=function(){var e=this;return e.getAxisClipX(!e.config.axis_rotated)},w.getXAxisClipY=function(){var e=this;return e.getAxisClipY(!e.config.axis_rotated)},w.getYAxisClipX=function(){var e=this;return e.config.axis_y_inner?-1:e.getAxisClipX(e.config.axis_rotated)},w.getYAxisClipY=function(){var e=this;return e.getAxisClipY(e.config.axis_rotated)},w.getAxisClipWidth=function(e){var n=this,a=Math.max(30,n.margin.left),u=Math.max(30,n.margin.right);return e?n.width+2+a+u:n.margin.left+20},w.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},w.getXAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(!e.config.axis_rotated)},w.getXAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(!e.config.axis_rotated)},w.getYAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(e.config.axis_rotated)+(e.config.axis_y_inner?20:0)},w.getYAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(e.config.axis_rotated)},w.generateColor=function(){var e=this,n=e.config,a=e.d3,u=n.data_colors,d=qt(n.color_pattern)?n.color_pattern:a.scale.category10().range(),_=n.data_color,v=[];return function(y){var G=y.id||y.data&&y.data.id||y,C;return u[G]instanceof Function?C=u[G](y):u[G]?C=u[G]:(v.indexOf(G)<0&&v.push(G),C=d[v.indexOf(G)%d.length],u[G]=C),_ instanceof Function?_(C,y):C}},w.generateLevelColor=function(){var e=this,n=e.config,a=n.color_pattern,u=n.color_threshold,d=u.unit==="value",_=u.values&&u.values.length?u.values:[],v=u.max||100;return qt(n.color_threshold)?function(y){var G,C,R=a[a.length-1];for(G=0;G<_.length;G++)if(C=d?y:y*100/v,C<_[G]){R=a[G];break}return R}:null},w.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,u,d,_){return this.getTooltipContent?this.getTooltipContent(a,u,d,_):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(n){e[n]=this.additionalConfig[n]},this),e},w.additionalConfig={},w.loadConfig=function(e){var n=this.config,a,u,d;function _(){var v=u.shift();return v&&a&&(typeof a>"u"?"undefined":Ct(a))==="object"&&v in a?(a=a[v],_()):v?void 0:a}Object.keys(n).forEach(function(v){a=e,u=v.split("_"),d=_(),Gt(d)&&(n[v]=d)})},w.convertUrlToData=function(e,n,a,u,d){var _=this,v=n||"csv",y=_.d3.xhr(e);a&&Object.keys(a).forEach(function(G){y.header(G,a[G])}),y.get(function(G,C){var R,$=C.response||C.responseText;if(!C)throw new Error(G.responseURL+" "+G.status+" ("+G.statusText+")");v==="json"?R=_.convertJsonToData(JSON.parse($),u):v==="tsv"?R=_.convertTsvToData($):R=_.convertCsvToData($),d.call(_,R)})},w.convertXsvToData=function(e,n){var a=n.parseRows(e),u;return a.length===1?(u=[{}],a[0].forEach(function(d){u[0][d]=null})):u=n.parse(e),u},w.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)},w.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)},w.convertJsonToData=function(e,n){var a=this,u=[],d,_;return n?(n.x?(d=n.value.concat(n.x),a.config.data_x=n.x):d=n.value,u.push(d),e.forEach(function(v){var y=[];d.forEach(function(G){var C=a.findValueInJson(v,G);ne(C)&&(C=null),y.push(C)}),u.push(y)}),_=a.convertRowsToData(u)):(Object.keys(e).forEach(function(v){u.push([v].concat(e[v]))}),_=a.convertColumnsToData(u)),_},w.findValueInJson=function(e,n){n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,"");for(var a=n.split("."),u=0;u<a.length;++u){var d=a[u];if(d in e)e=e[d];else return}return e},w.convertRowsToData=function(e){for(var n=[],a=e[0],u=1;u<e.length;u++){for(var d={},_=0;_<e[u].length;_++){if(ne(e[u][_]))throw new Error("Source data is missing a component at ("+u+","+_+")!");d[a[_]]=e[u][_]}n.push(d)}return n},w.convertColumnsToData=function(e){for(var n=[],a=0;a<e.length;a++)for(var u=e[a][0],d=1;d<e[a].length;d++){if(ne(n[d-1])&&(n[d-1]={}),ne(e[a][d]))throw new Error("Source data is missing a component at ("+a+","+d+")!");n[d-1][u]=e[a][d]}return n},w.convertDataToTargets=function(e,n){var a=this,u=a.config,d=a.d3.keys(e[0]).filter(a.isNotX,a),_=a.d3.keys(e[0]).filter(a.isX,a),v;return d.forEach(function(y){var G=a.getXKey(y);a.isCustomX()||a.isTimeSeries()?_.indexOf(G)>=0?a.data.xs[y]=(n&&a.data.xs[y]?a.data.xs[y]:[]).concat(e.map(function(C){return C[G]}).filter(mt).map(function(C,R){return a.generateTargetX(C,y,R)})):u.data_x?a.data.xs[y]=a.getOtherTargetXs():qt(u.data_xs)&&(a.data.xs[y]=a.getXValuesOfXKey(G,a.data.targets)):a.data.xs[y]=e.map(function(C,R){return R})}),d.forEach(function(y){if(!a.data.xs[y])throw new Error('x is not defined for id = "'+y+'".')}),v=d.map(function(y,G){var C=u.data_idConverter(y);return{id:C,id_org:y,values:e.map(function(R,$){var N=a.getXKey(y),B=R[N],Q=R[y]!==null&&!isNaN(R[y])?+R[y]:null,K;return a.isCustomX()&&a.isCategorized()&&!ne(B)?(G===0&&$===0&&(u.axis_x_categories=[]),K=u.axis_x_categories.indexOf(B),K===-1&&(K=u.axis_x_categories.length,u.axis_x_categories.push(B))):K=a.generateTargetX(B,y,$),(ne(R[y])||a.data.xs[y].length<=$)&&(K=void 0),{x:K,value:Q,id:C}}).filter(function(R){return Gt(R.x)})}}),v.forEach(function(y){var G;u.data_xSort&&(y.values=y.values.sort(function(C,R){var $=C.x||C.x===0?C.x:1/0,N=R.x||R.x===0?R.x:1/0;return $-N})),G=0,y.values.forEach(function(C){C.index=G++}),a.data.xs[y.id].sort(function(C,R){return C-R})}),a.hasNegativeValue=a.hasNegativeValueInTargets(v),a.hasPositiveValue=a.hasPositiveValueInTargets(v),u.data_type&&a.setTargetType(a.mapToIds(v).filter(function(y){return!(y in u.data_types)}),u.data_type),v.forEach(function(y){a.addCache(y.id_org,y)}),v},w.isX=function(e){var n=this,a=n.config;return a.data_x&&e===a.data_x||qt(a.data_xs)&&Yn(a.data_xs,e)},w.isNotX=function(e){return!this.isX(e)},w.getXKey=function(e){var n=this,a=n.config;return a.data_x?a.data_x:qt(a.data_xs)?a.data_xs[e]:null},w.getXValuesOfXKey=function(e,n){var a=this,u,d=n&&qt(n)?a.mapToIds(n):[];return d.forEach(function(_){a.getXKey(_)===e&&(u=a.data.xs[_])}),u},w.getIndexByX=function(e){var n=this,a=n.filterByX(n.data.targets,e);return a.length?a[0].index:null},w.getXValue=function(e,n){var a=this;return e in a.data.xs&&a.data.xs[e]&&mt(a.data.xs[e][n])?a.data.xs[e][n]:n},w.getOtherTargetXs=function(){var e=this,n=Object.keys(e.data.xs);return n.length?e.data.xs[n[0]]:null},w.getOtherTargetX=function(e){var n=this.getOtherTargetXs();return n&&e<n.length?n[e]:null},w.addXs=function(e){var n=this;Object.keys(e).forEach(function(a){n.config.data_xs[a]=e[a]})},w.hasMultipleX=function(e){return this.d3.set(Object.keys(e).map(function(n){return e[n]})).size()>1},w.isMultipleX=function(){return qt(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},w.addName=function(e){var n=this,a;return e&&(a=n.config.data_names[e.id],e.name=a!==void 0?a:e.id),e},w.getValueOnIndex=function(e,n){var a=e.filter(function(u){return u.index===n});return a.length?a[0]:null},w.updateTargetX=function(e,n){var a=this;e.forEach(function(u){u.values.forEach(function(d,_){d.x=a.generateTargetX(n[_],u.id,_)}),a.data.xs[u.id]=n})},w.updateTargetXs=function(e,n){var a=this;e.forEach(function(u){n[u.id]&&a.updateTargetX([u],n[u.id])})},w.generateTargetX=function(e,n,a){var u=this,d;return u.isTimeSeries()?d=e?u.parseDate(e):u.parseDate(u.getXValue(n,a)):u.isCustomX()&&!u.isCategorized()?d=mt(e)?+e:u.getXValue(n,a):d=a,d},w.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(n){return{x:n.x,value:n.value,id:n.id}})}},w.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(n){e.xs[n.index]=n.x}))},w.getPrevX=function(e){var n=this.xs[e-1];return typeof n<"u"?n:null},w.getNextX=function(e){var n=this.xs[e+1];return typeof n<"u"?n:null},w.getMaxDataCount=function(){var e=this;return e.d3.max(e.data.targets,function(n){return n.values.length})},w.getMaxDataCountTarget=function(e){var n=e.length,a=0,u;return n>1?e.forEach(function(d){d.values.length>a&&(u=d,a=d.values.length)}):u=n?e[0]:null,u},w.getEdgeX=function(e){var n=this;return e.length?[n.d3.min(e,function(a){return a.values[0].x}),n.d3.max(e,function(a){return a.values[a.values.length-1].x})]:[0,0]},w.mapToIds=function(e){return e.map(function(n){return n.id})},w.mapToTargetIds=function(e){var n=this;return e?[].concat(e):n.mapToIds(n.data.targets)},w.hasTarget=function(e,n){var a=this.mapToIds(e),u;for(u=0;u<a.length;u++)if(a[u]===n)return!0;return!1},w.isTargetToShow=function(e){return this.hiddenTargetIds.indexOf(e)<0},w.isLegendToShow=function(e){return this.hiddenLegendIds.indexOf(e)<0},w.filterTargetsToShow=function(e){var n=this;return e.filter(function(a){return n.isTargetToShow(a.id)})},w.mapTargetsToUniqueXs=function(e){var n=this,a=n.d3.set(n.d3.merge(e.map(function(u){return u.values.map(function(d){return+d.x})}))).values();return a=n.isTimeSeries()?a.map(function(u){return new Date(+u)}):a.map(function(u){return+u}),a.sort(function(u,d){return u<d?-1:u>d?1:u>=d?0:NaN})},w.addHiddenTargetIds=function(e){e=e instanceof Array?e:new Array(e);for(var n=0;n<e.length;n++)this.hiddenTargetIds.indexOf(e[n])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(e[n]))},w.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(n){return e.indexOf(n)<0})},w.addHiddenLegendIds=function(e){e=e instanceof Array?e:new Array(e);for(var n=0;n<e.length;n++)this.hiddenLegendIds.indexOf(e[n])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(e[n]))},w.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(n){return e.indexOf(n)<0})},w.getValuesAsIdKeyed=function(e){var n={};return e.forEach(function(a){n[a.id]=[],a.values.forEach(function(u){n[a.id].push(u.value)})}),n},w.checkValueInTargets=function(e,n){var a=Object.keys(e),u,d,_;for(u=0;u<a.length;u++)for(_=e[a[u]].values,d=0;d<_.length;d++)if(n(_[d].value))return!0;return!1},w.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(n){return n<0})},w.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(n){return n>0})},w.isOrderDesc=function(){var e=this.config;return typeof e.data_order=="string"&&e.data_order.toLowerCase()==="desc"},w.isOrderAsc=function(){var e=this.config;return typeof e.data_order=="string"&&e.data_order.toLowerCase()==="asc"},w.getOrderFunction=function(){var e=this,n=e.config,a=e.isOrderAsc(),u=e.isOrderDesc();if(a||u)return function(_,v){var y=function($,N){return $+Math.abs(N.value)},G=_.values.reduce(y,0),C=v.values.reduce(y,0);return u?C-G:G-C};if(Kt(n.data_order))return n.data_order;if(Hn(n.data_order)){var d=n.data_order;return function(_,v){return d.indexOf(_.id)-d.indexOf(v.id)}}},w.orderTargets=function(e){var n=this.getOrderFunction();return n&&(e.sort(n),(this.isOrderAsc()||this.isOrderDesc())&&e.reverse()),e},w.filterByX=function(e,n){return this.d3.merge(e.map(function(a){return a.values})).filter(function(a){return a.x-n===0})},w.filterRemoveNull=function(e){return e.filter(function(n){return mt(n.value)})},w.filterByXDomain=function(e,n){return e.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(u){return n[0]<=u.x&&u.x<=n[1]})}})},w.hasDataLabel=function(){var e=this.config;return typeof e.data_labels=="boolean"&&e.data_labels?!0:!!(Ct(e.data_labels)==="object"&&qt(e.data_labels))},w.getDataLabelLength=function(e,n,a){var u=this,d=[0,0],_=1.3;return u.selectChart.select("svg").selectAll(".dummy").data([e,n]).enter().append("text").text(function(v){return u.dataLabelFormat(v.id)(v)}).each(function(v,y){d[y]=this.getBoundingClientRect()[a]*_}).remove(),d},w.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},w.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},w.findSameXOfValues=function(e,n){var a,u=e[n].x,d=[];for(a=n-1;a>=0&&u===e[a].x;a--)d.push(e[a]);for(a=n;a<e.length&&u===e[a].x;a++)d.push(e[a]);return d},w.findClosestFromTargets=function(e,n){var a=this,u;return u=e.map(function(d){return a.findClosest(d.values,n)}),a.findClosest(u,n)},w.findClosest=function(e,n){var a=this,u=a.config.point_sensitivity,d;return e.filter(function(_){return _&&a.isBarType(_.id)}).forEach(function(_){var v=a.main.select("."+M.bars+a.getTargetSelectorSuffix(_.id)+" ."+M.bar+"-"+_.index).node();!d&&a.isWithinBar(v)&&(d=_)}),e.filter(function(_){return _&&!a.isBarType(_.id)}).forEach(function(_){var v=a.dist(_,n);v<u&&(u=v,d=_)}),d},w.dist=function(e,n){var a=this,u=a.config,d=u.axis_rotated?1:0,_=u.axis_rotated?0:1,v=a.circleY(e,e.index),y=a.x(e.x);return Math.sqrt(Math.pow(y-n[d],2)+Math.pow(v-n[_],2))},w.convertValuesToStep=function(e){var n=[].concat(e),a;if(!this.isCategorized())return e;for(a=e.length+1;0<a;a--)n[a]=n[a-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[e.length+1]={x:n[e.length].x+1,value:n[e.length].value,id:n[e.length].id},n},w.updateDataAttributes=function(e,n){var a=this,u=a.config,d=u["data_"+e];return typeof n>"u"||(Object.keys(n).forEach(function(_){d[_]=n[_]}),a.redraw({withLegend:!0})),d},w.load=function(e,n){var a=this;e&&(n.filter&&(e=e.filter(n.filter)),(n.type||n.types)&&e.forEach(function(u){var d=n.types&&n.types[u.id]?n.types[u.id]:n.type;a.setTargetType(u.id,d)}),a.data.targets.forEach(function(u){for(var d=0;d<e.length;d++)if(u.id===e[d].id){u.values=e[d].values,e.splice(d,1);break}}),a.data.targets=a.data.targets.concat(e)),a.updateTargets(a.data.targets),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.done&&n.done()},w.loadFromArgs=function(e){var n=this;e.data?n.load(n.convertDataToTargets(e.data),e):e.url?n.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(a){n.load(n.convertDataToTargets(a),e)}):e.json?n.load(n.convertDataToTargets(n.convertJsonToData(e.json,e.keys)),e):e.rows?n.load(n.convertDataToTargets(n.convertRowsToData(e.rows)),e):e.columns?n.load(n.convertDataToTargets(n.convertColumnsToData(e.columns)),e):n.load(null,e)},w.unload=function(e,n){var a=this;if(n||(n=function(){}),e=e.filter(function(u){return a.hasTarget(a.data.targets,u)}),!e||e.length===0){n();return}a.svg.selectAll(e.map(function(u){return a.selectorTarget(u)})).transition().style("opacity",0).remove().call(a.endall,n),e.forEach(function(u){a.withoutFadeIn[u]=!1,a.legend&&a.legend.selectAll("."+M.legendItem+a.getTargetSelectorSuffix(u)).remove(),a.data.targets=a.data.targets.filter(function(d){return d.id!==u})})},w.getYDomainMin=function(e){var n=this,a=n.config,u=n.mapToIds(e),d=n.getValuesAsIdKeyed(e),_,v,y,G,C,R;if(a.data_groups.length>0){for(R=n.hasNegativeValueInTargets(e),_=0;_<a.data_groups.length;_++)if(G=a.data_groups[_].filter(function($){return u.indexOf($)>=0}),G.length!==0)for(y=G[0],R&&d[y]&&d[y].forEach(function($,N){d[y][N]=$<0?$:0}),v=1;v<G.length;v++)C=G[v],d[C]&&d[C].forEach(function($,N){n.axis.getId(C)===n.axis.getId(y)&&d[y]&&!(R&&+$>0)&&(d[y][N]+=+$)})}return n.d3.min(Object.keys(d).map(function($){return n.d3.min(d[$])}))},w.getYDomainMax=function(e){var n=this,a=n.config,u=n.mapToIds(e),d=n.getValuesAsIdKeyed(e),_,v,y,G,C,R;if(a.data_groups.length>0){for(R=n.hasPositiveValueInTargets(e),_=0;_<a.data_groups.length;_++)if(G=a.data_groups[_].filter(function($){return u.indexOf($)>=0}),G.length!==0)for(y=G[0],R&&d[y]&&d[y].forEach(function($,N){d[y][N]=$>0?$:0}),v=1;v<G.length;v++)C=G[v],d[C]&&d[C].forEach(function($,N){n.axis.getId(C)===n.axis.getId(y)&&d[y]&&!(R&&+$<0)&&(d[y][N]+=+$)})}return n.d3.max(Object.keys(d).map(function($){return n.d3.max(d[$])}))},w.getYDomain=function(e,n,a){var u=this,d=u.config,_=e.filter(function(_t){return u.axis.getId(_t.id)===n}),v=a?u.filterByXDomain(_,a):_,y=n==="y2"?d.axis_y2_min:d.axis_y_min,G=n==="y2"?d.axis_y2_max:d.axis_y_max,C=u.getYDomainMin(v),R=u.getYDomainMax(v),$,N,B,Q,K=n==="y2"?d.axis_y2_center:d.axis_y_center,J,gt,yt,vt,xt,wt,bt=u.hasType("bar",v)&&d.bar_zerobased||u.hasType("area",v)&&d.area_zerobased,it=n==="y2"?d.axis_y2_inverted:d.axis_y_inverted,st=u.hasDataLabel()&&d.axis_rotated,Vt=u.hasDataLabel()&&!d.axis_rotated;return C=mt(y)?y:mt(G)?C<G?C:G-10:C,R=mt(G)?G:mt(y)?y<R?R:y+10:R,v.length===0?n==="y2"?u.y2.domain():u.y.domain():(isNaN(C)&&(C=0),isNaN(R)&&(R=C),C===R&&(C<0?R=0:C=0),xt=C>=0&&R>=0,wt=C<=0&&R<=0,(mt(y)&&xt||mt(G)&&wt)&&(bt=!1),bt&&(xt&&(C=0),wt&&(R=0)),N=Math.abs(R-C),B=Q=N*.1,typeof K<"u"&&(J=Math.max(Math.abs(C),Math.abs(R)),R=K+J,C=K-J),st?(gt=u.getDataLabelLength(C,R,"width"),yt=Ae(u.y.range()),vt=[gt[0]/yt,gt[1]/yt],B+=N*(vt[1]/(1-vt[0]-vt[1])),Q+=N*(vt[0]/(1-vt[0]-vt[1]))):Vt&&(gt=u.getDataLabelLength(C,R,"height"),B+=u.axis.convertPixelsToAxisPadding(gt[1],N),Q+=u.axis.convertPixelsToAxisPadding(gt[0],N)),n==="y"&&qt(d.axis_y_padding)&&(B=u.axis.getPadding(d.axis_y_padding,"top",B,N),Q=u.axis.getPadding(d.axis_y_padding,"bottom",Q,N)),n==="y2"&&qt(d.axis_y2_padding)&&(B=u.axis.getPadding(d.axis_y2_padding,"top",B,N),Q=u.axis.getPadding(d.axis_y2_padding,"bottom",Q,N)),bt&&(xt&&(Q=C),wt&&(B=-R)),$=[C-Q,R+B],it?$.reverse():$)},w.getXDomainMin=function(e){var n=this,a=n.config;return Gt(a.axis_x_min)?n.isTimeSeries()?this.parseDate(a.axis_x_min):a.axis_x_min:n.d3.min(e,function(u){return n.d3.min(u.values,function(d){return d.x})})},w.getXDomainMax=function(e){var n=this,a=n.config;return Gt(a.axis_x_max)?n.isTimeSeries()?this.parseDate(a.axis_x_max):a.axis_x_max:n.d3.max(e,function(u){return n.d3.max(u.values,function(d){return d.x})})},w.getXDomainPadding=function(e){var n=this,a=n.config,u=e[1]-e[0],d,_,v,y;return n.isCategorized()?_=0:n.hasType("bar")?(d=n.getMaxDataCount(),_=d>1?u/(d-1)/2:.5):_=u*.01,Ct(a.axis_x_padding)==="object"&&qt(a.axis_x_padding)?(v=mt(a.axis_x_padding.left)?a.axis_x_padding.left:_,y=mt(a.axis_x_padding.right)?a.axis_x_padding.right:_):typeof a.axis_x_padding=="number"?v=y=a.axis_x_padding:v=y=_,{left:v,right:y}},w.getXDomain=function(e){var n=this,a=[n.getXDomainMin(e),n.getXDomainMax(e)],u=a[0],d=a[1],_=n.getXDomainPadding(a),v=0,y=0;return u-d===0&&!n.isCategorized()&&(n.isTimeSeries()?(u=new Date(u.getTime()*.5),d=new Date(d.getTime()*1.5)):(u=u===0?1:u*.5,d=d===0?-1:d*1.5)),(u||u===0)&&(v=n.isTimeSeries()?new Date(u.getTime()-_.left):u-_.left),(d||d===0)&&(y=n.isTimeSeries()?new Date(d.getTime()+_.right):d+_.right),[v,y]},w.updateXDomain=function(e,n,a,u,d){var _=this,v=_.config;return a&&(_.x.domain(d||_.d3.extent(_.getXDomain(e))),_.orgXDomain=_.x.domain(),v.zoom_enabled&&_.zoom.scale(_.x).updateScaleExtent(),_.subX.domain(_.x.domain()),_.brush&&_.brush.scale(_.subX)),n&&(_.x.domain(d||(!_.brush||_.brush.empty()?_.orgXDomain:_.brush.extent())),v.zoom_enabled&&_.zoom.scale(_.x).updateScaleExtent()),u&&_.x.domain(_.trimXDomain(_.x.orgDomain())),_.x.domain()},w.trimXDomain=function(e){var n=this.getZoomDomain(),a=n[0],u=n[1];return e[0]<=a&&(e[1]=+e[1]+(a-e[0]),e[0]=a),u<=e[1]&&(e[0]=+e[0]-(e[1]-u),e[1]=u),e},w.drag=function(e){var n=this,a=n.config,u=n.main,d=n.d3,_,v,y,G,C,R,$,N;n.hasArcType()||a.data_selection_enabled&&(a.zoom_enabled&&!n.zoom.altDomain||a.data_selection_multiple&&(_=n.dragStart[0],v=n.dragStart[1],y=e[0],G=e[1],C=Math.min(_,y),R=Math.max(_,y),$=a.data_selection_grouped?n.margin.top:Math.min(v,G),N=a.data_selection_grouped?n.height:Math.max(v,G),u.select("."+M.dragarea).attr("x",C).attr("y",$).attr("width",R-C).attr("height",N-$),u.selectAll("."+M.shapes).selectAll("."+M.shape).filter(function(B){return a.data_selection_isselectable(B)}).each(function(B,Q){var K=d.select(this),J=K.classed(M.SELECTED),gt=K.classed(M.INCLUDED),yt,vt,xt,wt,bt,it=!1,st;if(K.classed(M.circle))yt=K.attr("cx")*1,vt=K.attr("cy")*1,bt=n.togglePoint,it=C<yt&&yt<R&&$<vt&&vt<N;else if(K.classed(M.bar))st=fe(this),yt=st.x,vt=st.y,xt=st.width,wt=st.height,bt=n.togglePath,it=!(R<yt||yt+xt<C)&&!(N<vt||vt+wt<$);else return;it^gt&&(K.classed(M.INCLUDED,!gt),K.classed(M.SELECTED,!J),bt.call(n,!J,K,B,Q))})))},w.dragstart=function(e){var n=this,a=n.config;n.hasArcType()||a.data_selection_enabled&&(n.dragStart=e,n.main.select("."+M.chart).append("rect").attr("class",M.dragarea).style("opacity",.1),n.dragging=!0)},w.dragend=function(){var e=this,n=e.config;e.hasArcType()||n.data_selection_enabled&&(e.main.select("."+M.dragarea).transition().duration(100).style("opacity",0).remove(),e.main.selectAll("."+M.shape).classed(M.INCLUDED,!1),e.dragging=!1)},w.getYFormat=function(e){var n=this,a=e&&!n.hasType("gauge")?n.defaultArcValueFormat:n.yFormat,u=e&&!n.hasType("gauge")?n.defaultArcValueFormat:n.y2Format;return function(d,_,v){var y=n.axis.getId(v)==="y2"?u:a;return y.call(n,d,_)}},w.yFormat=function(e){var n=this,a=n.config,u=a.axis_y_tick_format?a.axis_y_tick_format:n.defaultValueFormat;return u(e)},w.y2Format=function(e){var n=this,a=n.config,u=a.axis_y2_tick_format?a.axis_y2_tick_format:n.defaultValueFormat;return u(e)},w.defaultValueFormat=function(e){return mt(e)?+e:""},w.defaultArcValueFormat=function(e,n){return(n*100).toFixed(1)+"%"},w.dataLabelFormat=function(e){var n=this,a=n.config.data_labels,u,d=function(v){return mt(v)?+v:""};return typeof a.format=="function"?u=a.format:Ct(a.format)==="object"?a.format[e]?u=a.format[e]===!0?d:a.format[e]:u=function(){return""}:u=d,u},w.initGrid=function(){var e=this,n=e.config,a=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",M.grid),n.grid_x_show&&e.grid.append("g").attr("class",M.xgrids),n.grid_y_show&&e.grid.append("g").attr("class",M.ygrids),n.grid_focus_show&&e.grid.append("g").attr("class",M.xgridFocus).append("line").attr("class",M.xgridFocus),e.xgrid=a.selectAll([]),n.grid_lines_front||e.initGridLines()},w.initGridLines=function(){var e=this,n=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",M.grid+" "+M.gridLines),e.gridLines.append("g").attr("class",M.xgridLines),e.gridLines.append("g").attr("class",M.ygridLines),e.xgridLines=n.selectAll([])},w.updateXGrid=function(e){var n=this,a=n.config,u=n.d3,d=n.generateGridData(a.grid_x_type,n.x),_=n.isCategorized()?n.xAxis.tickOffset():0;n.xgridAttr=a.axis_rotated?{x1:0,x2:n.width,y1:function(y){return n.x(y)-_},y2:function(y){return n.x(y)-_}}:{x1:function(y){return n.x(y)+_},x2:function(y){return n.x(y)+_},y1:0,y2:n.height},n.xgrid=n.main.select("."+M.xgrids).selectAll("."+M.xgrid).data(d),n.xgrid.enter().append("line").attr("class",M.xgrid),e||n.xgrid.attr(n.xgridAttr).style("opacity",function(){return+u.select(this).attr(a.axis_rotated?"y1":"x1")===(a.axis_rotated?n.height:0)?0:1}),n.xgrid.exit().remove()},w.updateYGrid=function(){var e=this,n=e.config,a=e.yAxis.tickValues()||e.y.ticks(n.grid_y_ticks);e.ygrid=e.main.select("."+M.ygrids).selectAll("."+M.ygrid).data(a),e.ygrid.enter().append("line").attr("class",M.ygrid),e.ygrid.attr("x1",n.axis_rotated?e.y:0).attr("x2",n.axis_rotated?e.y:e.width).attr("y1",n.axis_rotated?0:e.y).attr("y2",n.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},w.gridTextAnchor=function(e){return e.position?e.position:"end"},w.gridTextDx=function(e){return e.position==="start"?4:e.position==="middle"?0:-4},w.xGridTextX=function(e){return e.position==="start"?-this.height:e.position==="middle"?-this.height/2:0},w.yGridTextX=function(e){return e.position==="start"?0:e.position==="middle"?this.width/2:this.width},w.updateGrid=function(e){var n=this,a=n.main,u=n.config,d,_,v;n.grid.style("visibility",n.hasArcType()?"hidden":"visible"),a.select("line."+M.xgridFocus).style("visibility","hidden"),u.grid_x_show&&n.updateXGrid(),n.xgridLines=a.select("."+M.xgridLines).selectAll("."+M.xgridLine).data(u.grid_x_lines),d=n.xgridLines.enter().append("g").attr("class",function(y){return M.xgridLine+(y.class?" "+y.class:"")}),d.append("line").style("opacity",0),d.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",u.axis_rotated?"":"rotate(-90)").attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0),n.xgridLines.exit().transition().duration(e).style("opacity",0).remove(),u.grid_y_show&&n.updateYGrid(),n.ygridLines=a.select("."+M.ygridLines).selectAll("."+M.ygridLine).data(u.grid_y_lines),_=n.ygridLines.enter().append("g").attr("class",function(y){return M.ygridLine+(y.class?" "+y.class:"")}),_.append("line").style("opacity",0),_.append("text").attr("text-anchor",n.gridTextAnchor).attr("transform",u.axis_rotated?"rotate(-90)":"").attr("dx",n.gridTextDx).attr("dy",-5).style("opacity",0),v=n.yv.bind(n),n.ygridLines.select("line").transition().duration(e).attr("x1",u.axis_rotated?v:0).attr("x2",u.axis_rotated?v:n.width).attr("y1",u.axis_rotated?0:v).attr("y2",u.axis_rotated?n.height:v).style("opacity",1),n.ygridLines.select("text").transition().duration(e).attr("x",u.axis_rotated?n.xGridTextX.bind(n):n.yGridTextX.bind(n)).attr("y",v).text(function(y){return y.text}).style("opacity",1),n.ygridLines.exit().transition().duration(e).style("opacity",0).remove()},w.redrawGrid=function(e){var n=this,a=n.config,u=n.xv.bind(n),d=n.xgridLines.select("line"),_=n.xgridLines.select("text");return[(e?d.transition():d).attr("x1",a.axis_rotated?0:u).attr("x2",a.axis_rotated?n.width:u).attr("y1",a.axis_rotated?u:0).attr("y2",a.axis_rotated?u:n.height).style("opacity",1),(e?_.transition():_).attr("x",a.axis_rotated?n.yGridTextX.bind(n):n.xGridTextX.bind(n)).attr("y",u).text(function(v){return v.text}).style("opacity",1)]},w.showXGridFocus=function(e){var n=this,a=n.config,u=e.filter(function(v){return v&&mt(v.value)}),d=n.main.selectAll("line."+M.xgridFocus),_=n.xx.bind(n);a.tooltip_show&&(n.hasType("scatter")||n.hasArcType()||(d.style("visibility","visible").data([u[0]]).attr(a.axis_rotated?"y1":"x1",_).attr(a.axis_rotated?"y2":"x2",_),n.smoothLines(d,"grid")))},w.hideXGridFocus=function(){this.main.select("line."+M.xgridFocus).style("visibility","hidden")},w.updateXgridFocus=function(){var e=this,n=e.config;e.main.select("line."+M.xgridFocus).attr("x1",n.axis_rotated?0:-10).attr("x2",n.axis_rotated?e.width:-10).attr("y1",n.axis_rotated?-10:0).attr("y2",n.axis_rotated?-10:e.height)},w.generateGridData=function(e,n){var a=this,u=[],d,_,v,y,G=a.main.select("."+M.axisX).selectAll(".tick").size();if(e==="year")for(d=a.getXDomain(),_=d[0].getFullYear(),v=d[1].getFullYear(),y=_;y<=v;y++)u.push(new Date(y+"-01-01 00:00:00"));else u=n.ticks(10),u.length>G&&(u=u.filter(function(C){return(""+C).indexOf(".")<0}));return u},w.getGridFilterToRemove=function(e){return e?function(n){var a=!1;return[].concat(e).forEach(function(u){("value"in u&&n.value===u.value||"class"in u&&n.class===u.class)&&(a=!0)}),a}:function(){return!0}},w.removeGridLines=function(e,n){var a=this,u=a.config,d=a.getGridFilterToRemove(e),_=function(C){return!d(C)},v=n?M.xgridLines:M.ygridLines,y=n?M.xgridLine:M.ygridLine;a.main.select("."+v).selectAll("."+y).filter(d).transition().duration(u.transition_duration).style("opacity",0).remove(),n?u.grid_x_lines=u.grid_x_lines.filter(_):u.grid_y_lines=u.grid_y_lines.filter(_)},w.initEventRect=function(){var e=this;e.main.select("."+M.chart).append("g").attr("class",M.eventRects).style("fill-opacity",0)},w.redrawEventRect=function(){var e=this,n=e.config,a,u,d=e.isMultipleX(),_=e.main.select("."+M.eventRects).style("cursor",n.zoom_enabled?n.axis_rotated?"ns-resize":"ew-resize":null).classed(M.eventRectsMultiple,d).classed(M.eventRectsSingle,!d);_.selectAll("."+M.eventRect).remove(),e.eventRect=_.selectAll("."+M.eventRect),d?(a=e.eventRect.data([0]),e.generateEventRectsForMultipleXs(a.enter()),e.updateEventRect(a)):(u=e.getMaxDataCountTarget(e.data.targets),_.datum(u?u.values:[]),e.eventRect=_.selectAll("."+M.eventRect),a=e.eventRect.data(function(v){return v}),e.generateEventRectsForSingleX(a.enter()),e.updateEventRect(a),a.exit().remove())},w.updateEventRect=function(e){var n=this,a=n.config,u,d,_,v,y,G;e=e||n.eventRect.data(function(C){return C}),n.isMultipleX()?(u=0,d=0,_=n.width,v=n.height):((n.isCustomX()||n.isTimeSeries())&&!n.isCategorized()?(n.updateXs(),y=function(R){var $=n.getPrevX(R.index),N=n.getNextX(R.index);return $===null&&N===null?a.axis_rotated?n.height:n.width:($===null&&($=n.x.domain()[0]),N===null&&(N=n.x.domain()[1]),Math.max(0,(n.x(N)-n.x($))/2))},G=function(R){var $=n.getPrevX(R.index),N=n.getNextX(R.index),B=n.data.xs[R.id][R.index];return $===null&&N===null?0:($===null&&($=n.x.domain()[0]),(n.x(B)+n.x($))/2)}):(y=n.getEventRectWidth(),G=function(R){return n.x(R.x)-y/2}),u=a.axis_rotated?0:G,d=a.axis_rotated?G:0,_=a.axis_rotated?n.width:y,v=a.axis_rotated?y:n.height),e.attr("class",n.classEvent.bind(n)).attr("x",u).attr("y",d).attr("width",_).attr("height",v)},w.generateEventRectsForSingleX=function(e){var n=this,a=n.d3,u=n.config;e.append("rect").attr("class",n.classEvent.bind(n)).style("cursor",u.data_selection_enabled&&u.data_selection_grouped?"pointer":null).on("mouseover",function(d){var _=d.index;n.dragging||n.flowing||n.hasArcType()||(u.point_focus_expand_enabled&&n.expandCircles(_,null,!0),n.expandBars(_,null,!0),n.main.selectAll("."+M.shape+"-"+_).each(function(v){u.data_onmouseover.call(n.api,v)}))}).on("mouseout",function(d){var _=d.index;n.config&&(n.hasArcType()||(n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars(),n.main.selectAll("."+M.shape+"-"+_).each(function(v){u.data_onmouseout.call(n.api,v)})))}).on("mousemove",function(d){var _,v=d.index,y=n.svg.select("."+M.eventRect+"-"+v);n.dragging||n.flowing||n.hasArcType()||(n.isStepType(d)&&n.config.line_step_type==="step-after"&&a.mouse(this)[0]<n.x(n.getXValue(d.id,v))&&(v-=1),_=n.filterTargetsToShow(n.data.targets).map(function(G){return n.addName(n.getValueOnIndex(G.values,v))}),u.tooltip_grouped&&(n.showTooltip(_,this),n.showXGridFocus(_)),!(u.tooltip_grouped&&(!u.data_selection_enabled||u.data_selection_grouped))&&n.main.selectAll("."+M.shape+"-"+v).each(function(){a.select(this).classed(M.EXPANDED,!0),u.data_selection_enabled&&y.style("cursor",u.data_selection_grouped?"pointer":null),u.tooltip_grouped||(n.hideXGridFocus(),n.hideTooltip(),u.data_selection_grouped||(n.unexpandCircles(v),n.unexpandBars(v)))}).filter(function(G){return n.isWithinShape(this,G)}).each(function(G){u.data_selection_enabled&&(u.data_selection_grouped||u.data_selection_isselectable(G))&&y.style("cursor","pointer"),u.tooltip_grouped||(n.showTooltip([G],this),n.showXGridFocus([G]),u.point_focus_expand_enabled&&n.expandCircles(v,G.id,!0),n.expandBars(v,G.id,!0))}))}).on("click",function(d){var _=d.index;if(!(n.hasArcType()||!n.toggleShape)){if(n.cancelClick){n.cancelClick=!1;return}n.isStepType(d)&&u.line_step_type==="step-after"&&a.mouse(this)[0]<n.x(n.getXValue(d.id,_))&&(_-=1),n.main.selectAll("."+M.shape+"-"+_).each(function(v){(u.data_selection_grouped||n.isWithinShape(this,v))&&(n.toggleShape(this,v,_),n.config.data_onclick.call(n.api,v,this))})}}).call(u.data_selection_draggable&&n.drag?a.behavior.drag().origin(Object).on("drag",function(){n.drag(a.mouse(this))}).on("dragstart",function(){n.dragstart(a.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})},w.generateEventRectsForMultipleXs=function(e){var n=this,a=n.d3,u=n.config;function d(){n.svg.select("."+M.eventRect).style("cursor",null),n.hideXGridFocus(),n.hideTooltip(),n.unexpandCircles(),n.unexpandBars()}e.append("rect").attr("x",0).attr("y",0).attr("width",n.width).attr("height",n.height).attr("class",M.eventRect).on("mouseout",function(){n.config&&(n.hasArcType()||d())}).on("mousemove",function(){var _=n.filterTargetsToShow(n.data.targets),v,y,G,C;if(!n.dragging&&!n.hasArcType(_)){if(v=a.mouse(this),y=n.findClosestFromTargets(_,v),n.mouseover&&(!y||y.id!==n.mouseover.id)&&(u.data_onmouseout.call(n.api,n.mouseover),n.mouseover=void 0),!y){d();return}n.isScatterType(y)||!u.tooltip_grouped?G=[y]:G=n.filterByX(_,y.x),C=G.map(function(R){return n.addName(R)}),n.showTooltip(C,this),u.point_focus_expand_enabled&&n.expandCircles(y.index,y.id,!0),n.expandBars(y.index,y.id,!0),n.showXGridFocus(C),(n.isBarType(y.id)||n.dist(y,v)<u.point_sensitivity)&&(n.svg.select("."+M.eventRect).style("cursor","pointer"),n.mouseover||(u.data_onmouseover.call(n.api,y),n.mouseover=y))}}).on("click",function(){var _=n.filterTargetsToShow(n.data.targets),v,y;n.hasArcType(_)||(v=a.mouse(this),y=n.findClosestFromTargets(_,v),y&&(n.isBarType(y.id)||n.dist(y,v)<u.point_sensitivity)&&n.main.selectAll("."+M.shapes+n.getTargetSelectorSuffix(y.id)).selectAll("."+M.shape+"-"+y.index).each(function(){(u.data_selection_grouped||n.isWithinShape(this,y))&&(n.toggleShape(this,y,y.index),n.config.data_onclick.call(n.api,y,this))}))}).call(u.data_selection_draggable&&n.drag?a.behavior.drag().origin(Object).on("drag",function(){n.drag(a.mouse(this))}).on("dragstart",function(){n.dragstart(a.mouse(this))}).on("dragend",function(){n.dragend()}):function(){})},w.dispatchEvent=function(e,n,a){var u=this,d="."+M.eventRect+(u.isMultipleX()?"":"-"+n),_=u.main.select(d).node(),v=_.getBoundingClientRect(),y=v.left+(a?a[0]:0),G=v.top+(a?a[1]:0),C=document.createEvent("MouseEvents");C.initMouseEvent(e,!0,!0,window,0,y,G,y,G,!1,!1,!1,!1,0,null),_.dispatchEvent(C)},w.initLegend=function(){var e=this;if(e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend")),!e.config.legend_show){e.legend.style("visibility","hidden"),e.hiddenLegendIds=e.mapToIds(e.data.targets);return}e.updateLegendWithDefaults()},w.updateLegendWithDefaults=function(){var e=this;e.updateLegend(e.mapToIds(e.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},w.updateSizeForLegend=function(e,n){var a=this,u=a.config,d={top:a.isLegendTop?a.getCurrentPaddingTop()+u.legend_inset_y+5.5:a.currentHeight-e-a.getCurrentPaddingBottom()-u.legend_inset_y,left:a.isLegendLeft?a.getCurrentPaddingLeft()+u.legend_inset_x+.5:a.currentWidth-n-a.getCurrentPaddingRight()-u.legend_inset_x+.5};a.margin3={top:a.isLegendRight?0:a.isLegendInset?d.top:a.currentHeight-e,right:NaN,bottom:0,left:a.isLegendRight?a.currentWidth-n:a.isLegendInset?d.left:0}},w.transformLegend=function(e){var n=this;(e?n.legend.transition():n.legend).attr("transform",n.getTranslate("legend"))},w.updateLegendStep=function(e){this.legendStep=e},w.updateLegendItemWidth=function(e){this.legendItemWidth=e},w.updateLegendItemHeight=function(e){this.legendItemHeight=e},w.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},w.getLegendHeight=function(){var e=this,n=0;return e.config.legend_show&&(e.isLegendRight?n=e.currentHeight:n=Math.max(20,e.legendItemHeight)*(e.legendStep+1)),n},w.opacityForLegend=function(e){return e.classed(M.legendItemHidden)?null:1},w.opacityForUnfocusedLegend=function(e){return e.classed(M.legendItemHidden)?null:.3},w.toggleFocusLegend=function(e,n){var a=this;e=a.mapToTargetIds(e),a.legend.selectAll("."+M.legendItem).filter(function(u){return e.indexOf(u)>=0}).classed(M.legendItemFocused,n).transition().duration(100).style("opacity",function(){var u=n?a.opacityForLegend:a.opacityForUnfocusedLegend;return u.call(a,a.d3.select(this))})},w.revertLegend=function(){var e=this,n=e.d3;e.legend.selectAll("."+M.legendItem).classed(M.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return e.opacityForLegend(n.select(this))})},w.showLegend=function(e){var n=this,a=n.config;a.legend_show||(a.legend_show=!0,n.legend.style("visibility","visible"),n.legendHasRendered||n.updateLegendWithDefaults()),n.removeHiddenLegendIds(e),n.legend.selectAll(n.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return n.opacityForLegend(n.d3.select(this))})},w.hideLegend=function(e){var n=this,a=n.config;a.legend_show&&hn(e)&&(a.legend_show=!1,n.legend.style("visibility","hidden")),n.addHiddenLegendIds(e),n.legend.selectAll(n.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},w.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},w.updateLegend=function(e,n,a){var u=this,d=u.config,_,v,y,G,C,R,$,N,B,Q=4,K=10,J=0,gt=0,yt=10,vt=d.legend_item_tile_width+5,xt,wt=0,bt={},it={},st={},Vt=[0],_t={},Lt=0,Tt,It,ie,Ut,Ht,Dt;e=e.filter(function(ot){return!Gt(d.data_names[ot])||d.data_names[ot]!==null}),n=n||{},Tt=at(n,"withTransition",!0),It=at(n,"withTransitionForTransform",!0);function Nt(ot,lt){return u.legendItemTextBox[lt]||(u.legendItemTextBox[lt]=u.getTextRect(ot.textContent,M.legendItem,ot)),u.legendItemTextBox[lt]}function zt(ot,lt,Rt){var Te=Rt===0,ke=Rt===e.length-1,pe=Nt(ot,lt),Bt=pe.width+vt+(ke&&!(u.isLegendRight||u.isLegendInset)?0:K)+d.legend_padding,Ie=pe.height+Q,Ne=u.isLegendRight||u.isLegendInset?Ie:Bt,Ze=u.isLegendRight||u.isLegendInset?u.getLegendHeight():u.getLegendWidth(),Pe,jn;function et(se,ft){ft||(Pe=(Ze-wt-Ne)/2,Pe<yt&&(Pe=(Ze-Ne)/2,wt=0,Lt++)),_t[se]=Lt,Vt[Lt]=u.isLegendInset?10:Pe,bt[se]=wt,wt+=Ne}if(Te&&(wt=0,Lt=0,J=0,gt=0),d.legend_show&&!u.isLegendToShow(lt)){it[lt]=st[lt]=_t[lt]=bt[lt]=0;return}it[lt]=Bt,st[lt]=Ie,(!J||Bt>=J)&&(J=Bt),(!gt||Ie>=gt)&&(gt=Ie),jn=u.isLegendRight||u.isLegendInset?gt:J,d.legend_equally?(Object.keys(it).forEach(function(se){it[se]=J}),Object.keys(st).forEach(function(se){st[se]=gt}),Pe=(Ze-jn*e.length)/2,Pe<yt?(wt=0,Lt=0,e.forEach(function(se){et(se)})):et(lt,!0)):et(lt)}u.isLegendInset&&(Lt=d.legend_inset_step?d.legend_inset_step:e.length,u.updateLegendStep(Lt)),u.isLegendRight?(_=function(lt){return J*_t[lt]},G=function(lt){return Vt[_t[lt]]+bt[lt]}):u.isLegendInset?(_=function(lt){return J*_t[lt]+10},G=function(lt){return Vt[_t[lt]]+bt[lt]}):(_=function(lt){return Vt[_t[lt]]+bt[lt]},G=function(lt){return gt*_t[lt]}),v=function(lt,Rt){return _(lt,Rt)+4+d.legend_item_tile_width},C=function(lt,Rt){return G(lt,Rt)+9},y=function(lt,Rt){return _(lt,Rt)},R=function(lt,Rt){return G(lt,Rt)-5},$=function(lt,Rt){return _(lt,Rt)-2},N=function(lt,Rt){return _(lt,Rt)-2+d.legend_item_tile_width},B=function(lt,Rt){return G(lt,Rt)+4},xt=u.legend.selectAll("."+M.legendItem).data(e).enter().append("g").attr("class",function(ot){return u.generateClass(M.legendItem,ot)}).style("visibility",function(ot){return u.isLegendToShow(ot)?"visible":"hidden"}).style("cursor","pointer").on("click",function(ot){d.legend_item_onclick?d.legend_item_onclick.call(u,ot):u.d3.event.altKey?(u.api.hide(),u.api.show(ot)):(u.api.toggle(ot),u.isTargetToShow(ot)?u.api.focus(ot):u.api.revert())}).on("mouseover",function(ot){d.legend_item_onmouseover?d.legend_item_onmouseover.call(u,ot):(u.d3.select(this).classed(M.legendItemFocused,!0),!u.transiting&&u.isTargetToShow(ot)&&u.api.focus(ot))}).on("mouseout",function(ot){d.legend_item_onmouseout?d.legend_item_onmouseout.call(u,ot):(u.d3.select(this).classed(M.legendItemFocused,!1),u.api.revert())}),xt.append("text").text(function(ot){return Gt(d.data_names[ot])?d.data_names[ot]:ot}).each(function(ot,lt){zt(this,ot,lt)}).style("pointer-events","none").attr("x",u.isLegendRight||u.isLegendInset?v:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:C),xt.append("rect").attr("class",M.legendItemEvent).style("fill-opacity",0).attr("x",u.isLegendRight||u.isLegendInset?y:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:R),xt.append("line").attr("class",M.legendItemTile).style("stroke",u.color).style("pointer-events","none").attr("x1",u.isLegendRight||u.isLegendInset?$:-200).attr("y1",u.isLegendRight||u.isLegendInset?-200:B).attr("x2",u.isLegendRight||u.isLegendInset?N:-200).attr("y2",u.isLegendRight||u.isLegendInset?-200:B).attr("stroke-width",d.legend_item_tile_height),Dt=u.legend.select("."+M.legendBackground+" rect"),u.isLegendInset&&J>0&&Dt.size()===0&&(Dt=u.legend.insert("g","."+M.legendItem).attr("class",M.legendBackground).append("rect")),ie=u.legend.selectAll("text").data(e).text(function(ot){return Gt(d.data_names[ot])?d.data_names[ot]:ot}).each(function(ot,lt){zt(this,ot,lt)}),(Tt?ie.transition():ie).attr("x",v).attr("y",C),Ut=u.legend.selectAll("rect."+M.legendItemEvent).data(e),(Tt?Ut.transition():Ut).attr("width",function(ot){return it[ot]}).attr("height",function(ot){return st[ot]}).attr("x",y).attr("y",R),Ht=u.legend.selectAll("line."+M.legendItemTile).data(e),(Tt?Ht.transition():Ht).style("stroke",u.levelColor?function(ot){return u.levelColor(u.cache[ot].values[0].value)}:u.color).attr("x1",$).attr("y1",B).attr("x2",N).attr("y2",B),Dt&&(Tt?Dt.transition():Dt).attr("height",u.getLegendHeight()-12).attr("width",J*(Lt+1)+10),u.legend.selectAll("."+M.legendItem).classed(M.legendItemHidden,function(ot){return!u.isTargetToShow(ot)}),u.updateLegendItemWidth(J),u.updateLegendItemHeight(gt),u.updateLegendStep(Lt),u.updateSizes(),u.updateScales(),u.updateSvgSize(),u.transformAll(It,a),u.legendHasRendered=!0},w.initRegion=function(){var e=this;e.region=e.main.append("g").attr("clip-path",e.clipPath).attr("class",M.regions)},w.updateRegion=function(e){var n=this,a=n.config;n.region.style("visibility",n.hasArcType()?"hidden":"visible"),n.mainRegion=n.main.select("."+M.regions).selectAll("."+M.region).data(a.regions),n.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),n.mainRegion.attr("class",n.classRegion.bind(n)),n.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},w.redrawRegion=function(e){var n=this,a=n.mainRegion.selectAll("rect").each(function(){var y=n.d3.select(this.parentNode).datum();n.d3.select(this).datum(y)}),u=n.regionX.bind(n),d=n.regionY.bind(n),_=n.regionWidth.bind(n),v=n.regionHeight.bind(n);return[(e?a.transition():a).attr("x",u).attr("y",d).attr("width",_).attr("height",v).style("fill-opacity",function(y){return mt(y.opacity)?y.opacity:.1})]},w.regionX=function(e){var n=this,a=n.config,u,d=e.axis==="y"?n.y:n.y2;return e.axis==="y"||e.axis==="y2"?u=a.axis_rotated&&"start"in e?d(e.start):0:u=a.axis_rotated?0:"start"in e?n.x(n.isTimeSeries()?n.parseDate(e.start):e.start):0,u},w.regionY=function(e){var n=this,a=n.config,u,d=e.axis==="y"?n.y:n.y2;return e.axis==="y"||e.axis==="y2"?u=a.axis_rotated?0:"end"in e?d(e.end):0:u=a.axis_rotated&&"start"in e?n.x(n.isTimeSeries()?n.parseDate(e.start):e.start):0,u},w.regionWidth=function(e){var n=this,a=n.config,u=n.regionX(e),d,_=e.axis==="y"?n.y:n.y2;return e.axis==="y"||e.axis==="y2"?d=a.axis_rotated&&"end"in e?_(e.end):n.width:d=a.axis_rotated?n.width:"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.width,d<u?0:d-u},w.regionHeight=function(e){var n=this,a=n.config,u=this.regionY(e),d,_=e.axis==="y"?n.y:n.y2;return e.axis==="y"||e.axis==="y2"?d=a.axis_rotated?n.height:"start"in e?_(e.start):n.height:d=a.axis_rotated&&"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.height,d<u?0:d-u},w.isRegionOnX=function(e){return!e.axis||e.axis==="x"},w.getScale=function(e,n,a){return(a?this.d3.time.scale():this.d3.scale.linear()).range([e,n])},w.getX=function(e,n,a,u){var d=this,_=d.getScale(e,n,d.isTimeSeries()),v=a?_.domain(a):_,y;d.isCategorized()?(u=u||function(){return 0},_=function(C,R){var $=v(C)+u(C);return R?$:Math.ceil($)}):_=function(C,R){var $=v(C);return R?$:Math.ceil($)};for(y in v)_[y]=v[y];return _.orgDomain=function(){return v.domain()},d.isCategorized()&&(_.domain=function(G){return arguments.length?(v.domain(G),_):(G=this.orgDomain(),[G[0],G[1]+1])}),_},w.getY=function(e,n,a){var u=this.getScale(e,n,this.isTimeSeriesY());return a&&u.domain(a),u},w.getYScale=function(e){return this.axis.getId(e)==="y2"?this.y2:this.y},w.getSubYScale=function(e){return this.axis.getId(e)==="y2"?this.subY2:this.subY},w.updateScales=function(){var e=this,n=e.config,a=!e.x;e.xMin=n.axis_rotated?1:0,e.xMax=n.axis_rotated?e.height:e.width,e.yMin=n.axis_rotated?0:e.height,e.yMax=n.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=n.axis_rotated?0:e.height2,e.subYMax=n.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,a?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,a?n.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,a?n.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(u){return u%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,a?n.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,a?n.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,n.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,n.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,n.axis_y_tick_format,e.yAxisTickValues,n.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,n.axis_y2_tick_format,e.y2AxisTickValues,n.axis_y2_tick_outer),a||(e.brush&&e.brush.scale(e.subX),n.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},w.selectPoint=function(e,n,a){var u=this,d=u.config,_=(d.axis_rotated?u.circleY:u.circleX).bind(u),v=(d.axis_rotated?u.circleX:u.circleY).bind(u),y=u.pointSelectR.bind(u);d.data_onselected.call(u.api,n,e.node()),u.main.select("."+M.selectedCircles+u.getTargetSelectorSuffix(n.id)).selectAll("."+M.selectedCircle+"-"+a).data([n]).enter().append("circle").attr("class",function(){return u.generateClass(M.selectedCircle,a)}).attr("cx",_).attr("cy",v).attr("stroke",function(){return u.color(n)}).attr("r",function(G){return u.pointSelectR(G)*1.4}).transition().duration(100).attr("r",y)},w.unselectPoint=function(e,n,a){var u=this;u.config.data_onunselected.call(u.api,n,e.node()),u.main.select("."+M.selectedCircles+u.getTargetSelectorSuffix(n.id)).selectAll("."+M.selectedCircle+"-"+a).transition().duration(100).attr("r",0).remove()},w.togglePoint=function(e,n,a,u){e?this.selectPoint(n,a,u):this.unselectPoint(n,a,u)},w.selectPath=function(e,n){var a=this;a.config.data_onselected.call(a,n,e.node()),a.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return a.d3.rgb(a.color(n)).brighter(.75)})},w.unselectPath=function(e,n){var a=this;a.config.data_onunselected.call(a,n,e.node()),a.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return a.color(n)})},w.togglePath=function(e,n,a,u){e?this.selectPath(n,a,u):this.unselectPath(n,a,u)},w.getToggle=function(e,n){var a=this,u;return e.nodeName==="circle"?a.isStepType(n)?u=function(){}:u=a.togglePoint:e.nodeName==="path"&&(u=a.togglePath),u},w.toggleShape=function(e,n,a){var u=this,d=u.d3,_=u.config,v=d.select(e),y=v.classed(M.SELECTED),G=u.getToggle(e,n).bind(u);_.data_selection_enabled&&_.data_selection_isselectable(n)&&(_.data_selection_multiple||u.main.selectAll("."+M.shapes+(_.data_selection_grouped?u.getTargetSelectorSuffix(n.id):"")).selectAll("."+M.shape).each(function(C,R){var $=d.select(this);$.classed(M.SELECTED)&&G(!1,$.classed(M.SELECTED,!1),C,R)}),v.classed(M.SELECTED,!y),G(!y,v,n,a))},w.initBar=function(){var e=this;e.main.select("."+M.chart).append("g").attr("class",M.chartBars)},w.updateTargetsForBar=function(e){var n=this,a=n.config,u,d,_=n.classChartBar.bind(n),v=n.classBars.bind(n),y=n.classFocus.bind(n);u=n.main.select("."+M.chartBars).selectAll("."+M.chartBar).data(e).attr("class",function(G){return _(G)+y(G)}),d=u.enter().append("g").attr("class",_).style("pointer-events","none"),d.append("g").attr("class",v).style("cursor",function(G){return a.data_selection_isselectable(G)?"pointer":null})},w.updateBar=function(e){var n=this,a=n.barData.bind(n),u=n.classBar.bind(n),d=n.initialOpacity.bind(n),_=function(y){return n.color(y.id)};n.mainBar=n.main.selectAll("."+M.bars).selectAll("."+M.bar).data(a),n.mainBar.enter().append("path").attr("class",u).style("stroke",_).style("fill",_),n.mainBar.style("opacity",d),n.mainBar.exit().transition().duration(e).remove()},w.redrawBar=function(e,n){return[(n?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",e).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},w.getBarW=function(e,n){var a=this,u=a.config,d=typeof u.bar_width=="number"?u.bar_width:n?e.tickInterval()*u.bar_width_ratio/n:0;return u.bar_width_max&&d>u.bar_width_max?u.bar_width_max:d},w.getBars=function(e,n){var a=this;return(n?a.main.selectAll("."+M.bars+a.getTargetSelectorSuffix(n)):a.main).selectAll("."+M.bar+(mt(e)?"-"+e:""))},w.expandBars=function(e,n,a){var u=this;a&&u.unexpandBars(),u.getBars(e,n).classed(M.EXPANDED,!0)},w.unexpandBars=function(e){var n=this;n.getBars(e).classed(M.EXPANDED,!1)},w.generateDrawBar=function(e,n){var a=this,u=a.config,d=a.generateGetBarPoints(e,n);return function(_,v){var y=d(_,v),G=u.axis_rotated?1:0,C=u.axis_rotated?0:1,R="M "+y[0][G]+","+y[0][C]+" L"+y[1][G]+","+y[1][C]+" L"+y[2][G]+","+y[2][C]+" L"+y[3][G]+","+y[3][C]+" z";return R}},w.generateGetBarPoints=function(e,n){var a=this,u=n?a.subXAxis:a.xAxis,d=e.__max__+1,_=a.getBarW(u,d),v=a.getShapeX(_,d,e,!!n),y=a.getShapeY(!!n),G=a.getShapeOffset(a.isBarType,e,!!n),C=_*(a.config.bar_space/2),R=n?a.getSubYScale:a.getYScale;return function($,N){var B=R.call(a,$.id)(0),Q=G($,N)||B,K=v($),J=y($);return a.config.axis_rotated&&(0<$.value&&J<B||$.value<0&&B<J)&&(J=B),[[K+C,Q],[K+C,J-(B-Q)],[K+_-C,J-(B-Q)],[K+_-C,Q]]}},w.isWithinBar=function(e){var n=this.d3.mouse(e),a=e.getBoundingClientRect(),u=e.pathSegList.getItem(0),d=e.pathSegList.getItem(1),_=Math.min(u.x,d.x),v=Math.min(u.y,d.y),y=a.width,G=a.height,C=2,R=_-C,$=_+y+C,N=v+G+C,B=v-C;return R<n[0]&&n[0]<$&&B<n[1]&&n[1]<N},w.getShapeIndices=function(e){var n=this,a=n.config,u={},d=0,_,v;return n.filterTargetsToShow(n.data.targets.filter(e,n)).forEach(function(y){for(_=0;_<a.data_groups.length;_++)if(!(a.data_groups[_].indexOf(y.id)<0)){for(v=0;v<a.data_groups[_].length;v++)if(a.data_groups[_][v]in u){u[y.id]=u[a.data_groups[_][v]];break}}ne(u[y.id])&&(u[y.id]=d++)}),u.__max__=d-1,u},w.getShapeX=function(e,n,a,u){var d=this,_=u?d.subX:d.x;return function(v){var y=v.id in a?a[v.id]:0;return v.x||v.x===0?_(v.x)-e*(n/2-y):0}},w.getShapeY=function(e){var n=this;return function(a){var u=e?n.getSubYScale(a.id):n.getYScale(a.id);return u(a.value)}},w.getShapeOffset=function(e,n,a){var u=this,d=u.orderTargets(u.filterTargetsToShow(u.data.targets.filter(e,u))),_=d.map(function(v){return v.id});return function(v,y){var G=a?u.getSubYScale(v.id):u.getYScale(v.id),C=G(0),R=C;return d.forEach(function($){var N=u.isStepType(v)?u.convertValuesToStep($.values):$.values;$.id===v.id||n[$.id]!==n[v.id]||_.indexOf($.id)<_.indexOf(v.id)&&((typeof N[y]>"u"||+N[y].x!=+v.x)&&(y=-1,N.forEach(function(B,Q){B.x===v.x&&(y=Q)})),y in N&&N[y].value*v.value>=0&&(R+=G(N[y].value)-C))}),R}},w.isWithinShape=function(e,n){var a=this,u=a.d3.select(e),d;return a.isTargetToShow(n.id)?e.nodeName==="circle"?d=a.isStepType(n)?a.isWithinStep(e,a.getYScale(n.id)(n.value)):a.isWithinCircle(e,a.pointSelectR(n)*1.5):e.nodeName==="path"&&(d=u.classed(M.bar)?a.isWithinBar(e):!0):d=!1,d},w.getInterpolate=function(e){var n=this,a=n.isInterpolationType(n.config.spline_interpolation_type)?n.config.spline_interpolation_type:"cardinal";return n.isSplineType(e)?a:n.isStepType(e)?n.config.line_step_type:"linear"},w.initLine=function(){var e=this;e.main.select("."+M.chart).append("g").attr("class",M.chartLines)},w.updateTargetsForLine=function(e){var n=this,a=n.config,u,d,_=n.classChartLine.bind(n),v=n.classLines.bind(n),y=n.classAreas.bind(n),G=n.classCircles.bind(n),C=n.classFocus.bind(n);u=n.main.select("."+M.chartLines).selectAll("."+M.chartLine).data(e).attr("class",function(R){return _(R)+C(R)}),d=u.enter().append("g").attr("class",_).style("opacity",0).style("pointer-events","none"),d.append("g").attr("class",v),d.append("g").attr("class",y),d.append("g").attr("class",function(R){return n.generateClass(M.selectedCircles,R.id)}),d.append("g").attr("class",G).style("cursor",function(R){return a.data_selection_isselectable(R)?"pointer":null}),e.forEach(function(R){n.main.selectAll("."+M.selectedCircles+n.getTargetSelectorSuffix(R.id)).selectAll("."+M.selectedCircle).each(function($){$.value=R.values[$.index].value})})},w.updateLine=function(e){var n=this;n.mainLine=n.main.selectAll("."+M.lines).selectAll("."+M.line).data(n.lineData.bind(n)),n.mainLine.enter().append("path").attr("class",n.classLine.bind(n)).style("stroke",n.color),n.mainLine.style("opacity",n.initialOpacity.bind(n)).style("shape-rendering",function(a){return n.isStepType(a)?"crispEdges":""}).attr("transform",null),n.mainLine.exit().transition().duration(e).style("opacity",0).remove()},w.redrawLine=function(e,n){return[(n?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]},w.generateDrawLine=function(e,n){var a=this,u=a.config,d=a.d3.svg.line(),_=a.generateGetLinePoints(e,n),v=n?a.getSubYScale:a.getYScale,y=function(R){return(n?a.subxx:a.xx).call(a,R)},G=function(R,$){return u.data_groups.length>0?_(R,$)[0][1]:v.call(a,R.id)(R.value)};return d=u.axis_rotated?d.x(G).y(y):d.x(y).y(G),u.line_connectNull||(d=d.defined(function(C){return C.value!=null})),function(C){var R=u.line_connectNull?a.filterRemoveNull(C.values):C.values,$=n?a.subX:a.x,N=v.call(a,C.id),B=0,Q=0,K;return a.isLineType(C)?u.data_regions[C.id]?K=a.lineWithRegions(R,$,N,u.data_regions[C.id]):(a.isStepType(C)&&(R=a.convertValuesToStep(R)),K=d.interpolate(a.getInterpolate(C))(R)):(R[0]&&(B=$(R[0].x),Q=N(R[0].value)),K=u.axis_rotated?"M "+Q+" "+B:"M "+B+" "+Q),K||"M 0 0"}},w.generateGetLinePoints=function(e,n){var a=this,u=a.config,d=e.__max__+1,_=a.getShapeX(0,d,e,!!n),v=a.getShapeY(!!n),y=a.getShapeOffset(a.isLineType,e,!!n),G=n?a.getSubYScale:a.getYScale;return function(C,R){var $=G.call(a,C.id)(0),N=y(C,R)||$,B=_(C),Q=v(C);return u.axis_rotated&&(0<C.value&&Q<$||C.value<0&&$<Q)&&(Q=$),[[B,Q-($-N)],[B,Q-($-N)],[B,Q-($-N)],[B,Q-($-N)]]}},w.lineWithRegions=function(e,n,a,u){var d=this,_=d.config,v,y,G="M",C,R,$,N,B,Q,K,J,gt=d.isCategorized()?.5:0,yt,vt,xt=[];function wt(it,st){var Vt;for(Vt=0;Vt<st.length;Vt++)if(st[Vt].start<it&&it<=st[Vt].end)return!0;return!1}if(Gt(u))for(v=0;v<u.length;v++)xt[v]={},ne(u[v].start)?xt[v].start=e[0].x:xt[v].start=d.isTimeSeries()?d.parseDate(u[v].start):u[v].start,ne(u[v].end)?xt[v].end=e[e.length-1].x:xt[v].end=d.isTimeSeries()?d.parseDate(u[v].end):u[v].end;yt=_.axis_rotated?function(it){return a(it.value)}:function(it){return n(it.x)},vt=_.axis_rotated?function(it){return n(it.x)}:function(it){return a(it.value)};function bt(it){return"M"+it[0][0]+" "+it[0][1]+" "+it[1][0]+" "+it[1][1]}for(d.isTimeSeries()?C=function(st,Vt,_t,Lt){var Tt=st.x.getTime(),It=Vt.x-st.x,ie=new Date(Tt+It*_t),Ut=new Date(Tt+It*(_t+Lt)),Ht;return _.axis_rotated?Ht=[[a($(_t)),n(ie)],[a($(_t+Lt)),n(Ut)]]:Ht=[[n(ie),a($(_t))],[n(Ut),a($(_t+Lt))]],bt(Ht)}:C=function(st,Vt,_t,Lt){var Tt;return _.axis_rotated?Tt=[[a($(_t),!0),n(R(_t))],[a($(_t+Lt),!0),n(R(_t+Lt))]]:Tt=[[n(R(_t),!0),a($(_t))],[n(R(_t+Lt),!0),a($(_t+Lt))]],bt(Tt)},v=0;v<e.length;v++){if(ne(xt)||!wt(e[v].x,xt))G+=" "+yt(e[v])+" "+vt(e[v]);else for(R=d.getScale(e[v-1].x+gt,e[v].x+gt,d.isTimeSeries()),$=d.getScale(e[v-1].value,e[v].value),N=n(e[v].x)-n(e[v-1].x),B=a(e[v].value)-a(e[v-1].value),Q=Math.sqrt(Math.pow(N,2)+Math.pow(B,2)),K=2/Q,J=K*2,y=K;y<=1;y+=J)G+=C(e[v-1],e[v],y,K);e[v].x}return G},w.updateArea=function(e){var n=this,a=n.d3;n.mainArea=n.main.selectAll("."+M.areas).selectAll("."+M.area).data(n.lineData.bind(n)),n.mainArea.enter().append("path").attr("class",n.classArea.bind(n)).style("fill",n.color).style("opacity",function(){return n.orgAreaOpacity=+a.select(this).style("opacity"),0}),n.mainArea.style("opacity",n.orgAreaOpacity),n.mainArea.exit().transition().duration(e).style("opacity",0).remove()},w.redrawArea=function(e,n){return[(n?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},w.generateDrawArea=function(e,n){var a=this,u=a.config,d=a.d3.svg.area(),_=a.generateGetAreaPoints(e,n),v=n?a.getSubYScale:a.getYScale,y=function($){return(n?a.subxx:a.xx).call(a,$)},G=function($,N){return u.data_groups.length>0?_($,N)[0][1]:v.call(a,$.id)(a.getAreaBaseValue($.id))},C=function($,N){return u.data_groups.length>0?_($,N)[1][1]:v.call(a,$.id)($.value)};return d=u.axis_rotated?d.x0(G).x1(C).y(y):d.x(y).y0(u.area_above?0:G).y1(C),u.line_connectNull||(d=d.defined(function(R){return R.value!==null})),function(R){var $=u.line_connectNull?a.filterRemoveNull(R.values):R.values,N=0,B=0,Q;return a.isAreaType(R)?(a.isStepType(R)&&($=a.convertValuesToStep($)),Q=d.interpolate(a.getInterpolate(R))($)):($[0]&&(N=a.x($[0].x),B=a.getYScale(R.id)($[0].value)),Q=u.axis_rotated?"M "+B+" "+N:"M "+N+" "+B),Q||"M 0 0"}},w.getAreaBaseValue=function(){return 0},w.generateGetAreaPoints=function(e,n){var a=this,u=a.config,d=e.__max__+1,_=a.getShapeX(0,d,e,!!n),v=a.getShapeY(!!n),y=a.getShapeOffset(a.isAreaType,e,!!n),G=n?a.getSubYScale:a.getYScale;return function(C,R){var $=G.call(a,C.id)(0),N=y(C,R)||$,B=_(C),Q=v(C);return u.axis_rotated&&(0<C.value&&Q<$||C.value<0&&$<Q)&&(Q=$),[[B,N],[B,Q-($-N)],[B,Q-($-N)],[B,N]]}},w.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+M.circles).selectAll("."+M.circle).data(e.lineOrScatterData.bind(e)),e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color),e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e)),e.mainCircle.exit().remove()},w.redrawCircle=function(e,n,a){var u=this.main.selectAll("."+M.selectedCircle);return[(a?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",e).attr("cy",n),(a?u.transition(Math.random().toString()):u).attr("cx",e).attr("cy",n)]},w.circleX=function(e){return e.x||e.x===0?this.x(e.x):null},w.updateCircleY=function(){var e=this,n,a;e.config.data_groups.length>0?(n=e.getShapeIndices(e.isLineType),a=e.generateGetLinePoints(n),e.circleY=function(u,d){return a(u,d)[0][1]}):e.circleY=function(u){return e.getYScale(u.id)(u.value)}},w.getCircles=function(e,n){var a=this;return(n?a.main.selectAll("."+M.circles+a.getTargetSelectorSuffix(n)):a.main).selectAll("."+M.circle+(mt(e)?"-"+e:""))},w.expandCircles=function(e,n,a){var u=this,d=u.pointExpandedR.bind(u);a&&u.unexpandCircles(),u.getCircles(e,n).classed(M.EXPANDED,!0).attr("r",d)},w.unexpandCircles=function(e){var n=this,a=n.pointR.bind(n);n.getCircles(e).filter(function(){return n.d3.select(this).classed(M.EXPANDED)}).classed(M.EXPANDED,!1).attr("r",a)},w.pointR=function(e){var n=this,a=n.config;return n.isStepType(e)?0:Kt(a.point_r)?a.point_r(e):a.point_r},w.pointExpandedR=function(e){var n=this,a=n.config;return a.point_focus_expand_enabled?Kt(a.point_focus_expand_r)?a.point_focus_expand_r(e):a.point_focus_expand_r?a.point_focus_expand_r:n.pointR(e)*1.75:n.pointR(e)},w.pointSelectR=function(e){var n=this,a=n.config;return Kt(a.point_select_r)?a.point_select_r(e):a.point_select_r?a.point_select_r:n.pointR(e)*4},w.isWithinCircle=function(e,n){var a=this.d3,u=a.mouse(e),d=a.select(e),_=+d.attr("cx"),v=+d.attr("cy");return Math.sqrt(Math.pow(_-u[0],2)+Math.pow(v-u[1],2))<n},w.isWithinStep=function(e,n){return Math.abs(n-this.d3.mouse(e)[1])<30},w.getCurrentWidth=function(){var e=this,n=e.config;return n.size_width?n.size_width:e.getParentWidth()},w.getCurrentHeight=function(){var e=this,n=e.config,a=n.size_height?n.size_height:e.getParentHeight();return a>0?a:320/(e.hasType("gauge")&&!n.gauge_fullCircle?2:1)},w.getCurrentPaddingTop=function(){var e=this,n=e.config,a=mt(n.padding_top)?n.padding_top:0;return e.title&&e.title.node()&&(a+=e.getTitlePadding()),a},w.getCurrentPaddingBottom=function(){var e=this.config;return mt(e.padding_bottom)?e.padding_bottom:0},w.getCurrentPaddingLeft=function(e){var n=this,a=n.config;return mt(a.padding_left)?a.padding_left:a.axis_rotated?!a.axis_x_show||a.axis_x_inner?1:Math.max(le(n.getAxisWidthByAxisId("x",e)),40):!a.axis_y_show||a.axis_y_inner?n.axis.getYAxisLabelPosition().isOuter?30:1:le(n.getAxisWidthByAxisId("y",e))},w.getCurrentPaddingRight=function(){var e=this,n=e.config,a=10,u=e.isLegendRight?e.getLegendWidth()+20:0;return mt(n.padding_right)?n.padding_right+1:n.axis_rotated?a+u:!n.axis_y2_show||n.axis_y2_inner?2+u+(e.axis.getY2AxisLabelPosition().isOuter?20:0):le(e.getAxisWidthByAxisId("y2"))+u},w.getParentRectValue=function(e){for(var n=this.selectChart.node(),a;n&&n.tagName!=="BODY";){try{a=n.getBoundingClientRect()[e]}catch{e==="width"&&(a=n.offsetWidth)}if(a)break;n=n.parentNode}return a},w.getParentWidth=function(){return this.getParentRectValue("width")},w.getParentHeight=function(){var e=this.selectChart.style("height");return e.indexOf("px")>0?+e.replace("px",""):0},w.getSvgLeft=function(e){var n=this,a=n.config,u=a.axis_rotated||!a.axis_rotated&&!a.axis_y_inner,d=a.axis_rotated?M.axisX:M.axisY,_=n.main.select("."+d).node(),v=_&&u?_.getBoundingClientRect():{right:0},y=n.selectChart.node().getBoundingClientRect(),G=n.hasArcType(),C=v.right-y.left-(G?0:n.getCurrentPaddingLeft(e));return C>0?C:0},w.getAxisWidthByAxisId=function(e,n){var a=this,u=a.axis.getLabelPositionById(e);return a.axis.getMaxTickWidth(e,n)+(u.isInner?20:40)},w.getHorizontalAxisHeight=function(e){var n=this,a=n.config,u=30;return e==="x"&&!a.axis_x_show?8:e==="x"&&a.axis_x_height?a.axis_x_height:e==="y"&&!a.axis_y_show?a.legend_show&&!n.isLegendRight&&!n.isLegendInset?10:1:e==="y2"&&!a.axis_y2_show?n.rotated_padding_top:(e==="x"&&!a.axis_rotated&&a.axis_x_tick_rotate&&(u=30+n.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-a.axis_x_tick_rotate)/180)),e==="y"&&a.axis_rotated&&a.axis_y_tick_rotate&&(u=30+n.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-a.axis_y_tick_rotate)/180)),u+(n.axis.getLabelPositionById(e).isInner?0:10)+(e==="y2"?-10:0))},w.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},w.initBrush=function(){var e=this,n=e.d3;e.brush=n.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+M.brush).call(this),this},e.brush.scale=function(a){return e.config.axis_rotated?this.y(a):this.x(a)}},w.initSubchart=function(){var e=this,n=e.config,a=e.context=e.svg.append("g").attr("transform",e.getTranslate("context")),u=n.subchart_show?"visible":"hidden";a.style("visibility",u),a.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",M.chart),a.select("."+M.chart).append("g").attr("class",M.chartBars),a.select("."+M.chart).append("g").attr("class",M.chartLines),a.append("g").attr("clip-path",e.clipPath).attr("class",M.brush).call(e.brush),e.axes.subx=a.append("g").attr("class",M.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",n.axis_rotated?"":e.clipPathForXAxis).style("visibility",n.subchart_axis_x_show?u:"hidden")},w.updateTargetsForSubchart=function(e){var n=this,a=n.context,u=n.config,d,_,v,y,G=n.classChartBar.bind(n),C=n.classBars.bind(n),R=n.classChartLine.bind(n),$=n.classLines.bind(n),N=n.classAreas.bind(n);u.subchart_show&&(y=a.select("."+M.chartBars).selectAll("."+M.chartBar).data(e).attr("class",G),v=y.enter().append("g").style("opacity",0).attr("class",G),v.append("g").attr("class",C),_=a.select("."+M.chartLines).selectAll("."+M.chartLine).data(e).attr("class",R),d=_.enter().append("g").style("opacity",0).attr("class",R),d.append("g").attr("class",$),d.append("g").attr("class",N),a.selectAll("."+M.brush+" rect").attr(u.axis_rotated?"width":"height",u.axis_rotated?n.width2:n.height2))},w.updateBarForSubchart=function(e){var n=this;n.contextBar=n.context.selectAll("."+M.bars).selectAll("."+M.bar).data(n.barData.bind(n)),n.contextBar.enter().append("path").attr("class",n.classBar.bind(n)).style("stroke","none").style("fill",n.color),n.contextBar.style("opacity",n.initialOpacity.bind(n)),n.contextBar.exit().transition().duration(e).style("opacity",0).remove()},w.redrawBarForSubchart=function(e,n,a){(n?this.contextBar.transition(Math.random().toString()).duration(a):this.contextBar).attr("d",e).style("opacity",1)},w.updateLineForSubchart=function(e){var n=this;n.contextLine=n.context.selectAll("."+M.lines).selectAll("."+M.line).data(n.lineData.bind(n)),n.contextLine.enter().append("path").attr("class",n.classLine.bind(n)).style("stroke",n.color),n.contextLine.style("opacity",n.initialOpacity.bind(n)),n.contextLine.exit().transition().duration(e).style("opacity",0).remove()},w.redrawLineForSubchart=function(e,n,a){(n?this.contextLine.transition(Math.random().toString()).duration(a):this.contextLine).attr("d",e).style("opacity",1)},w.updateAreaForSubchart=function(e){var n=this,a=n.d3;n.contextArea=n.context.selectAll("."+M.areas).selectAll("."+M.area).data(n.lineData.bind(n)),n.contextArea.enter().append("path").attr("class",n.classArea.bind(n)).style("fill",n.color).style("opacity",function(){return n.orgAreaOpacity=+a.select(this).style("opacity"),0}),n.contextArea.style("opacity",0),n.contextArea.exit().transition().duration(e).style("opacity",0).remove()},w.redrawAreaForSubchart=function(e,n,a){(n?this.contextArea.transition(Math.random().toString()).duration(a):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},w.redrawSubchart=function(e,n,a,u,d,_,v){var y=this,G=y.d3,C=y.config,R,$,N;y.context.style("visibility",C.subchart_show?"visible":"hidden"),C.subchart_show&&(G.event&&G.event.type==="zoom"&&y.brush.extent(y.x.orgDomain()).update(),e&&(y.brush.empty()||y.brush.extent(y.x.orgDomain()).update(),R=y.generateDrawArea(d,!0),$=y.generateDrawBar(_,!0),N=y.generateDrawLine(v,!0),y.updateBarForSubchart(a),y.updateLineForSubchart(a),y.updateAreaForSubchart(a),y.redrawBarForSubchart($,a,a),y.redrawLineForSubchart(N,a,a),y.redrawAreaForSubchart(R,a,a)))},w.redrawForBrush=function(){var e=this,n=e.x;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.config.subchart_onbrush.call(e.api,n.orgDomain())},w.transformContext=function(e,n){var a=this,u;n&&n.axisSubX?u=n.axisSubX:(u=a.context.select("."+M.axisX),e&&(u=u.transition())),a.context.attr("transform",a.getTranslate("context")),u.attr("transform",a.getTranslate("subx"))},w.getDefaultExtent=function(){var e=this,n=e.config,a=Kt(n.axis_x_extent)?n.axis_x_extent(e.getXDomain(e.data.targets)):n.axis_x_extent;return e.isTimeSeries()&&(a=[e.parseDate(a[0]),e.parseDate(a[1])]),a},w.initText=function(){var e=this;e.main.select("."+M.chart).append("g").attr("class",M.chartTexts),e.mainText=e.d3.selectAll([])},w.updateTargetsForText=function(e){var n=this,a,u,d=n.classChartText.bind(n),_=n.classTexts.bind(n),v=n.classFocus.bind(n);a=n.main.select("."+M.chartTexts).selectAll("."+M.chartText).data(e).attr("class",function(y){return d(y)+v(y)}),u=a.enter().append("g").attr("class",d).style("opacity",0).style("pointer-events","none"),u.append("g").attr("class",_)},w.updateText=function(e){var n=this,a=n.config,u=n.barOrLineData.bind(n),d=n.classText.bind(n);n.mainText=n.main.selectAll("."+M.texts).selectAll("."+M.text).data(u),n.mainText.enter().append("text").attr("class",d).attr("text-anchor",function(_){return a.axis_rotated?_.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(_){return n.color(_)}).style("fill-opacity",0),n.mainText.text(function(_,v,y){return n.dataLabelFormat(_.id)(_.value,_.id,v,y)}),n.mainText.exit().transition().duration(e).style("fill-opacity",0).remove()},w.redrawText=function(e,n,a,u){return[(u?this.mainText.transition():this.mainText).attr("x",e).attr("y",n).style("fill",this.color).style("fill-opacity",a?0:this.opacityForText.bind(this))]},w.getTextRect=function(e,n,a){var u=this.d3.select("body").append("div").classed("c3",!0),d=u.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),_=this.d3.select(a).style("font"),v;return d.selectAll(".dummy").data([e]).enter().append("text").classed(n||"",!0).style("font",_).text(e).each(function(){v=this.getBoundingClientRect()}),u.remove(),v},w.generateXYForText=function(e,n,a,u){var d=this,_=d.generateGetAreaPoints(e,!1),v=d.generateGetBarPoints(n,!1),y=d.generateGetLinePoints(a,!1),G=u?d.getXForText:d.getYForText;return function(C,R){var $=d.isAreaType(C)?_:d.isBarType(C)?v:y;return G.call(d,$(C,R),C,this)}},w.getXForText=function(e,n,a){var u=this,d=a.getBoundingClientRect(),_,v;return u.config.axis_rotated?(v=u.isBarType(n)?4:6,_=e[2][1]+v*(n.value<0?-1:1)):_=u.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0],n.value===null&&(_>u.width?_=u.width-d.width:_<0&&(_=4)),_},w.getYForText=function(e,n,a){var u=this,d=a.getBoundingClientRect(),_;return u.config.axis_rotated?_=(e[0][0]+e[2][0]+d.height*.6)/2:(_=e[2][1],n.value<0||n.value===0&&!u.hasPositiveValue?(_+=d.height,u.isBarType(n)&&u.isSafari()?_-=3:!u.isBarType(n)&&u.isChrome()&&(_+=3)):_+=u.isBarType(n)?-3:-6),n.value===null&&!u.config.axis_rotated&&(_<d.height?_=d.height:_>this.height&&(_=this.height-4)),_},w.initTitle=function(){var e=this;e.title=e.svg.append("text").text(e.config.title_text).attr("class",e.CLASS.title)},w.redrawTitle=function(){var e=this;e.title.attr("x",e.xForTitle.bind(e)).attr("y",e.yForTitle.bind(e))},w.xForTitle=function(){var e=this,n=e.config,a=n.title_position||"left",u;return a.indexOf("right")>=0?u=e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-n.title_padding.right:a.indexOf("center")>=0?u=(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:u=n.title_padding.left,u},w.yForTitle=function(){var e=this;return e.config.title_padding.top+e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).height},w.getTitlePadding=function(){var e=this;return e.yForTitle()+e.config.title_padding.bottom},w.initTooltip=function(){var e=this,n=e.config,a;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",M.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&Xt(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),a=0;a<e.data.targets[0].values.length&&e.data.targets[0].values[a].x-n.tooltip_init_x!==0;a++);n.tooltip_init_x=a}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(u){return e.addName(u.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},w.getTooltipSortFunction=function(){var e=this,n=e.config;if(n.data_groups.length===0||n.tooltip_order!==void 0){var a=n.tooltip_order;a===void 0&&(a=n.data_order);var u=function(y){return y?y.value:null};if(Xt(a)&&a.toLowerCase()==="asc")return function(v,y){return u(v)-u(y)};if(Xt(a)&&a.toLowerCase()==="desc")return function(v,y){return u(y)-u(v)};if(Kt(a)){var d=a;return n.tooltip_order===void 0&&(d=function(y,G){return a(y?{id:y.id,values:[y]}:null,G?{id:G.id,values:[G]}:null)}),d}else if(Hn(a))return function(v,y){return a.indexOf(v.id)-a.indexOf(y.id)}}else{var _=e.orderTargets(e.data.targets).map(function(v){return v.id});return(e.isOrderAsc()||e.isOrderDesc())&&(_=_.reverse()),function(v,y){return _.indexOf(v.id)-_.indexOf(y.id)}}},w.getTooltipContent=function(e,n,a,u){var d=this,_=d.config,v=_.tooltip_format_title||n,y=_.tooltip_format_name||function(J){return J},G=_.tooltip_format_value||a,C,R,$,N,B,Q,K=this.getTooltipSortFunction();for(K&&e.sort(K),R=0;R<e.length;R++)if(e[R]&&(e[R].value||e[R].value===0)&&(C||($=qe(v?v(e[R].x):e[R].x),C="<table class='"+d.CLASS.tooltip+"'>"+($||$===0?"<tr><th colspan='2'>"+$+"</th></tr>":"")),N=qe(G(e[R].value,e[R].ratio,e[R].id,e[R].index,e)),N!==void 0)){if(e[R].name===null)continue;B=qe(y(e[R].name,e[R].ratio,e[R].id,e[R].index)),Q=d.levelColor?d.levelColor(e[R].value):u(e[R].id),C+="<tr class='"+d.CLASS.tooltipName+"-"+d.getTargetSelectorSuffix(e[R].id)+"'>",C+="<td class='name'><span style='background-color:"+Q+"'></span>"+B+"</td>",C+="<td class='value'>"+N+"</td>",C+="</tr>"}return C+"</table>"},w.tooltipPosition=function(e,n,a,u){var d=this,_=d.config,v=d.d3,y,G,C,R,$,N=d.hasArcType(),B=v.mouse(u);return N?(G=(d.width-(d.isLegendRight?d.getLegendWidth():0))/2+B[0],R=(d.hasType("gauge")?d.height:d.height/2)+B[1]+20):(y=d.getSvgLeft(!0),_.axis_rotated?(G=y+B[0]+100,C=G+n,$=d.currentWidth-d.getCurrentPaddingRight(),R=d.x(e[0].x)+20):(G=y+d.getCurrentPaddingLeft(!0)+d.x(e[0].x)+20,C=G+n,$=y+d.currentWidth-d.getCurrentPaddingRight(),R=B[1]+15),C>$&&(G-=C-$+20),R+a>d.currentHeight&&(R-=a+30)),R<0&&(R=0),{top:R,left:G}},w.showTooltip=function(e,n){var a=this,u=a.config,d,_,v,y=a.hasArcType(),G=e.filter(function(R){return R&&mt(R.value)}),C=u.tooltip_position||w.tooltipPosition;G.length===0||!u.tooltip_show||(a.tooltip.html(u.tooltip_contents.call(a,e,a.axis.getXAxisTickFormat(),a.getYFormat(y),a.color)).style("display","block"),d=a.tooltip.property("offsetWidth"),_=a.tooltip.property("offsetHeight"),v=C.call(this,G,d,_,n),a.tooltip.style("top",v.top+"px").style("left",v.left+"px"))},w.hideTooltip=function(){this.tooltip.style("display","none")},w.setTargetType=function(e,n){var a=this,u=a.config;a.mapToTargetIds(e).forEach(function(d){a.withoutFadeIn[d]=n===u.data_types[d],u.data_types[d]=n}),e||(u.data_type=n)},w.hasType=function(e,n){var a=this,u=a.config.data_types,d=!1;return n=n||a.data.targets,n&&n.length?n.forEach(function(_){var v=u[_.id];(v&&v.indexOf(e)>=0||!v&&e==="line")&&(d=!0)}):Object.keys(u).length?Object.keys(u).forEach(function(_){u[_]===e&&(d=!0)}):d=a.config.data_type===e,d},w.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},w.isLineType=function(e){var n=this.config,a=Xt(e)?e:e.id;return!n.data_types[a]||["line","spline","area","area-spline","step","area-step"].indexOf(n.data_types[a])>=0},w.isStepType=function(e){var n=Xt(e)?e:e.id;return["step","area-step"].indexOf(this.config.data_types[n])>=0},w.isSplineType=function(e){var n=Xt(e)?e:e.id;return["spline","area-spline"].indexOf(this.config.data_types[n])>=0},w.isAreaType=function(e){var n=Xt(e)?e:e.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[n])>=0},w.isBarType=function(e){var n=Xt(e)?e:e.id;return this.config.data_types[n]==="bar"},w.isScatterType=function(e){var n=Xt(e)?e:e.id;return this.config.data_types[n]==="scatter"},w.isPieType=function(e){var n=Xt(e)?e:e.id;return this.config.data_types[n]==="pie"},w.isGaugeType=function(e){var n=Xt(e)?e:e.id;return this.config.data_types[n]==="gauge"},w.isDonutType=function(e){var n=Xt(e)?e:e.id;return this.config.data_types[n]==="donut"},w.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},w.lineData=function(e){return this.isLineType(e)?[e]:[]},w.arcData=function(e){return this.isArcType(e.data)?[e]:[]},w.barData=function(e){return this.isBarType(e)?e.values:[]},w.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]},w.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},w.isInterpolationType=function(e){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(e)>=0},w.isSafari=function(){var e=window.navigator.userAgent;return e.indexOf("Safari")>=0&&e.indexOf("Chrome")<0},w.isChrome=function(){var e=window.navigator.userAgent;return e.indexOf("Chrome")>=0},w.initZoom=function(){var e=this,n=e.d3,a=e.config,u;e.zoom=n.behavior.zoom().on("zoomstart",function(){u=n.event.sourceEvent,e.zoom.altDomain=n.event.sourceEvent.altKey?e.x.orgDomain():null,a.zoom_onzoomstart.call(e.api,n.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var d=n.event.sourceEvent;d&&u.clientX===d.clientX&&u.clientY===d.clientY||(e.redrawEventRect(),e.updateZoom(),a.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(d){return a.axis_rotated?this.y(d):this.x(d)},e.zoom.orgScaleExtent=function(){var d=a.zoom_extent?a.zoom_extent:[1,10];return[d[0],Math.max(e.getMaxDataCount()/d[1],d[1])]},e.zoom.updateScaleExtent=function(){var d=Ae(e.x.orgDomain())/Ae(e.getZoomDomain()),_=this.orgScaleExtent();return this.scaleExtent([_[0]*d,_[1]*d]),this}},w.getZoomDomain=function(){var e=this,n=e.config,a=e.d3,u=a.min([e.orgXDomain[0],n.zoom_x_min]),d=a.max([e.orgXDomain[1],n.zoom_x_max]);return[u,d]},w.updateZoom=function(){var e=this,n=e.config.zoom_enabled?e.zoom:function(){};e.main.select("."+M.zoomRect).call(n).on("dblclick.zoom",null),e.main.selectAll("."+M.eventRect).call(n).on("dblclick.zoom",null)},w.redrawForZoom=function(){var e=this,n=e.d3,a=e.config,u=e.zoom,d=e.x;if(a.zoom_enabled&&e.filterTargetsToShow(e.data.targets).length!==0){if(n.event.sourceEvent.type==="mousemove"&&u.altDomain){d.domain(u.altDomain),u.scale(d).updateScaleExtent();return}e.isCategorized()&&d.orgDomain()[0]===e.orgXDomain[0]&&d.domain([e.orgXDomain[0]-1e-10,d.orgDomain()[1]]),e.redraw({withTransition:!1,withY:a.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),n.event.sourceEvent.type==="mousemove"&&(e.cancelClick=!0),a.zoom_onzoom.call(e.api,d.orgDomain())}},Ve})})(ms);var ys=ms.exports;const _l=fl(ys),ml=dl({__proto__:null,default:_l},[ys]);export{ml as c};
